{"version":3,"sources":["components/analysis/cancel-button.png","components/editor/cancel-button.png","containers/synthea-animated-logo.svg","containers/synthea-logo.png","containers/minimize-panel.png","containers/fullscreen.png","containers/Info.png","containers/state-button.png","containers/statelist.png","containers/code-button.png","containers/attribute-button.png","containers/related-button.png","containers/warning-button.png","reducers/library.js","templates/Templates.js","utils/stringUtils.js","reducers/editor.js","reducers/analysis.js","store.js","reducers/index.js","components/editor/Code.js","components/editor/String.js","components/editor/Goal.js","components/editor/ImagingStudyAttributes.js","components/editor/Conditional.js","components/editor/DirectTransition.js","components/editor/DistributedTransition.js","components/editor/ConditionalTransition.js","components/editor/ComplexTransition.js","components/editor/Table.js","components/editor/TableTransition.js","components/editor/Transition.js","templates/Tutorial.js","components/editor/AutoCompleteText.js","components/editor/Attributes.js","components/editor/State.js","components/editor/ModuleProperties.js","utils/graphviz.js","components/graph/ModuleGraph.js","components/menu/StyledDropZone.js","components/menu/LoadModule.js","components/menu/Download.js","components/editor/NavTabs.js","transforms/Module.js","utils/keys.js","data/example_module.js","components/editor/JsonEditor.js","components/analysis/StateList.js","components/analysis/AttributeList.js","components/analysis/WarningList.js","components/analysis/RelatedList.js","actions/analysis.js","actions/editor.js","actions/router.js","actions/library.js","containers/Editor.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","initialState","modules","analysis","library","state","arguments","length","undefined","action","type","Object","objectSpread","data","location","getTemplate","path","parsedPath","split","template","shift","reducedPath","join","typeVar","TypeTemplates","AttributeTemplates","TransitionTemplates","StateTemplates","ContainedTemplates","StructureTemplates","ModuleTemplates","_","cloneDeep","get","Date","Year","Month","Day","Hour","Minute","Second","Millisecond","Code","Snomed","system","code","display","Loinc","RxNorm","Nubc","DicomDCM","DicomSOP","Condition","Gender","condition_type","gender","Age","operator","quantity","unit","year","Active Condition","codes","Socioeconomic Status","category","Race","race","Symptom","symptom","value","Observation","Vital Sign","vital_sign","Active Medication","Active CarePlan","PriorState","name","Attribute","attribute","And","conditions","Or","At Least","minimum","At Most","maximum","Not","condition","True","False","Exact","ExactWithUnit","Range","low","high","RangeWithUnit","Prescription","dosage","amount","frequency","period","duration","Goal","addresses","Since","Within","UnnamedDistribution","NamedDistribution","default","ImagingStudy","Instance","title","sop_class","Series","body_site","modality","instances","Direct","Conditional","transition","Distributed","distribution","Complex","distributions","Table","lookuptable","viewTable","lookup_table_name_ModuleBuilder","transitions","default_probability","lookup_table_name","Initial","Terminal","Simple","Guard","allow","Delay","exact","SetAttribute","Counter","CallSubmodule","submodule","Encounter","encounter_class","reason","EncounterEnd","ConditionOnset","assign_to_attribute","target_encounter","ConditionEnd","AllergyOnset","AllergyEnd","MedicationOrder","MedicationEnd","CarePlanStart","CarePlanEnd","Procedure","VitalSign","MultiObservation","number_of_observations","DiagnosticReport","observations","procedure_code","series","cause","probability","Death","CheckYearly","conditional_transition","ActiveCondition","HasCondition","direct_transition","ConditionIncidence","RiskPerMonth","distributed_transition","AcquireCondition","GenderDifference","Male","Female","Common","ConditionVariation","VariantDistribution","Condition1","Condition2","Condition3","Join","MedicationVariation","Medication1","Medication2","Medication3","ChildrensDose","DosageDecision","AdultDose","MedicationsByYear","VariantsByYear","Medication4","ProcedureVariation","BeginEncounter","Procedure1","Observation1","Procedure2","Observation2","Procedure3","Observation3","Blank","remarks","states","Yearly","DeadAt40","DelayUntil40","cleanString","mapObj","keys","reduce","acc","cur","selectedStateKey","selectedStateTransition","selectedModuleKey","loadModuleVisible","downloadVisible","selectedModulePanel","modulePanelVisible","history","clipboard","historyIndex","refreshCodeFlag","editor","newState","key","transitionIndex","toConsumableArray","targetModuleKey","targetNode","currentModuleKey","defineProperty","stateKey","selectedState","alteredState","oldTransitionPoint","table_transition","complex_transition","complexTransitions","rightNode","forEach","t","i","nodes","dist","saveHistory","concat","structureName","libraryModule","newModule","selectStateTransition","newModules","tempModule","values","update","id","set","trim","test","parseFloat","toLowerCase","normalizeType","splitPath","Array","isArray","parent","slice","unset","splice","newVal","filter","x","stateName","fixStateReferences","transitionMapping","transitionName","transitionType","oldTransitionName","nodeName","paths","pathIndex","transitionTo","newName","moduleState","newRemarks","newType","pick","targetPanel","flag","map","s","condition_onset","allergy_onset","medication_order","careplan","libraryModuleCodes","warnings","libraryRelatedModules","relatedModules","attributes","templateCodes","c","parseLookupTable","parsed","isNumber","toString","Papa","parse","header","complete","results","tableHasError","textOk","parseOk","stateCollisionWarnings","globalCodes","equivalentStates","checkCollision","libraryState","local","first","second","e","collisions","push","message","moduleKey","visitedStateCheck","visitNext","_loop","nextStateKey","pop","nextState","notVisitedWarnings","visited","v","orphanStateWarnings","o","instance","placeholderCodeWarnings","tableColumns","tableTransitionWarnings","relatedMap","related","relatedBySubmodule","stateType","sort","a","b","y","enhancers","middleware","createBrowserHistory","basename","createAppStore","routerMiddleware","thunk","composedEnhancers","compose","apply","applyMiddleware","createStore","combineReducers","router","connectRouter","createRootReducer","_Component","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","inherits","createClass","props","react_default","createElement","lib","className","propName","change","onChange","Component","Codes","_Component2","_this","templates","SNOMED-CT","LOINC","NUBC","DICOM-DCM","DICOM-SOP","onClick","val","Code_Code","StringEditor","label","StringsEditor","String_StringEditor","goal","renderObservation","renderText","String_StringsEditor","observation","goalObservationValue","Code_Codes","text","options","_this2","Goals","_this3","goals","Goal_Goal","InstanceList","ImagingStudyAttributes_Instance","_Component3","ImagingStudyAttributes_InstanceList","SeriesList","_Component4","ImagingStudyAttributes_Series","unitOfTimeOptions","unitOfAgeOptions","ConditionalEditor","conditional","Conditional_Gender","Conditional_Age","Conditional_Date","Conditional_SocioeconomicStatus","Conditional_Race","Conditional_Symptom","Conditional_Observation","Conditional_VitalSign","Conditional_ActiveCondition","Conditional_ActiveMedication","Conditional_ActiveCarePlan","Conditional_PriorState","Conditional_Attribute","Conditional_And","Conditional_Or","Conditional_AtLeast","Conditional_AtMost","Conditional_Not","k","renderConditionalType","renderType","renderWarning","month","date","yearInput","monthInput","dayInput","day","hourInput","hour","minuteInput","minute","secondInput","millisecondInput","millisecond","SocioeconomicStatus","value_code","renderValueOrCodeValue","String","valueInput","ActiveMedication","ActiveCarePlan","renderSince","renderWithin","_this4","since","_this5","within","_this6","cond","Conditional_ConditionalEditor","assign","_this7","AtLeast","_this8","AtMost","_this9","DirectTransitionEditor","to","DistributedTransition","currentValue","renderDistribution","index","sum","remainder","remainderOption","editProps","step","min","max","format","formatAsPercentage","validate","checkInRange","num","ConditionalTransition","indexTo","indexFrom","oldEntry","clone","newEntry","swapItems","isLast","renderIf","renderUpDown","ComplexTransition","d","transitionEditor","newDistributedTransition","DirectTransition","nextTransition","newDirectTransition","editor_DistributedTransition","renderTransition","_ref","columnHeaders","rows","columns","item","str","replace","width","react_data_grid_default","rowGetter","rowsCount","minHeight","TableTransition","lookupTableName","buttonText","displayTable","displayTableError","fixMissingValues","doesDataHaveInputError","parseTextArea","editor_Table","msg","checkTable","displayTableView","Transition","editor_ConditionalTransition","editor_ComplexTransition","components_editor_TableTransition","BasicTutorial","selector","EditTutorial","AutoCompleteText","call","onFocusGained","target","items","suggestions","match","indexOf","regex","RegExp","setState","onSubmitted","timer","setTimeout","onBlur","clearTimeout","keyPressed","event","handleChange","bind","assertThisInitialized","suggestionSelected","onFocus","onKeyDown","renderSuggestions","React","Attributes","StateEditor","updateRemarks","el","State_Initial","State_Terminal","State_Simple","State_Guard","State_Delay","State_SetAttribute","State_Counter","State_CallSubmodule","State_Encounter","State_EncounterEnd","State_ConditionOnset","State_ConditionEnd","State_AllergyOnset","State_AllergyEnd","State_MedicationOrder","State_MedicationEnd","State_CarePlanStart","State_CarePlanEnd","State_Procedure","State_VitalSign","State_Observation","State_MultiObservation","State_DiagnosticReport","State_ImagingStudy","State_Symptom","State_Death","_React$createElement","_React$createElement2","_React$createElement3","typeOptions","renameNode","changeType","renderStateType","addTransition","components_editor_Transition","otherStates","helpFunction","renderExactOrRange","range","toggleLabel","displayLabel","handleTextChange","handleSubmit","lastSubmitted","fixTextBox","displayAttribute","AttributeData","others","moduleName","read","write","class","displayAttributes","AutoCompleteText_AutoCompleteText","renderValue","save","href","window","hash","wellness","renderWellness","renderReason","allOptions","renderDischargeDisposition","_this10","discharge_disposition","_this11","renderTargetEncounter","renderAssignToAttribute","_this12","targetEncounter","_this13","_this14","referenced_by_attribute","renderConditionOnset","renderReferencedByAttribute","renderCodes","_this15","_this16","_this17","_this18","_this19","_this20","renderAllergyOnset","_this21","_this22","_this23","_this24","toggleLabelReason","displayLabelReason","handleTextChangeReason","handleSubmitReason","valueReason","lastSubmittedReason","renderPrescription","renderChronicMed","renderCreateAdministration","_this25","checked","chronic","_this26","administration","_this27","_this28","_this29","prescription","renderRefills","renderAsNeeded","renderDosage","renderDuration","renderInstructions","_this30","refills","_this31","as_needed","_this32","instructions","_this33","renderMedicationOrder","_this34","_this35","_this36","_this37","renderActivities","renderGoals","_this38","_this39","_this40","activities","_this41","Goal_Goals","_this42","renderCarePlan","_this43","_this44","_this45","_this46","_this47","_this48","_this49","_this50","renderValueContainer","renderToggles","currentItem","_this51","console","log","toggles","_this52","observationCount","_this53","ImagingStudyAttributes_SeriesList","renderProbability","renderCause","classInvalid","_this54","_this55","_this56","_this57","_this58","_this59","ModulePropertiesEditor","onRemarksChange","newval","generateDOT","relatedStates","findTransitions","nodesAsDOT","transitionsAsDOT","node","escapeId","shape","style","fillcolor","fontcolor","details","stateDescription","escapeLabel","params","escapeName","escapedName","out_transitions","transitionClassName","distLabel","pct","cnd","logicDetails","nodeHighlighted","trans","r","primarySeries","primaryModality","primaryBodySite","vs","unitv","diagType","diagValue","diagUnits","verb","activity","logic","obs","findReferencedType","leaveUndefinedBlank","threshold","subsOr","prior_description","plan","med","alg","obj","ret","children","?","\"","&","<",">","ModuleGraph","onPanZoom","onMouseUp","onMouseDown","bold","lastDOT","writeSVG","mount","addEventListener","nextProps","panZoomSettings","fullscreen","svgPanZoom","panBy","customPanBy","blockPanZoomEvent","zoom","pan","animationStep","intervalID","stepX","animationTime","stepY","setInterval","clearInterval","ref","height","xmlns","opacity","patternUnits","fill","stroke","strokeWidth","transform","position","top","left","fireClickOnMouseUp","getPan","getZoom","setAttribute","linesShouldBold","Math","originalWidth","originalHeight","dot","innerHTML","Viz","svgDefs","ex","alert","svg","document","getElementById","stopPropagation","removeAttribute","unnecessaryGTitle","querySelector","remove","unnecessaryFill","querySelectorAll","group","originator","hitLine","cloneNode","transitionIndexClass","baseVal","find","startsWith","parseInt","appendChild","getAttribute","Number","offsetLeft","getBoundingClientRect","offsetTop","visibleWidth","visibleHeight","zoomFactor","controlIconsEnabled","minZoom","onPan","onZoom","panZoomControlsElement","zoomIn","zoomOut","pow","baseStyle","flex","flexDirection","alignItems","padding","borderWidth","borderRadius","marginBottom","borderColor","borderStyle","backgroundColor","outline","activeStyle","color","acceptStyle","cursor","rejectStyle","StyledDropzone","_useDropzone","useDropzone","accept","onDrop","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useMemo","LoadModule","loadModule","json","JSON","Error","tableMessage","substr","selectedOption","files","file","reader","FileReader","onload","result","readAsText","onLoadJSON","onOptionClick","updateJson","renderFooter","loadButton","data-dismiss","closeButton","welcome","onHide","renderDetails","n","moduleList","submoduleList","Modules","Folders","Submodules","Branches","renderWelcomeMessage","ID","list","fetch","then","response","branch","changeColor","fetchModuleList","catch","error","currentBranch","folders","includes","fetchModule","currentModule","fetchSubmodule","prevProps","prevState","fetchBranchList","classDetails","visible","marginLeft","marginRight","marginTop","aria-label","aria-hidden","StyledDropZone","Download","onDownload","blob","Blob","refs","codeInput","downloadCsvs","filename","FileSaver","saveAs","downloadCsv","encodeURIComponent","element","body","click","removeChild","stringify","role","disabled","prepareJSON","NavTabs","onChangeModule","onClose","onCloseModule","m","src","CancelButton","alt","extractStates","extractDirectTransition","extractDistributedTransition","extractComplexTransition","extractTableTransition","extractTransition","uuid","create","extractState","findAvailableKey","root","keys_index","next","matches","exec","createSafeKeyFromName","example_module","Age_Guard","Pre_Examplitis","Examplitis","Wellness_Encounter","Examplitol","Pre_Examplotomy","Examplotomy_Encounter","Examplotomy","End_Examplotomy_Encounter","Last_Days","JsonEditor","jsoneditor_react_es","mode","ace","StateList","search","placeholder","clearSearch","scope","stateFilter","AttributeList","onSelect","option","loadSelectedModule","attributeFilter","dropDown","react_dropdown_dist_default","WarningList","warning","RelatedList","analyze","dispatchThenAnalyze","dispatch","getState","refreshCode","selectNode","addNode","addStructure","editNode","copyNode","jsonEdit","closeModule","editModuleName","editModuleRemarks","changeStateType","undo","redo","showLoadModule","hideLoadModule","showDownload","hideDownload","changeModulePanel","openModule","loadLibrary","charAt","Editor",".","\\","|","pasteNode","takenKeys","startTutorial","steps","joyride","reset","run","renderAddStateButton","data-tip","renderUndoButton","undoEnabled","renderRedoButton","redoEnabled","renderDownloadButton","renderDeleteButton","renderCopyButton","renderPasteButton","renderStateEditor","editor_State","moduleStates","leftNavClick","renderDownload","components_menu_Download","renderLoadModule","components_menu_LoadModule","renderModulePropertiesEditor","editor_ModuleProperties","renderModuleGraph","components_graph_ModuleGraph","onPanelResize","panelWidth","deltaX","onPanelResizeDone","renderPanelContent","components_analysis_StateList","components_editor_JsonEditor","components_analysis_AttributeList","components_analysis_WarningList","components_analysis_RelatedList","renderStateButton","dataTip","StateButton","renderStateListButton","stateCount","StateListButton","renderAttributesButton","attributesCount","AttributeButton","renderWarningButton","warningCount","WarningButton","renderRelatedModulesButton","relatedCount","RelatedButton","nav","renderNav","SyntheaLogo","components_editor_NavTabs","renderMainEditor","FullscreenButton","InfoButton","CodeButton","MinimizePanel","react_draggable_default","axis","onDrag","onStop","bounds","right","Infinity","bottom","originalPanelWidth","LoadingLogo","stepIndex","examplitis","ReactTooltip","rebuild","dist_default","effect","delayShow","react_joyride_es","showOverlay","showSkipButton","showStepsProgress","autoStart","debug","allowClicksThruHole","keyboardNavigation","connect","bindActionCreators","store","dispatchLocationChange","listen","App","es","esm","react_router","component","Boolean","hostname","ReactDOM","render","src_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1e133884.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/synthea-animated-logo.d15f277a.svg\";","module.exports = __webpack_public_path__ + \"static/media/synthea-logo.81979623.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABKUlEQVRIieWVzW3DMAxGn4Au4BW8QlbwClnBK2SFrpAV2hG8QlZQR/AKzKEMKsQ0TCoSeggBHgxIfvz7KPgnS+WHiPSBpHQGRuAb+NkcEJGmDsxABkR9erA+OmQ3KHDWLE1rBi6AF2A4Ov8yOKU0KuzsAZoW7N8IXPnrn8cnA+sD6+UlCBQN0q6IY0KjwIz2vPiPD8xWEh6/AfPO//bBWpJLBfAKTAeVM+0BXAOwFfgERueM2EkHPGsbBg+wBXg5KmdrcPaWs0fGK78zUB3AK6UuJ/jUClyzlRZ2NFuj4xPxPbzZUmFwcajmIVj1jjkHLrCxySKLRYAvnqQXAjdYpRmdgyrwUxA1j0f9e7wTgFcJ7cBFAB4ptgc7pdgPfCDF/mBDCYtW403tDn5nUb6eK9JxAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAAAmCAYAAADz9XSfAAAC00lEQVR4nO2c4XnaMBRF7+NjAEagGzgbOBuQDcgGdAM6QbMBbJBskGwAGyQblA1uf8hNhbAtbPSeGtV3AB0ONu9JnyQApZBckHwlWWsxWphLkgcrXsAuy5dkRfIXXWoVyCVz9YdpwQvYFcl3Y99azZfkmuepk0MumVsfqM0L2Dl8Nyq+TTnZ8TJ1Mkg78zkEavFa+OX4sqnNLUJqUnQlrJWpwQvYi6J86dVmKym6EtbJTM0L2Dl8V33MWwffdA2sJUXyZwyYkhewc/huY8CxA7fWZk0p/p3CR5OC18LeFePLntqsJcXzKXx6qX52X7//er6M1GYNKV5O4dNK9bNz+Q5iDhk8WptTS/H6EjZO6t/zjfb7tsyvGHgB4BnA6A83NA3zFUBlxQzYOwArY+Zo31lk8ArAAbYPsAbwjjwPsIL7Mi0fYIUbfTsfIsk1nNBy7OBDQ3LTMBdWTI+9hvGvv2EeoOE7tjZ3pL6CN2QKH83/5jsPB4f927iE67m5+p91v18ise9nOWWC2jw0JFdw5SRX/8vR75P7zprB19CqzR0huYV7I3P1vwMK6fdzkjsA69QDd4UZpvABvzjf3iXGlK+RmYg8Ani0AorISUQeAPywYgb8XL7ftRizBrQHcAfgpAUKIyJbAA+WTI+9h/P9MGQ+AbiHgu9nORWRI4BvAI6pIV0RkRe4L9OM6bGPDfvNkPkGBd+zntj89O8APKWE9EVEPuDe0L0V02OfROQepfpyxJZIR+oBzGt2zqP5Qr6Dt9naEoMM2pzsyNVSDTN2huU2qbjvkA3gFL7+Gd1R6V1iZOwbpr3ZYx/hSt2LMfMm3+g60esbZksCrzfvrZgB23QJZDoX4XQ8w8pX53iGB5kOSpXgy+nIYjm+nA4PW/jqHB4OINMxfn1fvWP8HmS6UFOCL6erbeX4crpkWhswdS6ZBpDpurc+s1b3ZWl/RBBnZ/P9DWNXeLt4JWYKAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAYAAADud3N8AAABr0lEQVRIib3WsWsUQRTH8c/OnTZRBIkWOUFLG0FjFUgrpLOz0NZ/QNDeXhQbQSxSCVrY2KSwUIgWIgqBNEoOxYhaGS8RxEIuFrsLlzV3mbm97A9esfB+7/tmZuftZuKU4SzmcRodtPEXX/Eer7CC7ciaQzWNm1gviu0V60X+9DiwFm5gKxJWja3C34oFHsfymLBqLBf1RuoEuhMCltEt6u6qQ1iNLHQfl3AvMn+1qP+fFiMLfKr4Pkb6FqvAuYTt+jnQ9RQ2Erxzg9ClBGN5Tg+xluhbKoEd9BPN40YfnYAF+cRpQhkWAmYTjZuFuYzNRP9skG9vk+oEHG4YOhXQaxj6I8gvd5P6HvC6YegbOILf4u9a9Th6Cd4+ZoL8lX+0b+vaqef4Vj6cwp/Ibuus9GK1i+sJ5t5AxHre2WXyZXiSUCR15u74wgzqIJ7uA/T2MGCpFm6Z3JfnJQ7sBS01j7c1gV0ciwWWynABj/ErEfgZJ1OBVbVxDldwTT7JhgE/GPEHWEd3hwBf4OgoY5hwI3fkx7ExKqk9IdgXXMWzmOS6K93GA5yJBdbVZZwfx/gPjrmEGhKRqqEAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADF0lEQVRIiZ3WS4iVZRgH8N8cx+N4osuMkqPZFbEb4aIUwkVWEAUtohZR7oISiqJNi0gwsILatLCCcBPZbREFbaTMRYRdKRcVJdaohVE5MzmHUU9NZ74Wz/M535w5M874h5dzznt5/s/l/z7v6XFmNLABd2AT1mApjuN7fIS9+AH/zsNeV1yNl3AMBVoYwV9J1MYkfsIT6D8bkpvxdRI08Rm24i7chs14MSNpYwJv4dKFkFyPb5LkFzyKVah37GuIqJ/H37l/Fy6cD8lyvJuHfsQtWHyGM+emM8dFZE9iyVwHevAA/kkP7+xYX4SLsQ5rk6BEHU+ngwdxw1xEg9idm18xPVXnYwv2YQgH8DKurey5DF/l+a1zRXUjfsUYbq/MN/CMEEVRGRP4Atd1iWovVs5GdB9OCiVdXpnfJCRddBlt7BB3i1DkWEZ9ZWmgVjHWg/PSqzFxZwgh3Jpr3VATl3kgfw9jXKR6SXVTlaiWn+30ttyzqmNvJ1aYUmZ5tifHDKJJUYOJ9L705j8cMrfEj+JUfh8QahwX6p1BBIcxKuqzpuLhBzgyC0khOsKIkP/GdHQoHe+KlfgwD++oRFHDgxlZVQhNvC1SB5fgS5GdbWZ2ktNYlAab4sJWJV4X/e910Z724DFclOt9eEqk+mesn42kxCDeS4+/S7K+ynq/6A6D6M25hugoo6Iu2zvOzIqNopkW+A2P4IKMuIrFoqk+J2pU4BNT9T2N3s6JRFs0SFgtnoO78T6+FYpaIRruPbginWiKbAzNJ5rVeE0U9JAQx4iQfSFe0ZaoRVUYkzn24CYdQijluBx/iFw/jIfS4At4Fp+K/Pcm4Xj+3i+EcQofiza0IceweOpJ9e5Lr9fhXvyeHu40/QE7R4jgGtFE12b6lglZ9+N+cXmLtHmVqNdmmYYW3jH1dO9OgwtFHY+LVJ/Am2l3v0xBmfsCn4t0ni0G8Kqp/xF/4ljN9C49IR60UTOlPF9MiielJWral3MOm66cYbwh7sdCURdCOpK2SpvNXnFflmY0LdHXyrFQ1MQ71BAd4qTIzOj/E7fg3rTP7r4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAaCAYAAAAwspV7AAAAs0lEQVRIie3UMQrCQBCF4S9h8SzxRKbQ0lYrxcYL6BXsbPSEQhotNBBCAmuzSbE/TLGzA/uYfbxiWVULXLFGgTsOaOp6BR6Pp5QEXLDr9HZ44dSbfacSVWIz0N+mEjBEOeXjY5S+HupzG+gVqSrg+Du033jHuaumNXwqAhrsfzULQuotxDBLoxfLqhq9nGqLAaOJ3g7lRJcTPZ6c6LHkRI9llkbPif6PqJzoMczS6DnRY/kAyfw0NPNHfbAAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAZCAYAAADNAiUZAAABn0lEQVRIic2WwXHCMBBFnzM0QAu04JSQlAAlQAlwk3SDElAJSQmhBFwCtOAS4CAJ1kISdkxm8mc8I9kr/d2V9nsr0pgDS+DDzy2wShkarW5jpc0MOInPG+DbaHWWa94S+6yBL0E4Blvg6J15SvpKTHGZu2ESGcy8UcAG2PXd3aexAlDa/HDPVi3t4khn0dz2JUzgkNs3lV6JdgSpXCuz95T0T1AiHRNlcX3pTEuke+ACXJQ2F6VNqrx6p1fesqZA2gdSEKbSMUm69M9LSH35SOJtEIkJLqWnaE3DgPosYAEc/bgGTkobW2VIq767Su1NQWmzxslhgM3d3mPm/SAobeqIEHBnGqRL/kVquuf7W+zFuAHejVYrGamlK3uj/jI+SlkNK6NVA48lI29srMNDIWuzDYQp0k5tFTZc0hWHlINZofl32luKNMYgnX4FaWu0SpHK9cUe6RzNc2VjuSvWIf6otHloUSTiduWMS1Xwcu+fuBuceodaQZ7qBgM6Op5Kbx/NneMi/JSlkEFL1PbkSBck0iZgvc0zwh1OhTrHdgUMPHWH6hjEpwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAABmklEQVRIibWWy3HCMBCGv3HSgFtwC0kJaYEWSAlQgiiBXHNzSoBrbqQEuOZmX7mRA1q0XkvyiJh/RjO2tI9f2ocEY6yAC1BH1v4DsdsBLznBNy+4m5kAQAMcFZEmJXicEpiBSEdmo84vugcREEhYLlxPfoDOj7lzIQYJyzbGbhvT8HB+/aKGPTWn1nIJqJP0hh2J4zEOnJKVIY7sfC60DSYkMtElFGI4GEc6zjvCca8yNgYyS8rLUnSE/NTOY2hFpyIk4qnAwAfQ+2/R3wPrAhvir6kIPaGEBMCX+S8hAGET6JMoxT5ltBTVvYqMk255p53+XhKOcQ9YFNq45WIVmYxhSdhpSziFNSEMDfmStJBN9BC6XKpEdWPRQ7qrM/NCdkU+RFLaDYSaTzWrGInWyBwiMrm+IU+GI8AzIctrv2iz/gS8E0r5h3F5vhqHPbBJEIAQioGd6K32QIi/QXLrW+3RV/mCeEipmXjxzAjJn+g1r2/CklIrgfjIXnT6TVDafKYgVXawC0/m/xM4c62Ab+B3ZiJwrbSznvgDPlufbtfHeLcAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAYAAAAULC3gAAABYElEQVRIie2XTU7DMBCFP1dZItFLVGHFujs2CAmxZMdFKBdo4TBhxx04AItyiqgpe7OwKyZR4njCgCrEk0aa+PfZHr+JIWABVMAO8Ea2i2MuALz3WQZQArUhka7VQKkhVP0gmYNVuYQcsAdO4tG9AS/Y4Bo4j37jvT/N7ShXsjIiA7CRY+fu0MyQgAn+PiF5W6bg6HYIdEE9KqBih7LK6QiohlCWgE4g1BJQzZGtgbmivRZzYF0oOlwJP0dAX4FlT/lT51sK6CWMHNnAVq+GbpMo7xXGHrTaFcAHX6njLlakVgRwATxG/15WOOcO7o0obvqYDCGZXL8RpK3kmph/02nLGYnbY0CojnNkEZoBW0LwPRMyvxX2ccxlnCMLRVzlO3CrmOxB+G6w1QRorn0LInhNcXS57J/QGDQxNCagU9EWUMXz5FdeJxpCSQE1sCCgmgcc4Z+oIuQmKyJNHLME+AQWCT3RvS5INwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAA5ElEQVRIib3WPQqDQBCG4dc0Qq6Rg6XzXjlDevEIghcQBGtbK9OsYUn8mU/HXRgIMpMHx12dDH3lwDP8fgHjgf8wrztQAlOIMlxLgl2KrmGXoHuYK2rFXNA1bACqEIMXunVndZRXr+RI6F4bLaAZtTyzJspvdnI3UesGaaOa1pC/iCq7UQX/0FzAJqCPwF6oK4NFIRTNx2JeS8diK4rbb29TLLWl8edoFOq+LQX9FTagtfP0TlXC5Sy6YFa0Ax4hurOYBa2ivMoDs6DvEG6YBXXHVDTpXJN0cks6m8pYdgA9Nep/AHdVY2hvGCEdAAAAAElFTkSuQmCC\"","const initialState = {modules: {}, analysis: {}};\r\n\r\nexport default (state = initialState, action) => {\r\n  let newState = null;\r\n  switch (action.type) {\r\n    case 'LOAD_LIBRARY':\r\n      newState = {...state, modules: {...action.data}, location: action.location}\r\n      return newState\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\n// do not allow direct access because it is easy to forget to clone these templates\r\nexport function getTemplate(path){\r\n\r\n  const parsedPath = path.split('.')\r\n  const template = parsedPath.shift();\r\n  const reducedPath = parsedPath.join('.')\r\n\r\n  let typeVar = null;\r\n  switch(template){\r\n    case 'Type':\r\n      typeVar = TypeTemplates;\r\n      break;\r\n\r\n    case 'Attribute':\r\n      typeVar = AttributeTemplates;\r\n      break;\r\n\r\n    case 'Transition':\r\n      typeVar = TransitionTemplates;\r\n      break;\r\n\r\n    case 'State':\r\n      typeVar = StateTemplates;\r\n      break;\r\n\r\n    case 'Contained':\r\n      typeVar = ContainedTemplates;\r\n      break;\r\n\r\n    case 'Structure':\r\n      typeVar = StructureTemplates;\r\n      break;\r\n\r\n    case 'Module':\r\n      typeVar = ModuleTemplates;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n\r\n  if(reducedPath.length === 0){\r\n    return typeVar\r\n  }\r\n\r\n  return _.cloneDeep(_.get(typeVar, reducedPath));\r\n}\r\n\r\nconst TypeTemplates = {\r\n  Date: {\r\n    Year: 2000,\r\n    Month: 12,\r\n    Day: 25,\r\n    Hour: 0,\r\n    Minute: 0,\r\n    Second: 0,\r\n    Millisecond: 0\r\n  },\r\n  Code: {\r\n    Snomed: {\r\n      system: \"SNOMED-CT\",\r\n      code: \"1234\",\r\n      display: \"SNOMED Code\"\r\n    },\r\n    Loinc: {\r\n      system: \"LOINC\",\r\n      code: \"1234\",\r\n      display: \"LOINC Code\"\r\n    },\r\n    RxNorm: {\r\n      system: \"RxNorm\",\r\n      code: \"1234\",\r\n      display: \"RxNorm Code\"\r\n    },\r\n    Nubc: {\r\n      system: \"NUBC\",\r\n      code: \"1234\",\r\n      display: \"NUBC Code\"\r\n    },\r\n    DicomDCM: {\r\n      system: \"DICOM-DCM\",\r\n      code: \"XX\",\r\n      display: \"DICOM Modality Code\"\r\n    },\r\n    DicomSOP: {\r\n      system: \"DICOM-SOP\",\r\n      code: \"1.2.3.4.5.6.7.8\",\r\n      display: \"DICOM Subject-Object Pair Code\"\r\n    }\r\n  },\r\n\r\n  Condition: {\r\n    Gender: {\r\n      condition_type: 'Gender',\r\n      gender: 'F'\r\n    },\r\n    Age: {\r\n      condition_type: 'Age',\r\n      operator: \">\",\r\n      quantity: 0,\r\n      unit: \"years\"\r\n    },\r\n    Date: {\r\n      condition_type: 'Date',\r\n      operator: \">\",\r\n      year: 2000,\r\n    },\r\n    \"Active Condition\": {\r\n      condition_type: 'Active Condition',\r\n      codes: [{\r\n        system: \"SNOMED-CT\",\r\n        code: \"1234\",\r\n        display: \"SNOMED Code\"\r\n      }],\r\n    },\r\n    \"Socioeconomic Status\": {\r\n        \"condition_type\": \"Socioeconomic Status\",\r\n        \"category\": \"Middle\"\r\n    },\r\n    Race: {\r\n      \"condition_type\": \"Race\",\r\n      \"race\": \"Hispanic\"\r\n    },\r\n    Symptom: {\r\n      \"condition_type\": \"Symptom\",\r\n      \"symptom\" : \"Chest Pain\",\r\n      \"operator\": \">=\",\r\n      \"value\": 50\r\n    },\r\n    Observation: {\r\n      \"condition_type\": \"Observation\",\r\n      \"codes\": [\r\n        {\r\n          \"system\": \"LOINC\",\r\n          \"code\": \"72107-6\",\r\n          \"display\": \"Mini Mental State Examination\"\r\n        }\r\n      ],\r\n      \"operator\": \"==\",\r\n      \"value\": 0\r\n    },\r\n    \"Vital Sign\": {\r\n        \"condition_type\" : \"Vital Sign\",\r\n        \"vital_sign\" : \"Systolic Blood Pressure\",\r\n        \"operator\" : \">\",\r\n        \"value\" : 120\r\n    },\r\n    \"Active Medication\": {\r\n      \"condition_type\": \"Active Medication\",\r\n      \"codes\": [\r\n        {\r\n          \"system\": \"RxNorm\",\r\n          \"code\": \"849727\",\r\n          \"display\": \"Naproxen sodium 220 MG [Aleve]\"\r\n        }\r\n      ]\r\n    },\r\n    \"Active CarePlan\": {\r\n      \"condition_type\": \"Active CarePlan\",\r\n      \"codes\": [\r\n        {\r\n          \"system\": \"SNOMED-CT\",\r\n          \"code\": \"698360004\",\r\n          \"display\": \"Diabetes self management plan\"\r\n        }\r\n      ]\r\n    },\r\n    PriorState: {\r\n      \"condition_type\": \"PriorState\",\r\n      \"name\": \"\"\r\n    },\r\n    Attribute: {\r\n      \"condition_type\": \"Attribute\",\r\n      \"attribute\": \"opiod_prescription\",\r\n      \"operator\": \"==\",\r\n      \"value\": \"Vicodin\"\r\n    },\r\n    And: {\r\n      \"condition_type\": \"And\",\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        }\r\n      ]\r\n    },\r\n    Or: {\r\n      \"condition_type\": \"Or\",\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        }\r\n      ]\r\n    },\r\n    \"At Least\" : {\r\n      \"condition_type\": \"At Least\",\r\n      \"minimum\": 2,\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        },\r\n        {\r\n          \"condition_type\" : \"Active CarePlan\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"698360004\",\r\n              \"display\": \"Diabetes self management plan\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    \"At Most\": {\r\n      \"condition_type\": \"At Most\",\r\n      \"maximum\" : 2,\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Active CarePlan\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"698360004\",\r\n              \"display\": \"Diabetes self management plan\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    Not: {\r\n      \"condition_type\": \"Not\",\r\n      \"condition\": {\r\n        \"condition_type\": \"Gender\",\r\n        \"gender\": \"M\"\r\n      }\r\n    },\r\n    \"True\": {\r\n      condition_type: \"True\"\r\n    },\r\n    \"False\": {\r\n      condition_type: \"False\"\r\n    }\r\n  }\r\n}\r\n\r\nconst AttributeTemplates = {\r\n  Exact: {\r\n    quantity: 1\r\n  },\r\n  ExactWithUnit: {\r\n    quantity: 1,\r\n    unit: \"days\"\r\n  },\r\n  Range: {\r\n    low: 1,\r\n    high: 2,\r\n  },\r\n  RangeWithUnit: {\r\n    low: 1,\r\n    high: 2,\r\n    unit: \"days\"\r\n  },\r\n  Prescription: {\r\n    dosage: {\r\n      amount: 1,\r\n      frequency: 1,\r\n      period: 1,\r\n      unit: \"days\"\r\n    },\r\n    duration: {\r\n      quantity: 1,\r\n      unit: \"days\"\r\n    }\r\n  },\r\n  Goal: {\r\n    addresses: [\"text\"]\r\n  },\r\n  Observation: {\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    operator: \"==\",\r\n    value: 1\r\n  },\r\n  Since: \" \",\r\n  Within: {\r\n    quantity: 1,\r\n    unit: \"days\"\r\n  },\r\n  UnnamedDistribution: 1.0,\r\n  NamedDistribution: {\r\n    attribute: \"attribute\",\r\n    default: 1.0\r\n  },\r\n\r\n  ImagingStudy: {\r\n    Instance: {\r\n      title: \"Title of this image\",\r\n      sop_class: {...TypeTemplates.Code.DicomSOP}\r\n    },\r\n    Series: {\r\n      body_site: {...TypeTemplates.Code.Snomed},\r\n      modality: {...TypeTemplates.Code.DicomDCM},\r\n      instances: [{\r\n        title: \"Title of this image\",\r\n        sop_class: {...TypeTemplates.Code.DicomSOP}\r\n      }]\r\n    }\r\n  }\r\n}\r\n\r\n\r\nconst TransitionTemplates = {\r\n  Direct: 'Initial',\r\n  Conditional: [{transition: 'Initial', condition: {...TypeTemplates.Condition.Age}}],\r\n  Distributed: [{transition: 'Initial', distribution: 1.0}],\r\n  Complex: [{condition: {...TypeTemplates.Condition.Age}, distributions: [{transition: 'Initial', distribution: 1.0}]}],\r\n  Table: {\r\n    type: 'Table',\r\n    lookuptable: 'age,Initial,Terminal\\n0-50,.1,.9\\n51-140,.4,.6',\r\n    viewTable: true,\r\n    lookup_table_name_ModuleBuilder: 'file.csv',\r\n    transitions:[{transition: 'Initial', default_probability: 1.0, lookup_table_name: 'table.csv'}]\r\n  }\r\n}\r\n\r\nconst StateTemplates = {\r\n  Initial: {\r\n    type: \"Initial\",\r\n  },\r\n\r\n  Terminal: {\r\n    type: \"Terminal\",\r\n  },\r\n\r\n  Simple: {\r\n    type: \"Simple\",\r\n  },\r\n\r\n  Guard: {\r\n    type: \"Guard\",\r\n    allow: {...TypeTemplates.Condition.Age}\r\n  },\r\n\r\n  Delay: {\r\n    type: \"Delay\",\r\n    exact: {...AttributeTemplates.ExactWithUnit}\r\n  },\r\n\r\n  SetAttribute: {\r\n    type: \"SetAttribute\",\r\n    attribute: \"\"\r\n  },\r\n\r\n  Counter: {\r\n    type: \"Counter\",\r\n    attribute: \"\",\r\n    action: \"increment\"\r\n  },\r\n\r\n  CallSubmodule: {\r\n    type: \"CallSubmodule\",\r\n    submodule: \"\"\r\n  },\r\n\r\n  Encounter: {\r\n    type: \"Encounter\",\r\n    encounter_class: \"ambulatory\",\r\n    reason: \"\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  EncounterEnd: {\r\n    type: \"EncounterEnd\"\r\n  },\r\n\r\n  ConditionOnset: {\r\n    type: \"ConditionOnset\",\r\n    assign_to_attribute: \"\",\r\n    target_encounter: \"\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  ConditionEnd: {\r\n    type: \"ConditionEnd\"\r\n  },\r\n\r\n  AllergyOnset: {\r\n    type: \"AllergyOnset\",\r\n    target_encounter: \"\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  AllergyEnd: {\r\n    type: \"AllergyEnd\"\r\n  },\r\n\r\n  MedicationOrder: {\r\n    type: \"MedicationOrder\",\r\n    codes: [{...TypeTemplates.Code.RxNorm}]\r\n  },\r\n\r\n  MedicationEnd: {\r\n    type: \"MedicationEnd\"\r\n  },\r\n\r\n  CarePlanStart: {\r\n    type: \"CarePlanStart\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  CarePlanEnd: {\r\n    type: \"CarePlanEnd\"\r\n  },\r\n\r\n  Procedure: {\r\n    type: \"Procedure\",\r\n    codes: [{...TypeTemplates.Code.Snomed}],\r\n    duration: {\r\n      low: 30,\r\n      high: 30,\r\n      unit: 'minutes'\r\n    }\r\n  },\r\n\r\n  VitalSign: {\r\n    type: \"VitalSign\",\r\n    vital_sign: \"\",\r\n    unit: \"\",\r\n    exact: {...AttributeTemplates.Exact}\r\n  },\r\n\r\n  Observation: {\r\n    type: \"Observation\",\r\n    category: \"vital-signs\",\r\n    unit: \"\",\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    exact: {...AttributeTemplates.Exact}\r\n  },\r\n\r\n  MultiObservation: {\r\n    type: \"MultiObservation\",\r\n    category: \"vital-signs\",\r\n    number_of_observations: 0,\r\n    codes: [{...TypeTemplates.Code.Loinc}]\r\n  },\r\n\r\n  DiagnosticReport: {\r\n    type: \"DiagnosticReport\",\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    observations: []\r\n  },\r\n\r\n  ImagingStudy: {\r\n    type: \"ImagingStudy\",\r\n    procedure_code: {...TypeTemplates.Code.Snomed},\r\n    series: [{...AttributeTemplates.ImagingStudy.Series}]\r\n  },\r\n\r\n  Symptom: {\r\n    type: \"Symptom\",\r\n    symptom: \"\",\r\n    cause: \"\",\r\n    probability: 1.0,\r\n    exact: {...AttributeTemplates.Exact}\r\n  },\r\n\r\n  Death: {\r\n    type: \"Death\",\r\n    exact: {...AttributeTemplates.ExactWithUnit}\r\n  }\r\n}\r\n\r\nconst ContainedTemplates = {\r\n  Observation: {\r\n    category: \"laboratory\",\r\n    unit: \"\",\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    exact: {...AttributeTemplates.Exact}\r\n  }\r\n}\r\n\r\nconst StructureTemplates = {\r\n  CheckYearly: {\r\n    CheckYearly: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 1, unit: 'years'},\r\n      conditional_transition: [{transition: 'HasCondition', condition: {...TypeTemplates.Condition.ActiveCondition}},{transition: 'CheckYearly'}]},\r\n    HasCondition: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ConditionIncidence: {\r\n    RiskPerMonth: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 1, unit: 'months'},\r\n      distributed_transition: [{distribution: 0.99, transition: 'RiskPerMonth'},{distribution: 0.01, transition: 'AcquireCondition'}]},\r\n    AcquireCondition: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Terminal'}\r\n  },\r\n\r\n  GenderDifference: {\r\n    GenderDifference: {...StateTemplates.Simple,\r\n          conditional_transition: [\r\n            {condition: {...TypeTemplates.Condition.Gender, gender: 'M'}, transition: 'Male'},\r\n            {condition: {...TypeTemplates.Condition.Gender, gender: 'F'}, transition: 'Female'}]},\r\n    Male: {...StateTemplates.Simple, direct_transition: 'Common'},\r\n    Female: {...StateTemplates.Simple, direct_transition: 'Common'},\r\n    Common: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ConditionVariation: {\r\n    VariantDistribution: {...StateTemplates.Simple,\r\n      distributed_transition:[{distribution: 0.25, transition: 'Condition1'},{distribution: 0.35, transition: 'Condition2'},{distribution: 0.40, transition: 'Condition3'}]},\r\n    Condition1: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Condition2: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Condition3: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  MedicationVariation: {\r\n    VariantDistribution: {...StateTemplates.Simple,\r\n      distributed_transition:[{distribution: 0.25, transition: 'Medication1'},{distribution: 0.35, transition: 'Medication2'},{distribution: 0.40, transition: 'Medication3'}]},\r\n    Medication1: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication2: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication3: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ChildrensDose: {\r\n    DosageDecision: {...StateTemplates.Simple,\r\n          conditional_transition: [\r\n            {condition: {...TypeTemplates.Condition.Age, operator: '>=', quantity: 18, unit: 'years'}, transition: 'AdultDose'},\r\n            {transition: 'ChildrensDose'}]},\r\n    AdultDose: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    ChildrensDose: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  MedicationsByYear: {\r\n    VariantsByYear: {...StateTemplates.Simple,\r\n          conditional_transition: [\r\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 2007}, transition: 'Medication1'},\r\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 1992}, transition: 'Medication2'},\r\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 1978}, transition: 'Medication3'},\r\n            {transition: 'Medication4'}]},\r\n    Medication1: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication2: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication3: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication4: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ProcedureVariation: {\r\n    BeginEncounter: {...StateTemplates.Encounter, codes:[{system: 'SNOMED-CT', code: '', display: ''}],\r\n      distributed_transition:[{distribution: 0.25, transition:'Procedure1'},{distribution: 0.35, transition:'Procedure2'},{distribution: 0.40, transition:'Procedure3'}]},\r\n    Procedure1: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation1'},\r\n    Observation1: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Procedure2: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation2'},\r\n    Observation2: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Procedure3: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation3'},\r\n    Observation3: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  }\r\n}\r\n\r\nconst ModuleTemplates = {\r\n  Blank: {\r\n    name: \"Untitled\",\r\n    remarks: [\"A blank module\"],\r\n    states: {\r\n      Initial: {...StateTemplates.Initial, direct_transition: 'Terminal'},\r\n      Terminal: {...StateTemplates.Terminal}\r\n    }\r\n  },\r\n\r\n  Yearly: {\r\n    name: \"Yearly Check for Condition\",\r\n    remarks: [\"Check yearly for patient to have a condition\"],\r\n    states: {\r\n      ...StructureTemplates.CheckYearly,\r\n      Initial: {...StateTemplates.Initial, direct_transition: 'CheckYearly'},\r\n      Terminal: {...StateTemplates.Terminal}\r\n    }\r\n  },\r\n\r\n  DeadAt40: {\r\n    name: \"Dead At 40\",\r\n    remarks: [\"This module is an example of writing a template\"],\r\n    states: {\r\n      Initial: {...StateTemplates.Initial, direct_transition: 'DelayUntil40'},\r\n      DelayUntil40: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 40, unit: 'years'}, direct_transition: 'Death'},\r\n      Death: {...StateTemplates.Death, direct_transition: 'Terminal'},\r\n      Terminal: {...StateTemplates.Terminal}\r\n    }\r\n  }\r\n}\r\n","// Converts strings that contain numbers or booleans into their corresponding type\r\n// because that is what GMF expects\r\n\r\nexport function normalizeType(value){\r\n  if(typeof value !== 'string'){\r\n    return value;\r\n  }\r\n  value = value.trim();\r\n  if(/^-?\\d*[\\.]?\\d+$/.test(value) && (parseFloat(value) || parseFloat(value) === 0)){\r\n    value = parseFloat(value);\r\n  }\r\n  if(/^(true|false)$/i.test(value)){\r\n    value = value.toLowerCase() === 'true';\r\n  }\r\n  return value\r\n}\r\n\r\nexport function cleanString(value, mapObj){\r\n  return Object.keys(mapObj).reduce( (acc, cur) => acc.split(cur).join(mapObj[cur]), value)\r\n}\r\n","import _ from 'lodash';\r\nimport { getTemplate } from '../templates/Templates';\r\nimport { normalizeType, cleanString } from '../utils/stringUtils';\r\n\r\nconst initialState = {\r\n    selectedStateKey: null, \r\n    selectedStateTransition: null, \r\n    selectedModuleKey: null, \r\n    loadModuleVisible: false, \r\n    downloadVisible: false,\r\n    selectedModulePanel: 'info',\r\n    modulePanelVisible: true,\r\n    modules: {},\r\n    history: [],\r\n    clipboard: null,\r\n    historyIndex: -1,\r\n    refreshCodeFlag: false\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n\r\n  let newState = {...state}\r\n\r\n  switch (action.type) {\r\n    case 'SELECT_NODE':\r\n      let selectedModulePanel = state.selectedModulePanel;\r\n      if(action.data.key){\r\n        if(selectedModulePanel === 'info' || state.selectedStateKey === action.data.key){ // if on info or a 'double click'\r\n          selectedModulePanel = 'state';\r\n        }\r\n      } else {\r\n        if(selectedModulePanel === 'state'){\r\n          selectedModulePanel = 'info';\r\n        }\r\n      }\r\n\r\n      newState = { ...newState, selectedModulePanel, selectedStateKey: action.data.key, selectedStateTransition: action.data.transitionIndex};\r\n\r\n      // special case where we just want to reflect the selection change in the current history\r\n      newState.history = [...newState.history]\r\n      newState.history[0] = {...newState.history[0], selectedStateKey: action.data.key, selectedStateTransition: action.data.transitionIndex};\r\n\r\n      return newState;\r\n\r\n    case 'COPY_NODE':\r\n      // let newStateName = action.data.newName;\r\n      // let newModuleState = _.cloneDeep(newModuleCopy.states[action.data.targetNode.name]);\r\n      // newModuleState.name = newStateName;\r\n\r\n      // /* fix loopback transition case */\r\n      // renameLoopbackTransition(newModuleState, newStateName, action.data.targetNode.name);\r\n\r\n      // newModuleCopy.states[newStateName] = newModuleState;\r\n      // newState.modules[action.data.targetModuleKey] = newModuleCopy\r\n      // newState.selectedStateKey = action.data.newName;\r\n      // newState.selectedStateTransition = null;\r\n\r\n      newState.clipboard = _.cloneDeep(state.modules[action.data.targetModuleKey].states[action.data.targetNode.name])\r\n\r\n      // saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'ADD_NODE':\r\n\r\n      newState.modules = {...newState.modules}\r\n\r\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, [action.data.stateKey]:action.data.state};\r\n\r\n      if(action.data.selectedState && typeof action.data.selectedStateTransition === 'number'){\r\n        // We have been instructed to insert into the middle of an existing transition\r\n\r\n        let alteredState = _.cloneDeep(newState.modules[action.data.currentModuleKey].states[action.data.selectedState]);\r\n\r\n        if(alteredState.direct_transition && action.data.selectedStateTransition === 0 ){\r\n          let oldTransitionPoint = alteredState.direct_transition;\r\n          alteredState.direct_transition = action.data.stateKey;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        } else if(alteredState.distributed_transition){\r\n          let oldTransitionPoint = alteredState.distributed_transition[action.data.selectedStateTransition].transition;\r\n          alteredState.distributed_transition = [...alteredState.distributed_transition]\r\n          alteredState.distributed_transition[action.data.selectedStateTransition] = {...alteredState.distributed_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        } else if(alteredState.table_transition){\r\n          let oldTransitionPoint = alteredState.table_transition[action.data.selectedStateTransition].transition;\r\n          alteredState.table_transition = [...alteredState.table_transition]\r\n          alteredState.table_transition[action.data.selectedStateTransition] = {...alteredState.table_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        } else if(alteredState.conditional_transition){\r\n          let oldTransitionPoint = alteredState.conditional_transition[action.data.selectedStateTransition].transition;\r\n          alteredState.conditional_transition = [...alteredState.conditional_transition]\r\n          alteredState.conditional_transition[action.data.selectedStateTransition] = {...alteredState.conditional_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n\r\n        } else if(alteredState.complex_transition){\r\n          alteredState = {...alteredState, complex_transition: _.cloneDeep(alteredState.complex_transition)};\r\n          let complexTransitions = {}\r\n          let transitionIndex = 0;\r\n          let rightNode = null;\r\n          alteredState.complex_transition.forEach( (t, i) => {\r\n\r\n            if(t.transition !== undefined){\r\n              let nodes = t.transition;\r\n              if(complexTransitions[nodes] === undefined){\r\n                complexTransitions[nodes] = true;\r\n                if(transitionIndex === action.data.selectedStateTransition || nodes === rightNode){\r\n                  rightNode = nodes;\r\n                  let oldTransitionPoint = t.transition;\r\n                  t.transition = action.data.stateKey;\r\n                  newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n                }\r\n                transitionIndex++;\r\n              } else if(nodes === rightNode){\r\n                let oldTransitionPoint = t.transition;\r\n                t.transition = action.data.stateKey;\r\n                newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n              }\r\n            } else {\r\n              t.distributions.forEach( dist => {\r\n                let nodes = dist.transition;\r\n                if(complexTransitions[nodes] === undefined){\r\n                  complexTransitions[nodes] = true;\r\n                  if(transitionIndex === action.data.selectedStateTransition){\r\n                    rightNode = nodes;\r\n                    let oldTransitionPoint = dist.transition;\r\n                    dist.transition = action.data.stateKey;\r\n                    newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n                  }\r\n                  transitionIndex++;\r\n                } else if(nodes == rightNode){\r\n                  let oldTransitionPoint = dist.transition;\r\n                  dist.transition = action.data.stateKey;\r\n                  newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n                }\r\n              })\r\n            }\r\n          })\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        }\r\n        newState.selectedStateTransition = 0;\r\n      } else if(action.data.selectedState){\r\n        // we have selected a state, so we will add it AFTER\r\n        let alteredState = _.cloneDeep(newState.modules[action.data.currentModuleKey].states[action.data.selectedState]);\r\n\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['direct_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['conditional_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['distributed_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['complex_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['table_transition']\r\n\r\n\r\n        if(alteredState.direct_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = alteredState.direct_transition;\r\n        } else if(alteredState.distributed_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].distributed_transition = _.cloneDeep(alteredState.distributed_transition);\r\n          delete alteredState['distributed_transition']\r\n        } else if(alteredState.table_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].table_transition = _.cloneDeep(alteredState.table_transition);\r\n          delete alteredState['table_transition']\r\n        } else if(alteredState.conditional_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].conditional_transition = _.cloneDeep(alteredState.conditional_transition);\r\n          delete alteredState['conditional_transition']\r\n        } else if(alteredState.complex_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].complex_transition = _.cloneDeep(alteredState.complex_transition);\r\n          delete alteredState['complex_transition']\r\n        }\r\n        alteredState.direct_transition = action.data.stateKey;\r\n        newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n\r\n      }\r\n\r\n      newState.selectedStateKey = action.data.stateKey;\r\n      newState.selectedModulePanel= 'state';\r\n      newState.selectedStateTransition = null;\r\n\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState;\r\n\r\n    case 'INSERT_NODE':\r\n\r\n      newState.modules = {...newState.modules}\r\n\r\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, [action.data.stateKey]:action.data.state};\r\n      newState.selectedStateKey = action.data.stateKey;\r\n      newState.selectedModulePanel= 'state';\r\n      newState.selectedStateTransition = null;\r\n\r\n      saveHistory(newState);\r\n\r\n      return {...newState};\r\n\r\n    case 'ADD_STRUCTURE':\r\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, ...getTemplate(`Structure.${action.data.structureName}`)};\r\n      newState.selectedStateTransition = null;\r\n\r\n      saveHistory(newState);\r\n\r\n      return {...newState}\r\n\r\n    case 'OPEN_MODULE':\r\n      let selectedModuleKey = state.selectedModuleKey;\r\n\r\n      selectedModuleKey = action.data.key\r\n      if(action.data.libraryModule){\r\n        delete newState.modules[action.data.key];\r\n        let newModule = {}\r\n        newModule[action.data.key] = _.cloneDeep(action.data.libraryModule);\r\n        newState.modules = {...newModule, ...newState.modules}\r\n      }\r\n\r\n      if(!newState.modules[action.data.key]){\r\n        selectedModuleKey = null;\r\n      }\r\n\r\n      newState.selectedModuleKey = selectedModuleKey;\r\n      newState.selectedStateKey = null;\r\n      newState.selectStateTransition = null;\r\n      newState.loadModuleVisible = false;\r\n      newState.history = [];\r\n      newState.historyIndex = 0;\r\n      newState.selectedModulePanel = 'info';\r\n\r\n      saveHistory(newState);\r\n\r\n      return { ...newState };\r\n\r\n    case 'NEW_MODULE':\r\n      let newModules = {...state.modules}\r\n      delete newModules[action.data.key]\r\n\r\n      let tempModule = {}; // put in the right order in the object for the tabs\r\n      tempModule[action.data.key] = action.data.module;\r\n    \r\n\r\n      newState.history = [];\r\n      newState.historyIndex = 0;\r\n      saveHistory(newState);\r\n\r\n      return {...newState, modules: {...tempModule, ...newModules}, selectedStateKey: null, selectedStateTransition: null, selectedModuleKey: action.data.key}\r\n\r\n    case 'JSON_EDIT':\r\n      newState.modules = {...newState.modules}\r\n      newState.modules[state.selectedModuleKey] = _.cloneDeep(action.data.module);\r\n      saveHistory(newState);\r\n      return {...newState};\r\n\r\n    case 'EDIT_NODE':\r\n      let path = action.data.path.join('.');\r\n      let value = Object.values(action.data.update)[0]\r\n      if(typeof value === 'object') {\r\n        value = value.id;\r\n      }\r\n      if(value !== null && value !== undefined) {\r\n        _.set(newState.modules, path, normalizeType(value));\r\n\r\n        // FIX DEPENDENT THINGS\r\n        let splitPath = []\r\n        if(Array.isArray(path)){\r\n          splitPath = path.join('.').split('.')\r\n        } else {\r\n          splitPath = path.split('.')\r\n        }\r\n\r\n        // If change operator on attribute, clean up value if needed\r\n        if(splitPath[splitPath.length-1] === 'operator'){\r\n          const parent = _.get(newState.modules, splitPath.slice(0,-1).join('.'));\r\n          if((parent.operator === 'is nil' || parent.operator === 'is not nil')){\r\n            _.unset(newState.modules, splitPath.slice(0,-1).join('.') + '.value')\r\n          } else {\r\n            if(parent.operator.value === undefined){\r\n              _.set(newState.modules, splitPath.slice(0,-1).join('.') + '.value', 0)\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else{\r\n        _.unset(newState.modules, path);\r\n        let parent = [...action.data.path].splice(0, action.data.path.length -1).join(\".\");\r\n        if (action.data.path[2] == 'table_transition'){\r\n         parent  += '.transitions'\r\n        }\r\n        let newVal = _.get(newState.modules, parent);\r\n        if(Array.isArray(newVal)) {\r\n          _.set(newState.modules, parent, newVal.filter(x => x));\r\n        }\r\n\r\n        // check to see if it is a node deletion, in which case we need to references\r\n        let splitPath = []\r\n        if(Array.isArray(path)){\r\n          splitPath = path.join('.').split('.')\r\n        } else {\r\n          splitPath = path.split('.')\r\n        }\r\n\r\n        if(splitPath.length === 3 && splitPath[1] === 'states'){\r\n          let stateName = splitPath[2]\r\n          fixStateReferences(newState.modules[splitPath[0]], stateName, null)\r\n\r\n          if(splitPath[2] == newState.selectedStateKey){\r\n            newState.selectedStateKey = null; // deleselect\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'ADD_TRANSITION':\r\n\r\n      let transitionMapping = {\r\n        Conditional: 'conditional_transition',\r\n        Distributed: 'distributed_transition',\r\n        Direct: 'direct_transition',\r\n        Complex: 'complex_transition',\r\n        Table: 'table_transition',\r\n      };\r\n\r\n      let transitionName = transitionMapping[action.data.transitionType];\r\n      let oldTransitionName = null;\r\n      if (action.data.nodeName.transition != null) {\r\n        oldTransitionName = transitionMapping[action.data.nodeName.transition.type];\r\n      }\r\n\r\n      let paths = Object.values(transitionMapping);\r\n      for (var pathIndex in paths) {\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][paths[pathIndex]];\r\n      }\r\n      newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName] = getTemplate(`Transition.${action.data.transitionType}`);\r\n\r\n      // Get first of previous transition locations if available\r\n      let transitionTo = null;\r\n      switch(oldTransitionName) {\r\n        case 'direct_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.to', null);\r\n          break;\r\n        case 'distributed_transition':\r\n        case 'conditional_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.transition[0].to', null);\r\n          break;\r\n        case 'complex_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.transition[0].distributions[0].to', null);\r\n          break;\r\n        case 'table_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.transitions.transition[0].to', null);\r\n          break;\r\n      }\r\n\r\n      // Provide previous transition location to new if available\r\n      if (transitionTo !== null) {\r\n        switch(transitionName) {\r\n          case 'direct_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName] = transitionTo;\r\n            break;\r\n          case 'distributed_transition':\r\n          case 'conditional_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName][0].transition = transitionTo;\r\n            break;\r\n          case 'complex_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName][0].distributions[0].transition = transitionTo;\r\n            break;\r\n          case 'table_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName].transitions[0].transition = transitionTo;\r\n            break;\r\n        }\r\n      }\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'RENAME_NODE':\r\n\r\n      let stateName = action.data.targetNode.name;\r\n      let newName = action.data.newName.name;\r\n      let newModule = _.cloneDeep(state.modules[action.data.targetModuleKey])\r\n      let moduleState = newModule.states[stateName]\r\n\r\n\r\n      if(moduleState === undefined){\r\n        // if we can't find it, then it might be a blank state (Unnamed state)\r\n        // Check in the blank key\r\n        moduleState = newModule.states[\"\"]\r\n        stateName = \"\"\r\n      }\r\n\r\n      if(moduleState === undefined){\r\n        // If we still can't find the state, let's just hop out of here.\r\n        return newState;\r\n      }\r\n\r\n      delete newModule.states[stateName];\r\n\r\n      moduleState.name = newName\r\n      newModule.states[newName] = moduleState\r\n\r\n      fixStateReferences(newModule, stateName, newName);\r\n      newState.modules[action.data.targetModuleKey] = newModule;\r\n      newState.selectedStateKey = action.data.newName.name;\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'EDIT_MODULE_NAME':\r\n      newState.modules[action.data.targetModuleKey].name = action.data.newName;\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState;\r\n\r\n    case 'EDIT_MODULE_REMARKS':\r\n\r\n      newState.modules[action.data.targetModuleKey].remarks = action.data.newRemarks ? action.data.newRemarks.split(\"\\n\") : null;\r\n      if(newState.modules[action.data.targetModuleKey].remarks === null){\r\n        delete newState.modules[action.data.targetModuleKey].remarks;\r\n      }\r\n      saveHistory(newState);\r\n\r\n      return newState;\r\n\r\n    case 'CHANGE_STATE_TYPE':\r\n      let newType = action.data.newType.type.id;\r\n      // This line is weird because we need to add the new fields, overwrite any shared fields, then overwrite the type fields\r\n      // TODO figure out how to remove unused fields\r\n      newState.modules[action.data.targetModuleKey].states[action.data.targetNode.name] =\r\n        { ...getTemplate(`State.${newType}`),\r\n          ..._.pick(newState.modules[action.data.targetModuleKey].states[action.data.targetNode.name], ['direct_transition', 'conditional_transition', 'distributed_transition', 'complex_transition', 'table_transition', 'remarks']),\r\n          type: getTemplate(`State.${newType}`).type\r\n        };\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'LOAD_JSON':\r\n\r\n      newState.history = []\r\n      newState.historyIndex = 0;\r\n      saveHistory(newState);\r\n\r\n      return { ...newState, selectedModuleKey: action.data.selectedModuleKey, selectedStateKey: null, selectedStateTransition: null};\r\n\r\n    case 'CLOSE_MODULE':\r\n\r\n      delete newState.modules[action.data.selectedModuleKey];\r\n\r\n      newState.history = []\r\n      newState.historyIndex = 0;\r\n      saveHistory(newState);\r\n\r\n      return { ...newState};\r\n\r\n    case 'SHOW_LOAD_MODULE':\r\n      return { ...newState, loadModuleVisible: true};\r\n\r\n    case 'HIDE_LOAD_MODULE':\r\n      return { ...newState, loadModuleVisible: false};\r\n          \r\n    case 'SHOW_DOWNLOAD':\r\n      return { ...newState, downloadVisible: true};\r\n\r\n    case 'HIDE_DOWNLOAD':\r\n      return { ...newState, downloadVisible: false};\r\n\r\n    case 'CHANGE_MODULE_PANEL':\r\n      return { ...newState, selectedModulePanel: action.data.targetPanel, modulePanelVisible: action.data.targetPanel !== 'hide'};\r\n\r\n    case 'REFRESH_CODE_FLAG': \r\n      return {...newState, refreshCodeFlag: action.data.flag}\r\n\r\n    case 'UNDO':\r\n      if(newState.history.length > newState.historyIndex + 1){\r\n        newState.historyIndex++;\r\n        newState.modules = {...newState.modules}\r\n        newState.modules[newState.selectedModuleKey] = _.cloneDeep(newState.history[newState.historyIndex].module);\r\n        newState.selectedStateKey = newState.history[newState.historyIndex].selectedStateKey;\r\n        newState.selectedStateTransition = newState.history[newState.historyIndex].selectedStateTransition;\r\n      }\r\n      return {...newState}\r\n\r\n    case 'REDO':\r\n      if(newState.historyIndex > 0){\r\n        newState.historyIndex--;\r\n        newState.modules = {...newState.modules}\r\n        newState.modules[newState.selectedModuleKey] = _.cloneDeep(newState.history[newState.historyIndex].module);\r\n        newState.selectedStateKey = newState.history[newState.historyIndex].selectedStateKey;\r\n        newState.selectedStateTransition = newState.history[newState.historyIndex].selectedStateTransition;\r\n      }\r\n      return {...newState}\r\n\r\n    default:\r\n      return newState;\r\n\r\n  }\r\n}\r\n\r\n// updates the module in-place with fixed state refences\r\n// if newName is null, then delete all references instead\r\nconst fixStateReferences = (module, stateName, newName) => {\r\n\r\n  Object.keys(module.states).map(s => module.states[s]).forEach( state => {\r\n\r\n    if(state.direct_transition === stateName){\r\n      if(newName === null){\r\n        delete state.direct_transition\r\n      } else {\r\n        state.direct_transition = newName\r\n      }\r\n\r\n    } else if (state.distributed_transition){\r\n      state.distributed_transition.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n      })\r\n    } else if (state.table_transition){\r\n      state.table_transition.transitions.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n      })\r\n    }  else if (state.conditional_transition){\r\n      state.conditional_transition.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n        if(transition.condition){\r\n          if(transition.condition.condition_type === 'PriorState' && transition.condition.name === stateName){\r\n            if(newName === null){\r\n              delete transition.condition.name\r\n            } else {\r\n              transition.condition.name = newName\r\n            }\r\n          }\r\n        }\r\n      })\r\n    } else if (state.complex_transition){\r\n      state.complex_transition.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n        if(transition.condition){\r\n          if(transition.condition.condition_type === 'PriorState' && transition.condition.name === stateName){\r\n            if(newName === null) {\r\n              delete transition.condition.name\r\n            } else {\r\n              transition.condition.name = newName\r\n            }\r\n          }\r\n        }\r\n        if(transition.distributions){\r\n          transition.distributions.forEach( distribution => {\r\n            if(distribution.transition === stateName){\r\n              if(newName === null){\r\n                delete distribution.transition\r\n              } else {\r\n                distribution.transition = newName\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n    if(state.reason === stateName){\r\n      if(newName === null){\r\n        delete state.reason\r\n      } else {\r\n        state.reason = newName;\r\n      }\r\n    }\r\n    if(state.target_encounter === stateName){\r\n      if(newName === null){\r\n        state.target_encounter = \"\" // this is a requried field\r\n      } else {\r\n        state.target_encounter = newName;\r\n      }\r\n    }\r\n    if(state.condition_onset === stateName){\r\n      if(newName === null){\r\n        delete state.condition_onset\r\n      } else {\r\n        state.condition_onset = newName;\r\n      }\r\n    }\r\n    if(state.allergy_onset === stateName){\r\n      if(newName === null){\r\n        delete state.allergy_onset\r\n      } else {\r\n        state.allergy_onset = newName;\r\n      }\r\n    }\r\n    if(state.medication_order === stateName){\r\n      if(newName === null){\r\n        delete state.medication_order\r\n      } else {\r\n        state.medication_order = newName;\r\n      }\r\n    }\r\n    if(state.careplan === stateName){\r\n      if(newName === null){\r\n        delete state.careplan;\r\n      } else {\r\n        state.careplan = newName;\r\n      }\r\n    }\r\n    if(state.allow && state.allow.condition_type === 'PriorState' && state.allow.name === stateName){\r\n      if(newName === null){\r\n        delete state.allow.name\r\n      } else {\r\n        state.allow.name = newName;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nconst saveHistory = (state) => {\r\n  let selectedStateKey = state.selectedStateKey;\r\n  let selectedStateTransition = state.selectedStateTransition;\r\n\r\n  if(state.historyIndex > 0){\r\n    while(state.historyIndex > 0 && state.history.length > 0){\r\n      state.historyIndex--;\r\n      state.history.shift()\r\n    }\r\n\r\n    state.historyIndex = 0; // should always be 0 anyhow\r\n\r\n  }\r\n\r\n  state.history = [{selectedStateKey, selectedStateTransition, module: _.cloneDeep(state.modules[state.selectedModuleKey])}].concat(state.history);\r\n\r\n  state.history.splice(20) // only save the last 20 changes\r\n}\r\n\r\n// When nodes are cloned, loopback transitions point to node being cloned, instead of new copy\r\nconst renameLoopbackTransition = (state, newStateName, oldStateName) => {\r\n  if(state.direct_transition === oldStateName){\r\n    state.direct_transition = newStateName;\r\n  } else if (state.distributed_transition){\r\n    state.distributed_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n    })\r\n  } else if (state.table_transition){\r\n    state.table_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n    })\r\n  } else if (state.conditional_transition){\r\n    state.conditional_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n    })\r\n  } else if (state.complex_transition){\r\n    state.complex_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n      if(transition.distributions){\r\n        transition.distributions.forEach( distribution => {\r\n          if(distribution.transition === oldStateName){\r\n            distribution.transition = newStateName\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n","import _ from 'lodash'\r\nimport { getTemplate } from '../templates/Templates'\r\nimport Papa from 'papaparse'\r\nimport { isNumber } from 'util';\r\nimport { stat } from 'fs';\r\n\r\nconst initialState = {\r\n  libraryModuleCodes: {}, // list types of nodes\r\n  warnings: [],\r\n  libraryRelatedModules: {},\r\n  relatedModules: [],\r\n  attributes: []\r\n};\r\n\r\nconst attributes = module => {\r\n  const attributes = [];\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n    \r\n     if(state.type === 'SetAttribute'){\r\n       attributes.push({attribute: state.attribute, stateName: state.name, stateType: state.type});\r\n     } else if(state.assign_to_attribute){\r\n       attributes.push({attribute: state.assign_to_attribute, stateName: state.name, stateType: state.type});\r\n     }\r\n  });\r\n\r\n  return attributes.sort(function(a, b){\r\n    var x = a.attribute.toLowerCase();\r\n    var y = b.attribute.toLowerCase();\r\n    if (x < y) {return -1;}\r\n    if (x > y) {return 1;}\r\n    return 0;\r\n  })\r\n}\r\n\r\nconst templateCodes = {};\r\nObject.keys(getTemplate('Type').Code).map(c => getTemplate('Type').Code[c]).forEach(code => {\r\n  templateCodes[`${code.code}-${code.system}-${code.display}`] = true;\r\n});\r\n\r\nconst placeholderCodeWarnings = (module) => {\r\n  const warnings = [];\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n    state.codes && state.codes.forEach(code => {\r\n      if(templateCodes[`${code.code}-${code.system}-${code.display}`]){\r\n        warnings.push({stateName: stateName, message: 'Code uses an invalid template code: ' + code.system + '[' + code.code + ']'});\r\n      }\r\n    });\r\n\r\n    switch(state.type){\r\n      case 'MultiObservation':\r\n      case 'DiagnosticReport':\r\n        if(state.observations){\r\n          state.observations.forEach(o => {\r\n          o.codes && o.codes.forEach(code => {\r\n            if(templateCodes[`${code.code}-${code.system}-${code.display}`]){\r\n              warnings.push({stateName: stateName, message: 'Code in observation uses an invalid template code: ' + code.system + '[' + code.code + ']'});\r\n            }\r\n          })\r\n        })}\r\n\r\n        break; \r\n      case 'ImagingStudy':\r\n        if(state.procedure_code){\r\n            if(templateCodes[`${state.procedure_code.code}-${state.procedure_code.system}-${state.procedure_code.display}`]){\r\n              warnings.push({stateName: stateName, message: 'Code in procedure code uses an invalid template code: ' + state.procedure_code.system + '[' + state.procedure_code.code + ']'});\r\n            }\r\n        }\r\n        if(state.series ){\r\n          state.series.forEach(series => {\r\n            if(series.body_site){\r\n              if(templateCodes[`${series.body_site.code}-${series.body_site.system}-${series.body_site.display}`]){\r\n                warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + series.body_site.system + '[' + series.body_site.code + ']'});\r\n              }\r\n            }\r\n            if(series.modality){\r\n              if(templateCodes[`${series.modality.code}-${series.modality.system}-${series.modality.display}`]){\r\n                warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + series.modality.system + '[' + series.modality.code + ']'});\r\n              }\r\n            }\r\n            if(series.instances){\r\n              series.instances.forEach(instance => {\r\n                if(instance.sop_class){\r\n                  if(templateCodes[`${instance.sop_class.code}-${instance.sop_class.system}-${instance.sop_class.display}`]){\r\n                    warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + instance.sop_class.system + '[' + instance.sop_class.code + ']'});\r\n                  }\r\n                }\r\n              })\r\n            }\r\n\r\n          })\r\n\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n\r\n\r\n    }\r\n  })\r\n  return warnings;\r\n\r\n}\r\n\r\nconst tableTransitionWarnings = (module) => {\r\n  \r\n  const warnings = [];\r\n\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n\r\n    // find table transitions and check table data\r\n    if (state.table_transition !== undefined){\r\n      let message = '';\r\n      if(state.table_transition.lookup_table_name_ModuleBuilder === \"\"){\r\n        message = 'Invalid filename ';\r\n      }\r\n      if (state.table_transition.lookuptable === \"Enter table\" || tableHasError(state.table_transition.lookuptable) ) { \r\n        if (message === ''){ \r\n          message = 'Invalid data ';\r\n        } else {\r\n          message += 'and invalid data '\r\n        }\r\n      }\r\n      // check the last X columns vs X transitions\r\n      if (!tableHasError(state.table_transition.lookuptable)){\r\n        let tableColumns = [];\r\n        let data = parseLookupTable(state.table_transition.lookuptable);\r\n        if (data.length > 0){ \r\n          tableColumns = Object.keys(data[0]);\r\n        }\r\n\r\n        for (let i = 0; i < state.table_transition.transitions.length; i++)\r\n        {\r\n          let transition = state.table_transition.transitions[state.table_transition.transitions.length - i - 1].transition;\r\n          let column = tableColumns[tableColumns.length-i -1];\r\n          if (transition != column)\r\n          {\r\n            if (message === '')\r\n            {\r\n              message += 'Invalid columns (table data and transitions to state don\\'t match) '\r\n            } else {\r\n              message += ' and invalid columns (table data and transitions to states don\\'t match) '\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (message !== ''){\r\n        message += 'for table in ';\r\n        warnings.push({stateName, message: message + stateName + '. '});\r\n      }        \r\n    }\r\n  });\r\n\r\n  return warnings;\r\n}\r\n\r\nconst parseLookupTable = (data) => {\r\n  let parsed;\r\n  if (isNumber(data))\r\n  {\r\n    data  = data.toString();\r\n  }\r\n  Papa.parse(data, {\r\n  header: true,\r\n  complete: function(results) {\r\n    parsed=results;\r\n  }\r\n  });\r\n      \r\n  return parsed.data;\r\n}    \r\n\r\nconst tableHasError = (lookuptable) =>{    \r\n  let data = parseLookupTable(lookuptable);\r\n  let textOk = !(lookuptable == 'Enter table' || lookuptable == '')\r\n  let parseOk = (data.length > 0 && Object.keys(data[0]).length > 0)\r\n if (textOk && parseOk ){\r\n    return false;\r\n  } else {\r\n    return true;\r\n  } \r\n}\r\n\r\nconst stateCollisionWarnings = (module, globalCodes) => {\r\n  const equivalentStates = [\r\n   ['MedicationOrder', 'MedicationEnd'],\r\n   ['ConditionOnset', 'ConditionEnd'],\r\n   ['CarePlanStart', 'CarePlanEnd'],\r\n   ['AllergyOnset', 'AllergyEnd'],\r\n  ];\r\n\r\n  const isEquivalentStates = (first, second) => {\r\n    return (first === second || equivalentStates.filter(e => (e[0] === first && e[1] === second) || (e[0] === second && e[1] === first)).length > 0)\r\n  }\r\n\r\n  const checkCollision = libraryState =>  (local => !isEquivalentStates(local.state.type, libraryState.type) && local.state.type !== 'Death' && libraryState.type !== 'Death');\r\n\r\n  const warnings = [];\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n    state.codes && state.codes.forEach(code => {\r\n\r\n      if(globalCodes[code.code]){\r\n        let collisions = globalCodes[code.code].filter(checkCollision(state));\r\n        if(collisions.length > 0){\r\n          warnings.push({stateName, message: 'Code collision with state ' + collisions[0].stateName + ' in module ' + collisions[0].moduleKey + '. '});\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  return warnings;\r\n\r\n}\r\n\r\nconst orphanStateWarnings = (module) => {\r\n  const warnings = [];\r\n\r\n  const visitedStateCheck = Object.keys(module.states).reduce( (acc, value) => {acc[value] = false; return acc}, {})\r\n\r\n  const visitNext = [];\r\n\r\n  if(module.states['Initial']){\r\n    visitNext.push('Initial');\r\n  };\r\n\r\n  while(visitNext.length > 0){\r\n    let nextStateKey = visitNext.pop();\r\n    let nextState = module.states[nextStateKey];\r\n    visitedStateCheck[nextStateKey] = true;\r\n\r\n    if(nextState.direct_transition){\r\n      if(!module.states[nextState.direct_transition]){\r\n        warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + nextState.direct_transition});\r\n      } else {\r\n        if(!visitedStateCheck[nextState.direct_transition]){\r\n          visitNext.push(nextState.direct_transition);\r\n        }\r\n      }\r\n    } else if(nextState.distributed_transition){\r\n      nextState.distributed_transition.forEach(transition => {\r\n        if(!module.states[transition.transition]){\r\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n        } else {\r\n          if(!visitedStateCheck[transition.transition]){\r\n            visitNext.push(transition.transition);\r\n          }\r\n        }\r\n      });\r\n    } else if(nextState.table_transition){\r\n      nextState.table_transition.transitions.forEach(transition => {\r\n        if(!module.states[transition.transition]){\r\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n        } else {\r\n          if(!visitedStateCheck[transition.transition]){\r\n            visitNext.push(transition.transition);\r\n          }\r\n        }\r\n      });\r\n    } \r\n    else if(nextState.conditional_transition){\r\n      nextState.conditional_transition.forEach(transition => {\r\n        if(!module.states[transition.transition]){\r\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n        } else {\r\n          if(!visitedStateCheck[transition.transition]){\r\n            visitNext.push(transition.transition);\r\n          }\r\n        }\r\n      });\r\n    } else if (nextState.complex_transition){\r\n      nextState.complex_transition.forEach( transition => {\r\n        if(transition.transition){\r\n          if(!module.states[transition.transition]){\r\n            warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n          } else {\r\n            if(!visitedStateCheck[transition.transition]){\r\n              visitNext.push(transition.transition);\r\n            }\r\n          }\r\n        }\r\n        if(transition.distributions){\r\n          transition.distributions.forEach( distribution => {\r\n            if(!module.states[distribution.transition]){\r\n              warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + distribution.transition});\r\n            } else {\r\n              if(!visitedStateCheck[distribution.transition]){\r\n                visitNext.push(distribution.transition);\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  let notVisitedWarnings = Object.keys(visitedStateCheck).map(s => {return {state: s, visited: visitedStateCheck[s]}}).filter(v => !v.visited).map(v => {\r\n    return {\r\n      stateName: v.state,\r\n      message: 'State cannot be reached.'\r\n    };\r\n  });\r\n\r\n  return [...warnings, ...notVisitedWarnings];\r\n\r\n}\r\n\r\nconst libraryModuleCodes = (modules) => {\r\n    const libraryModuleCodes = {};\r\n\r\n    Object.keys(modules).forEach(moduleKey => {\r\n      const module = modules[moduleKey];\r\n      Object.keys(module.states).forEach(stateName => {\r\n        const moduleState = module.states[stateName];\r\n        moduleState.codes && moduleState.codes.forEach(code => {\r\n          if(!libraryModuleCodes[code.code]){\r\n            libraryModuleCodes[code.code] = []\r\n          }\r\n          libraryModuleCodes[code.code].push({...code, moduleKey, stateName, state: moduleState});\r\n        });\r\n      });\r\n    });\r\n    return libraryModuleCodes;\r\n}\r\n\r\nconst libraryRelatedModules = (modules) => {\r\n  const libraryRelatedModules = {};\r\n\r\n  Object.keys(modules).forEach(moduleKey => {\r\n    const module = modules[moduleKey];\r\n    Object.keys(module.states).forEach(stateName => {\r\n      const moduleState = module.states[stateName];\r\n      if(moduleState.type === 'CallSubmodule'){\r\n        libraryRelatedModules[moduleKey] = libraryRelatedModules[stateName] || []\r\n        libraryRelatedModules[moduleKey].push({type: 'submodule', moduleKey: moduleState.submodule, stateName})\r\n\r\n        libraryRelatedModules[moduleState.submodule] = libraryRelatedModules[moduleState.submodule] || []\r\n        libraryRelatedModules[moduleState.submodule].push({type: 'submodule', moduleKey, stateName})\r\n      }\r\n    });\r\n  });\r\n  return libraryRelatedModules;\r\n\r\n}\r\n\r\nconst relatedBySubmodule = (moduleKey, module, relatedMap) => {\r\n  let related = [];\r\n\r\n  if(relatedMap[moduleKey]){\r\n    related = _.cloneDeep(relatedMap[moduleKey]);\r\n  }\r\n  \r\n  Object.keys(module.states).forEach(stateName => {\r\n    const moduleState = module.states[stateName];\r\n     if(moduleState.type === 'CallSubmodule'){\r\n       related.push({type: 'submodule', module: moduleState.submodule, stateName});\r\n     }\r\n  });\r\n\r\n  return related;\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n  let newState = {...state};\r\n  switch (action.type) {\r\n    case 'ANALYZE':\r\n\r\n      newState.warnings = [...stateCollisionWarnings(action.data.module, newState.libraryModuleCodes),\r\n                           ...orphanStateWarnings(action.data.module),\r\n                           ...placeholderCodeWarnings(action.data.module),\r\n                           ...tableTransitionWarnings(action.data.module)];\r\n\r\n      newState.relatedModules = [...relatedBySubmodule(action.data.moduleKey, action.data.module, newState.libraryRelatedModules)];\r\n\r\n      newState.attributes = attributes(action.data.module);\r\n\r\n      return newState;\r\n\r\n    case 'LOAD_LIBRARY':\r\n\r\n      newState.libraryModuleCodes = libraryModuleCodes(action.data);\r\n      newState.libraryRelatedModules = libraryRelatedModules(action.data);\r\n\r\n      return newState\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createBrowserHistory } from 'history';\r\nimport { applyMiddleware, compose, createStore } from 'redux';\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport createRootReducer from './reducers';\r\n\r\nconst initialState = {}\r\nconst enhancers = [];\r\nconst middleware = [];\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  const devToolsExtension = window.devToolsExtension\r\n\r\n  if (typeof devToolsExtension === 'function') {\r\n    enhancers.push(devToolsExtension())\r\n  }\r\n}\r\n\r\nexport const history = createBrowserHistory({basename: '/module-builder'})\r\n\r\nconst createAppStore = (history) => {\r\n  middleware.push(routerMiddleware(history))\r\n  middleware.push(thunk)\r\n  const composedEnhancers = compose(\r\n    applyMiddleware(...middleware),\r\n    ...enhancers\r\n  )\r\n\r\n  const store = createStore(\r\n    createRootReducer(history), // root reducer with router state\r\n    initialState,\r\n    composedEnhancers\r\n  )\r\n  return store;\r\n}\r\n\r\nexport default createAppStore;\r\n","import { combineReducers } from 'redux';\r\nimport { connectRouter } from 'connected-react-router'\r\n\r\nimport library from './library';\r\nimport editor from './editor';\r\nimport analysis from './analysis';\r\n\r\nexport default (history) => combineReducers({\r\n  router : connectRouter(history),\r\n  library,\r\n  editor,\r\n  analysis\r\n});\r\n","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { RIEInput } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { Code as CodeType } from '../../types/Code';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype Props = {\r\n  code: CodeType,\r\n  system: string,\r\n  onChange: any\r\n}\r\n\r\nexport class Code extends Component<Props> {\r\n\r\n  render() {\r\n    let code = this.props.code;\r\n    let system = this.props.system;\r\n    return (\r\n      <div>\r\n        System: {system}\r\n        <br />\r\n        Code: <RIEInput className='editable-text' value={code.code} propName=\"code\" change={this.props.onChange('code')} />\r\n        <br />\r\n        Display: <RIEInput className='editable-text' value={code.display} propName=\"display\" change={this.props.onChange('display')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\ntype CodesProps = {\r\n  codes: CodeType[],\r\n  system: string,\r\n  onChange: any\r\n}\r\nexport class Codes extends Component<CodesProps> {\r\n  render() {\r\n\r\n    if(!this.props.codes){\r\n      return null;\r\n    }\r\n    let system = this.props.system;\r\n    let templates = {\r\n      \"SNOMED-CT\": getTemplate('Type.Code.Snomed'),\r\n      \"LOINC\": getTemplate('Type.Code.Loinc'),\r\n      \"RxNorm\": getTemplate('Type.Code.RxNorm'),\r\n      \"NUBC\": getTemplate('Type.Code.Nubc'),\r\n      \"DICOM-DCM\": getTemplate('Type.Code.DicomDCM'),\r\n      \"DICOM-SOP\": getTemplate('Type.Code.DicomSOP')\r\n    };\r\n    return (\r\n      <div>\r\n        {this.props.codes.map((code, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <Code onChange={this.props.onChange(i)} code={code} system={system}/>\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.codes.length}]`)({val: {id: _.cloneDeep(templates[system])}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIEInput } from 'riek';\r\n\r\ntype Props = {\r\n  label: string,\r\n  value: string,\r\n  onChange: any\r\n};\r\n\r\nexport class StringEditor extends Component<Props> {\r\n  render() {\r\n    let value = this.props.value;\r\n    return (\r\n      <div>\r\n        {this.props.label}: <RIEInput className='editable-text' value={value} propName=\"value\" change={this.props.onChange} />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\ntype StringsProps = {\r\n  label: string,\r\n  values: string[],\r\n  onChange: any\r\n};\r\nexport class StringsEditor extends Component<StringsProps> {\r\n  render() {\r\n    if(!this.props.values){\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.values.map((value, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <StringEditor onChange={this.props.onChange(i)} value={value} label={this.props.label} />\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.values.length}]`)({val: {id: \"text\"}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { Goal as GoalType } from '../../types/Attributes';\r\nimport { Codes } from './Code';\r\nimport { StringsEditor } from './String';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype Props = {\r\n  goal: GoalType,\r\n  onChange: any\r\n}\r\n\r\nexport class Goal extends Component<Props> {\r\n\r\n  render() {\r\n    let goal = this.props.goal;\r\n    return (\r\n      <div>\r\n        {this.renderObservation()}\r\n        {this.renderText()}\r\n        <div className='section'>\r\n          Addresses\r\n          <br />\r\n          <StringsEditor values={goal.addresses} label={\"Address\"} onChange={this.props.onChange('addresses')} />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderObservation() {\r\n    let goal = this.props.goal;\r\n    let options = [\r\n      {id: '==' , text: '==' },\r\n      {id: '!=' , text: '!=' },\r\n      {id: \"<\" , text: \"<\" },\r\n      {id: \"<=\" , text: \"<=\" },\r\n      {id: \">\" , text: \">\" },\r\n      {id: \">=\", text: \">=\"},\r\n      {id: \"is nil\", text: \"is nil\"},\r\n      {id: \"is not nil\", text: \"is not nil\"}\r\n    ];\r\n    if (!goal.observation) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('observation')({val: {id: getTemplate('Attribute.Observation')}})}>Add Observation</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let goalObservationValue = (\r\n        <div>\r\n          Goal Observation Value: <RIENumber className='editable-text' value={goal.observation.value} propName={'value'} change={this.props.onChange('observation.value')} />\r\n        </div>\r\n      );\r\n\r\n      if(goal.observation.operator === 'is nil' || goal.observation.operator === 'is not nil'){\r\n        goalObservationValue = <div/>\r\n      }\r\n      \r\n      return (\r\n        <div className='section'>\r\n          Observation\r\n          <br />\r\n          <div className='section'>\r\n            Codes\r\n            <br />\r\n            <Codes codes={goal.observation.codes} system={\"LOINC\"} onChange={this.props.onChange('observation.codes')} />\r\n            <br />\r\n          </div>\r\n          Goal Observation Operator: <RIESelect className='editable-text' value={{id: goal.observation.operator, text: goal.observation.operator}} propName={'operator'} change={this.props.onChange('observation.operator')} options={options} />\r\n          {goalObservationValue}\r\n          <br/>\r\n          <a className='editable-text' onClick={() => this.props.onChange('observation')({val: {id: null}})}>Remove Observation</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderText() {\r\n    let goal = this.props.goal;\r\n    if (!goal.text) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('text')({val: {id: \"text\"}})}>Add Text</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Goal Text: <RIEInput className='editable-text' value={goal.text} propName={'text'}  change={this.props.onChange('text')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('text')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\ntype GoalsProps = {\r\n  goals: GoalType[],\r\n  onChange: any\r\n}\r\nexport class Goals extends Component<GoalsProps> {\r\n  render() {\r\n\r\n    if(!this.props.goals){\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.goals.map((goal, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <Goal onChange={this.props.onChange(i)} goal={goal} />\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.goals.length}]`)({val: {id: getTemplate('Attribute.Goal')}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { RIEInput } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { Instance as InstanceType, Series as SeriesType } from '../../types/Attributes';\r\n\r\nimport { Code } from './Code';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype InstanceProps = {\r\n  title: string,\r\n  sop_class: CodeType,\r\n  onChange: any\r\n}\r\n\r\nexport class Instance extends Component<InstanceProps> {\r\n\r\n  render() {\r\n    let title = this.props.title;\r\n    let sop_class = this.props.sop_class;\r\n    return (\r\n      <div>\r\n        Title: <RIEInput className='editable-text' value={title} propName=\"title\" change={this.props.onChange('title')} />\r\n        <br />\r\n        <br />\r\n        <b>SOP Class:</b>\r\n        <br />\r\n        <Code code={sop_class} system={\"DICOM-SOP\"} onChange={this.props.onChange('sop_class')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\ntype InstanceListProps = {\r\n  instances: InstanceType[],\r\n  onChange: any\r\n}\r\n\r\nexport class InstanceList extends Component<InstanceListProps> {\r\n\r\n  render() {\r\n    if (!this.props.instances) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.instances.map((instance, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <Instance onChange={this.props.onChange(i)} title={instance.title} sop_class={instance.sop_class}/>\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.instances.length}]`)({val: {id: getTemplate('Attribute.ImagingStudy.Instance')}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\ntype SeriesProps = {\r\n  body_site: CodeType,\r\n  modality: CodeType,\r\n  instances: InstanceType[],\r\n  onChange: any\r\n}\r\n\r\nexport class Series extends Component<SeriesProps> {\r\n\r\n  render() {\r\n    let body_site = this.props.body_site;\r\n    let modality = this.props.modality;\r\n    let instances = this.props.instances;\r\n    return (\r\n      <div className='section'>\r\n        <b>Body Site:</b>\r\n        <br />\r\n        <Code code={body_site} system={\"SNOMED-CT\"} onChange={this.props.onChange('body_site')} />\r\n        <br/>\r\n        <b>Modality:</b>\r\n        <br />\r\n        <Code code={modality} system={\"DICOM-DCM\"} onChange={this.props.onChange('modality')} />\r\n        <br />\r\n        <b>Instances:</b>\r\n        <InstanceList instances={instances} onChange={this.props.onChange('instances')} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\ntype SeriesListProps = {\r\n  series: SeriesType[],\r\n  onChange: any\r\n}\r\n\r\nexport class SeriesList extends Component<SeriesListProps> {\r\n\r\n  render() {\r\n    if (!this.props.series) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.series.map((series, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n                <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n                <br />\r\n                <Series onChange={this.props.onChange(i)} body_site={series.body_site} modality={series.modality} instances={series.instances} />\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.series.length}]`)({val: {id: getTemplate('Attribute.ImagingStudy.Series')}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\r\nimport _ from 'lodash';\r\nimport type { Conditional, GenderConditional , AgeConditional , DateConditional , SocioeconomicStatusConditional , RaceConditional , SymptomConditional , ObservationConditional , VitalSignConditional , ActiveConditionConditional , ActiveMedicationConditional , ActiveCarePlanConditional , PriorStateConditional , AttributeConditional , AndConditional , OrConditional , AtLeastConditional , AtMostConditional , NotConditional } from '../../types/Conditional';\r\nimport type { State } from '../../types/State';\r\nimport { Codes } from './Code';\r\nimport { Code } from './Code';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype Props = {\r\n  conditional: Conditional,\r\n  options: State[],\r\n  onChange: any\r\n}\r\n\r\nconst unitOfTimeOptions = [\r\n  {id: 'years', text: 'years'},\r\n  {id: 'months', text: 'months'},\r\n  {id: 'weeks', text: 'weeks'},\r\n  {id: 'days', text: 'days'},\r\n  {id: 'hours', text: 'hours'},\r\n  {id: 'minutes', text: 'minutes'},\r\n  {id: 'seconds', text: 'seconds'}\r\n];\r\n\r\nconst unitOfAgeOptions = [\r\n  {id: 'years', text: 'years'},\r\n  {id: 'months', text: 'months'},\r\n  {id: 'weeks', text: 'weeks'},\r\n  {id: 'days', text: 'days'},\r\n  {id: 'hours', text: 'hours'},\r\n  {id: 'minutes', text: 'minutes'},\r\n  {id: 'seconds', text: 'seconds'}\r\n];\r\n\r\nclass ConditionalEditor extends Component<Props> {\r\n\r\n  renderConditionalType() {\r\n    switch (this.props.conditional.condition_type) {\r\n      case \"Gender\":\r\n        return <Gender {...this.props} />\r\n      case \"Age\":\r\n        return <Age {...this.props} />\r\n      case \"Date\":\r\n        return <Date {...this.props} />\r\n      case \"Socioeconomic Status\":\r\n        return <SocioeconomicStatus {...this.props} />\r\n      case \"Race\":\r\n        return <Race {...this.props} />\r\n      case \"Symptom\":\r\n        return <Symptom {...this.props} />\r\n      case \"Observation\":\r\n        return <Observation {...this.props} />\r\n      case \"Vital Sign\":\r\n        return <VitalSign {...this.props} />\r\n      case \"Active Condition\":\r\n        return <ActiveCondition {...this.props} />\r\n      case \"Active Medication\":\r\n        return <ActiveMedication {...this.props} />\r\n      case \"Active CarePlan\":\r\n        return <ActiveCarePlan {...this.props} />\r\n      case \"PriorState\":\r\n        return <PriorState {...this.props} />\r\n      case \"Attribute\":\r\n        return <Attribute {...this.props} />\r\n      case \"And\":\r\n        return <And {...this.props} />\r\n      case \"Or\":\r\n        return <Or {...this.props} />\r\n      case \"At Least\":\r\n        return <AtLeast {...this.props} />\r\n      case \"At Most\":\r\n        return <AtMost {...this.props} />\r\n      case \"Not\":\r\n        return <Not {...this.props} />\r\n      default:\r\n        return this.props.conditional.condition_type\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.conditional) {\r\n      return null;\r\n    }\r\n    let template = getTemplate('Type.Condition');\r\n    let options = Object.keys(template).sort().map((k) => {return {id: k, text: k}});\r\n    return (\r\n      <div>\r\n        Condition Type: <RIESelect className='editable-text' propName='condition' value={{id: this.props.conditional.condition_type, text: this.props.conditional.condition_type}} change={(val) => this.props.onChange({condition:{id: template[val.condition.id]}})} options={options} />\r\n        <br/>\r\n        {this.renderConditionalType()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Gender extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): GenderConditional);\r\n    return (\r\n      <label> Gender:\r\n        <RIESelect className='editable-text'\r\n          propName='gender'\r\n          value={{id: conditional.gender, text: conditional.gender}}\r\n          change={this.props.onChange('gender')}\r\n          options={[{id:'M', text: 'M'}, {id:'F', text: 'F'}]}\r\n        />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Age extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AgeConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n    return (\r\n      <label> Age:\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      <RIENumber className='editable-text' value={conditional.quantity} propName='quantity' change={this.props.onChange('quantity')} />\r\n      <RIESelect className='editable-text' value={{id: conditional.unit, text: conditional.unit}} propName=\"unit\" change={this.props.onChange('unit')} options={unitOfAgeOptions} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Date extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): DateConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n    return (\r\n      <label>\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      {this.renderType()}\r\n      {this.renderWarning()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderType() {\r\n    let conditional = ((this.props.conditional: any): DateConditional);\r\n    \r\n    if(conditional.month) {\r\n      let month = <RIENumber className='editable-text' value={conditional.month} propName='month' change={this.props.onChange('month')} />\r\n      return (\r\n        <div>\r\n          Month: \r\n          {month}\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Year</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('date.year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('date.month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date.day')({val: {id: getTemplate('Type.Date.Day')}}); this.props.onChange('date.hour')({val: {id: getTemplate('Type.Date.Hour')}}); this.props.onChange('date.minute')({val: {id: getTemplate('Type.Date.Minute')}}); this.props.onChange('date.second')({val: {id: getTemplate('Type.Date.Second')}}); this.props.onChange('date.millisecond')({val: {id: getTemplate('Type.Date.Millisecond')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('year')({val: {id: null}})}}>Change to Date</a>\r\n        </div>  \r\n      );\r\n    } else if (conditional.date) {\r\n      let yearInput = <RIENumber className='editable-text' value={conditional.date.year} propName='date.year' change={this.props.onChange('date.year')} />\r\n      let monthInput = <RIENumber className='editable-text' value={conditional.date.month} propName='date.month' change={this.props.onChange('date.month')} />\r\n      let dayInput = <RIENumber className='editable-text' value={conditional.date.day} propName='date.day' change={this.props.onChange('date.day')} />\r\n      let hourInput = <RIENumber className='editable-text' value={conditional.date.hour} propName='date.hour' change={this.props.onChange('date.hour')} />\r\n      let minuteInput = <RIENumber className='editable-text' value={conditional.date.minute} propName='date.minute' change={this.props.onChange('date.minute')} />\r\n      let secondInput = <RIENumber className='editable-text' value={conditional.date.second} propName='date.second' change={this.props.onChange('date.second')} />\r\n      let millisecondInput = <RIENumber className='editable-text' value={conditional.date.millisecond} propName='date.millisecond' change={this.props.onChange('date.millisecond')} />\r\n      \r\n      return (\r\n        <div>\r\n          Date:\r\n          <br />\r\n          {yearInput}/{monthInput}/{dayInput} {hourInput}:{minuteInput}:{secondInput}.{millisecondInput}\r\n          <br /> \r\n          (yyyy/MM/dd HH:mm:ss.SSS)\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Year</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date')({val: {id: null}}); this.props.onChange('year')({val: {id: null}})}}>Change to Month</a>\r\n        </div>  \r\n      );\r\n      \r\n    } else { //year\r\n      let year = <RIENumber className='editable-text' value={conditional.year} propName='year' change={this.props.onChange('year')} />\r\n      return (\r\n        <div>\r\n          Year: \r\n          {year}\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('year')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Month</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('date.year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('date.month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date.day')({val: {id: getTemplate('Type.Date.Day')}}); this.props.onChange('date.hour')({val: {id: getTemplate('Type.Date.Hour')}}); this.props.onChange('date.minute')({val: {id: getTemplate('Type.Date.Minute')}}); this.props.onChange('date.second')({val: {id: getTemplate('Type.Date.Second')}}); this.props.onChange('date.millisecond')({val: {id: getTemplate('Type.Date.Millisecond')}}); this.props.onChange('year')({val: {id: null}}); this.props.onChange('month')({val: {id: null}})}}>Change to Date</a>\r\n        </div>  \r\n      );\r\n    }\r\n  }\r\n\r\n  renderWarning(){\r\n    if (this.props.conditional.year < 1) {\r\n      return (\r\n        <label className='warning'>Invalid Year.</label>\r\n      );\r\n    } else if (this.props.conditional.month < 1 || this.props.conditional.month > 12) {\r\n      return (\r\n        <label className='warning'>Invalid Month. Must be between 1 and 12.</label>\r\n      );\r\n    } else if (this.props.conditional.date) {\r\n      if (this.props.conditional.date.year < 1) {\r\n        return (\r\n          <label className='warning'>Invalid Year</label>\r\n        );\r\n      } else if (this.props.conditional.date.month < 1 || this.props.conditional.date.month > 12) {\r\n        return (\r\n          <label className='warning'>Invalid Month. Must be between 1 and 12.</label>\r\n        );\r\n      } else if (this.props.conditional.date.day < 1 || this.props.conditional.date.day > 31) {\r\n        return (\r\n          <label className='warning'>Invalid Day. Must at least 1 and never greater than 31.</label>\r\n        );\r\n      } else if (this.props.conditional.date.hour < 0 || this.props.conditional.date.hour > 24) {\r\n        return (\r\n          <label className='warning'>Invalid Hour. Must be between 0 and 24.</label>\r\n        );\r\n      } else if (this.props.conditional.date.minute < 0 || this.props.conditional.date.minute > 60) {\r\n        return (\r\n          <label className='warning'>Invalid Minute. Must be between 0 and 60.</label>\r\n        );\r\n      } else if (this.props.conditional.date.second < 0 || this.props.conditional.date.second > 60) {\r\n        return (\r\n          <label className='warning'>Invalid Second. Must be between 0 and 60.</label>\r\n        );\r\n      } else if (this.props.conditional.date.millisecond < 0 || this.props.conditional.date.millisecond > 999) {\r\n        return (\r\n          <label className='warning'>Invalid Millisecond. Must be between 0 and 999.</label>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nclass SocioeconomicStatus extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): SocioeconomicStatusConditional);\r\n    let options = [\r\n      {id: 'Low', text: 'Low'},\r\n      {id: 'Middle', text: 'Middle'},\r\n      {id: 'High', text: 'High'}\r\n    ];\r\n    return (\r\n      <label> Socioeconomic Status:\r\n        <RIESelect className='editable-text' value={{id: conditional.category, text: conditional.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\r\n      </label>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nclass Race extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): RaceConditional);\r\n    let options = [\r\n      {id: \"White\", text: \"White\"},\r\n      {id: \"Native\", text: \"Native\"},\r\n      {id: \"Hispanic\", text: \"Hispanic\"},\r\n      {id: \"Black\", text: \"Black\"},\r\n      {id: \"Asian\", text: \"Asian\"},\r\n      {id: \"Other\", text: \"Other\"}\r\n    ];\r\n    return (\r\n      <label> Race:\r\n        <RIESelect className='editable-text' value={{id: conditional.race, text: conditional.race}} propName=\"race\" change={this.props.onChange('race')} options={options} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Symptom extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): SymptomConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n\r\n    return (\r\n      <label> Symptom:\r\n      <RIEInput className='editable-text' value={conditional.symptom} propName=\"symptom\" change={this.props.onChange('symptom')} />\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      <RIENumber className='editable-text' value={conditional.value} propName='value' change={this.props.onChange('value')} />\r\n\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Observation extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ObservationConditional);\r\n    let options = [];\r\n    if (conditional.value_code) {\r\n      options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\r\n    } else {\r\n      options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\r\n    }\r\n\r\n    return (\r\n      <label> Observation:\r\n        <Codes system={getTemplate('Type.Code.Loinc.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n        <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n        {this.renderValueOrCodeValue()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderValueOrCodeValue() { // renders numerical or code value\r\n    let conditional = ((this.props.conditional: any): ObservationConditional);\r\n    let value_code = <Code className='editable-text' system={getTemplate('Type.Code.Snomed.display')} code={conditional.value_code} onChange={this.props.onChange('value_code')} />\r\n    let value = conditional.value;\r\n    if(typeof value === 'boolean'){\r\n      value = String(value);\r\n    }\r\n    let valueInput = <RIEInput className='editable-text' value={value} propName='value' change={this.props.onChange('value')} />\r\n    if (conditional.operator !== 'is nil' && conditional.operator !== 'is not nil' && conditional.operator.id !== 'is nil' && conditional.operator.id !== 'is not nil'){\r\n      if (conditional.value_code) { \r\n        return (\r\n          <div>\r\n            Value Code:\r\n            <div className='section'>\r\n            {value_code}\r\n            </div>\r\n            <a className='editable-text' onClick={() => {this.props.onChange('value')({val: {id: \"0\"}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Numeric Value</a>\r\n          </div>\r\n        );  \r\n      } else { \r\n        return (\r\n          <div>\r\n            Value:\r\n            {valueInput}\r\n            <br />\r\n            <a className='editable-text' onClick={() => {this.props.onChange('value_code')({val: {id: getTemplate('Type.Code.Snomed')}}); this.props.onChange('value')({val: {id: null}})}}>Change to Value Code</a>\r\n            <br />\r\n          </div>\r\n        );\r\n      }  \r\n    } else {\r\n      return (\r\n        <div>\r\n          No value needed for '{conditional.operator}'\r\n        </div>\r\n      )\r\n    }\r\n  }  \r\n}\r\n\r\nclass VitalSign extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): VitalSignConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n\r\n    return (\r\n      <label> Vital Sign:\r\n      <RIEInput className='editable-text' value={conditional.vital_sign} propName=\"vital_sign\" change={this.props.onChange('vital_sign')} />\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      <RIENumber className='editable-text' value={conditional.value} propName='value' change={this.props.onChange('value')} />\r\n\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ActiveCondition extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ActiveConditionConditional);\r\n\r\n    return (\r\n      <label> Active Condition:\r\n        <Codes system={getTemplate('Type.Code.Snomed.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ActiveMedication extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ActiveMedicationConditional);\r\n    return (\r\n      <label> ActiveMedication:\r\n      <Codes system={getTemplate('Type.Code.RxNorm.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ActiveCarePlan extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ActiveCarePlanConditional);\r\n    return (\r\n      <label> ActiveCarePlan:\r\n      <Codes system={getTemplate('Type.Code.Snomed.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass PriorState extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n    let name = conditional.name;\r\n    return (\r\n      <label>\r\n        Prior State Name: <RIESelect className='editable-text' value={{id: name, text: name}} propName=\"name\" change={this.props.onChange('name')} options={options} />\r\n        <br />\r\n        {this.renderSince()}\r\n        <br />\r\n        {this.renderWithin()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderSince() {\r\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\r\n    if (conditional.since == null) {\r\n      return (\r\n        <label>\r\n          <a className='editable-text' onClick={() => this.props.onChange('since')({val: {id: getTemplate('Attribute.Since')}})}>Add Since</a>\r\n        </label>\r\n      );\r\n    } else {\r\n      let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n      let since = conditional.since;\r\n      return (\r\n        <label>\r\n          Prior State Since: <RIESelect className='editable-text' value={{id: since, text: since}} propName=\"since\" change={this.props.onChange('since')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('since')({val: {id: null}})}> (remove)</a>\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderWithin() {\r\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\r\n    if (conditional.within == null) {\r\n      return (\r\n        <label>\r\n          <a className='editable-text' onClick={() => this.props.onChange('within')({val: {id: getTemplate('Attribute.Within')}})}>Add Within</a>\r\n          <br />\r\n        </label>\r\n      );\r\n    } else {\r\n      return (\r\n        <label>\r\n          Prior State Within Quantity: <RIENumber className='editable-text' value={conditional.within.quantity} propName=\"quantity\" change={this.props.onChange('within.quantity')} />\r\n          <br />\r\n          Prior State Within Unit: <RIESelect className='editable-text' value={{id: conditional.within.unit, text: conditional.within.unit}} propName=\"unit\" change={this.props.onChange('within.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange('within')({val: {id: null}})}>Remove Within</a>\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Attribute extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AttributeConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\r\n\r\n    let val = conditional.value;\r\n    if(typeof val === 'boolean'){\r\n      val = String(val);\r\n    }\r\n\r\n    let valueInput = <div/>\r\n\r\n    // It appears that conditional is inconsistent, sometimes values are in ids\r\n    // This should be tracked down\r\n    if(conditional.operator !== 'is nil' && conditional.operator !== 'is not nil' && conditional.operator.id !== 'is nil' && conditional.operator.id !== 'is not nil'){ \r\n      valueInput = <RIEInput className='editable-text' value={val||0} propName='value' change={this.props.onChange('value')} />\r\n    }\r\n\r\n    return (\r\n      <label>\r\n        <RIEInput className='editable-text' value={conditional.attribute} propName=\"attribute\" change={this.props.onChange('attribute')} />\r\n        <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n        {valueInput}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass And extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AndConditional);\r\n    return (\r\n      <label> And:\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n            <div className=\"section\"  key={i}>\r\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n            </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Or extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): OrConditional);\r\n    return (\r\n      <label> Or:\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n              <div className=\"section\" key={i}>\r\n                <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n              </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass AtLeast extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AtLeastConditional);\r\n    return (\r\n      <label> At Least\r\n        <RIENumber className='editable-text' value={conditional.minimum||0} propName='minimum' change={this.props.onChange('minimum')} />:\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n            <div className=\"section\" key={i}>\r\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n            </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass AtMost extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AtMostConditional);\r\n    return (\r\n      <label> At Most\r\n        <RIENumber className='editable-text' value={conditional.maximum||0} propName='maximum' change={this.props.onChange('maximum')} />:\r\n\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n            <div className=\"section\" key={i}>\r\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n            </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Not extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): NotConditional);\r\n    return (\r\n      <label> Not:\r\n        <div className=\"section\">\r\n          <ConditionalEditor {...this.props} conditional={conditional.condition} onChange={this.props.onChange('condition')} />\r\n        </div>\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default ConditionalEditor;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect } from 'riek';\r\n\r\nimport type { DirectTransition } from '../../types/Transition';\r\nimport type { State } from '../../types/State';\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: DirectTransition,\r\n  onChange: any\r\n}\r\n\r\nclass DirectTransitionEditor extends Component<Props> {\r\n  render() {\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n\r\n    return (\r\n      <label>\r\n        Transition To:\r\n        <RIESelect className='editable-text' propName='to' value={{id:this.props.transition.to, text:this.props.transition.to}} change={this.props.onChange} options={options} />\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DirectTransitionEditor;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\r\nimport _ from 'lodash';\r\n\r\n\r\nimport type { DistributedTransition as DistributedTransitionType } from '../../types/Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport type { State } from '../../types/State';\r\nimport './Transition.css';\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: DistributedTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass DistributedTransition extends Component<Props> {\r\n  render() {\r\n    let currentValue = [];\r\n    if (this.props.transition) {\r\n      currentValue = this.props.transition.transition;\r\n    }\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n\r\n    return (\r\n      <label>\r\n        Distributed Transition:\r\n        {currentValue.map((t, i) => {\r\n          return <div key={i} className=\"transition-option\">\r\n            <label>To:\r\n              <RIESelect className='editable-text' propName='transition' value={{id:t.to, text:t.to}} change={this.props.onChange(`[${i}].transition`)} options={options} />\r\n            </label>\r\n            <br/>\r\n            {this.renderDistribution(t.distribution, i)}\r\n            <br/>\r\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n          </div>\r\n        })}\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Distributed[0]')}})}>+</a>\r\n        <br/>\r\n        {this.renderWarning()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderDistribution(distribution: mixed, index: number) {\r\n    let sum = this.props.transition.transition.reduce( (acc, val) => acc + (typeof val.distribution === 'object' ? val.distribution.default : val.distribution),0);\r\n    let remainder = 0;\r\n    if(typeof distribution === 'object') {\r\n      remainder = 1 - (sum - distribution.default);\r\n      let remainderOption = null\r\n      if (sum != 1) {\r\n        remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution.default`)({val: remainder})}>(Change to Remainder)</a>\r\n      }\r\n      return (\r\n        <label>\r\n          Attribute: <RIEInput className='editable-text' value={distribution.attribute} propName='attribute' change={this.props.onChange(`[${index}].distribution.attribute`)} />\r\n          <br />\r\n          Default Weight: <RIENumber className='editable-text' value={distribution.default} propName='default' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`[${index}].distribution.default`)} />\r\n          {remainderOption}\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: {id: getTemplate('Attribute.UnnamedDistribution')}})}>Change to Unnamed Distribution</a>\r\n        </label>\r\n      );\r\n    } else {\r\n      remainder = 1 - (sum - distribution);\r\n      let remainderOption = null\r\n      if (sum != 1) {\r\n        remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: remainder})}>(Change to Remainder)</a>\r\n      }\r\n      return (\r\n        <label> Weight:\r\n          <RIENumber className='editable-text' value={distribution} propName='distribution' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`[${index}].distribution`)} />\r\n          {remainderOption}\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: {id: getTemplate('Attribute.NamedDistribution')}})}>Change to Named Distribution</a>\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderWarning() {\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    let warn = (this.props.transition.transition.reduce((acc, val) => acc + (typeof val.distribution === 'object' ? val.distribution.default : val.distribution), 0) !== 1);\r\n    if (warn) {\r\n      return (\r\n        <label className='warning'>Weights do not add up to 100%.</label>\r\n      );\r\n    }\r\n  }\r\n\r\n  formatAsPercentage(num: number) {\r\n    return (num * 100) + \"%\";\r\n  }\r\n\r\n  checkInRange(num: number) {\r\n    return ((num >= 0) && (num <= 1));\r\n  }\r\n}\r\n\r\nexport default DistributedTransition;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { ConditionalTransition as ConditionalTransitionType } from '../../types/Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport ConditionalEditor from './Conditional';\r\nimport type { State } from '../../types/State';\r\nimport './Transition.css';\r\n\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: ConditionalTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass ConditionalTransition extends Component<Props> {\r\n\r\n  swapItems(indexTo,indexFrom) {\r\n    if(indexTo >= 0 && indexTo < this.props.transition.transition.length){\r\n\r\n      let oldEntry = {\r\n        transition: this.props.transition.transition[indexTo].to,\r\n        condition: _.clone(this.props.transition.transition[indexTo].condition)\r\n      };\r\n\r\n      let newEntry = {\r\n        transition: this.props.transition.transition[indexFrom].to,\r\n        condition: _.clone(this.props.transition.transition[indexFrom].condition)\r\n      }\r\n          \r\n      return () => {\r\n        this.props.onChange(indexTo)({val: {id: newEntry}});\r\n        this.props.onChange(indexFrom)({val: {id: oldEntry}});\r\n      }\r\n    }\r\n\r\n    return () => {};\r\n  }\r\n\r\n  renderUpDown(index: number) {\r\n  \r\n    if(this.props.transition && this.props.transition.transition){\r\n      if(index < this.props.transition.transition.length - 1 && index > 0){\r\n        return <span>\r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a> | \r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n          </span>\r\n      } else if(index < this.props.transition.transition.length - 1){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n      } else if(index > 0){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a>\r\n      }\r\n    }\r\n  }\r\n  renderIf(index, isLast){\r\n    if(!this.props.transition.transition[index].condition && isLast && index !== 0){\r\n      return <span>\r\n                Else: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n    } else if(!this.props.transition.transition[index].condition){\r\n      return <span>\r\n                <a className=\"editable-text delete-button editable-error\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        Add Condition\r\n                      </a>\r\n            </span>\r\n    } else if(index === 0 && !this.props.transition.transition[index].condition){\r\n      return <span>\r\n                If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n\r\n    } else if(index === 0){\r\n      return <span>If:</span>\r\n\r\n    } else if(!isLast){\r\n      return <span>\r\n              Else If:\r\n            </span>\r\n\r\n    }else{\r\n      return <span>\r\n            Else If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: null}})}}>\r\n                (remove condition)\r\n              </a>\r\n            </span>\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let currentValue = [];\r\n    if (this.props.transition) {\r\n      currentValue = this.props.transition.transition;\r\n    }\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <label>\r\n        Conditional Transition To:\r\n        {currentValue.map((t, i) => {\r\n          let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n          return <div key={i} className='transition-option'>\r\n            <label>\r\n              {this.renderIf(i, i === currentValue.length-1)} \r\n              <ConditionalEditor {...this.props} conditional={t.condition} onChange={this.props.onChange(`${i}.condition`)}/>\r\n            </label>\r\n            <br/>\r\n            <label>\r\n              Transition To: <RIESelect className='editable-text' propName='to' value={{id:t.to, text:t.to}} change={this.props.onChange(`${i}.transition`)} options={options} />\r\n            </label>\r\n            <br/>\r\n            {this.renderUpDown(i)}\r\n            <br/>\r\n            <a className=\"editable-text delete-button\" onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n\r\n          </div>\r\n        })}\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Conditional[0]')}})}>+</a>\r\n\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ConditionalTransition;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { ConditionalTransition as ConditionalTransitionType } from '../../types/Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport ConditionalEditor from './Conditional';\r\nimport DistributedTransitionEditor from './DistributedTransition';\r\nimport DirectTransitionEditor from './DirectTransition';\r\nimport type { State } from '../../types/State';\r\n\r\nimport './Transition.css';\r\n\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: ConditionalTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass ComplexTransition extends Component<Props> {\r\n\r\n  swapItems(indexTo,indexFrom) {\r\n    if(indexTo >= 0 && indexTo < this.props.transition.transition.length){\r\n      let oldEntry = {};\r\n      let newEntry = {};\r\n\r\n      if(this.props.transition.transition[indexTo].condition){\r\n        oldEntry.condition = _.clone(this.props.transition.transition[indexTo].condition)\r\n      }\r\n      if(this.props.transition.transition[indexTo].distributions){\r\n        oldEntry.distributions = _.clone(this.props.transition.transition[indexTo].distributions.map((d) => ({distribution: d.distribution, transition: d.to})))\r\n      }\r\n      if(this.props.transition.transition[indexTo].transition.to){\r\n        oldEntry.transition = this.props.transition.transition[indexTo].transition.to\r\n      }\r\n\r\n      if(this.props.transition.transition[indexFrom].condition){\r\n        newEntry.condition = _.clone(this.props.transition.transition[indexFrom].condition)\r\n      }\r\n      if(this.props.transition.transition[indexFrom].distributions){\r\n        newEntry.distributions = _.clone(this.props.transition.transition[indexFrom].distributions.map((d) => ({distribution: d.distribution, transition: d.to})))\r\n      }\r\n      if(this.props.transition.transition[indexFrom].transition.to){\r\n        newEntry.transition = this.props.transition.transition[indexFrom].transition.to\r\n      }\r\n\r\n      return () => {\r\n        this.props.onChange(indexTo)({val: {id: newEntry}});\r\n        this.props.onChange(indexFrom)({val: {id: oldEntry}});\r\n      }\r\n    }\r\n\r\n    return () => {};\r\n  }\r\n\r\n  renderUpDown(index: number) {\r\n  \r\n    if(this.props.transition && this.props.transition.transition){\r\n      if(index < this.props.transition.transition.length - 1 && index > 0){\r\n        return <span>\r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a> | \r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n          </span>\r\n      } else if(index < this.props.transition.transition.length - 1){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n      } else if(index > 0){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a>\r\n      }\r\n    }\r\n  }\r\n\r\n  renderIf(index, isLast){\r\n    if(!this.props.transition.transition[index].condition && isLast && index !==0){\r\n      return <span>\r\n                Else: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n    } else if(!this.props.transition.transition[index].condition){\r\n      return <span>\r\n                <a className=\"editable-text delete-button editable-error\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        Add Condition\r\n                      </a>\r\n            </span>\r\n    } else if(index === 0 && !this.props.transition.transition[index].condition){\r\n      return <span>\r\n                If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n\r\n    } else if(index === 0){\r\n      return <span>If:</span>\r\n\r\n    } else if(!isLast){\r\n      return <span>\r\n              Else If:\r\n            </span>\r\n\r\n    }else{\r\n      return <span>\r\n            Else If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: null}})}}>\r\n                (remove condition)\r\n              </a>\r\n            </span>\r\n    }\r\n  }\r\n\r\n  renderTransition(t, i, isLast){\r\n\r\n    let transitionEditor = null;\r\n\r\n    if(t.transition.to !== undefined){\r\n      const newDistributedTransition = {...t, distributions: [{distribution: 1, transition: t.transition.to}]};\r\n      delete newDistributedTransition.transition;\r\n      transitionEditor = <div>\r\n                           <DirectTransitionEditor \r\n                             transition={t.transition}\r\n                             options={this.props.options} \r\n                             onChange={this.props.onChange(`[${i}].transition`)} />\r\n                           <br/>\r\n                           <a className=\"editable-text delete-button\" \r\n                              onClick={()=>{this.props.onChange(`[${i}]`)({val: {id: newDistributedTransition}})}}>Change to Distributed Transition</a>\r\n                          </div>\r\n    } else {\r\n      let nextTransition = 'Initial';\r\n      if(t.distributions.length > 0){\r\n        nextTransition = t.distributions[0].to\r\n      }\r\n\r\n      const newDirectTransition = {...t, distributions: [], transition: nextTransition};\r\n\r\n      transitionEditor = <div>\r\n                          <DistributedTransitionEditor \r\n                             transition={{transition: t.distributions}} \r\n                             options={this.props.options} \r\n                             onChange={this.props.onChange(`[${i}].distributions`)} />\r\n                           <br/>\r\n                           <a className=\"editable-text delete-button\" \r\n                              onClick={()=>{this.props.onChange(`[${i}]`)({val: {id: newDirectTransition}})}}>Change to Direct Transition</a>\r\n                          </div>\r\n    }\r\n\r\n    return <div className='transition-option' key={i}>\r\n            <label>\r\n            {this.renderIf(i, isLast)} <ConditionalEditor {...this.props} conditional={t.condition} onChange={this.props.onChange(`${i}.condition`)}/>\r\n            </label>\r\n            <br/>\r\n            <label>\r\n            {transitionEditor}\r\n            </label>\r\n            <br/>\r\n            {this.renderUpDown(i)}\r\n            <br/>\r\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n          </div>\r\n  }\r\n\r\n  render() {\r\n    let currentValue = [];\r\n    if (this.props.transition) {\r\n      currentValue = this.props.transition.transition;\r\n    }\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    const states = this.props.options;\r\n    const options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n\r\n    return (\r\n      <label>\r\n        Complex Transition:\r\n\r\n        {currentValue.map((t, i) => {\r\n          return this.renderTransition(t, i, i === currentValue.length-1);\r\n        })}\r\n\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Complex[0]')}})}>+</a>\r\n\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ComplexTransition;\r\n","import React from \"react\";\r\nimport ReactDataGrid from \"react-data-grid\";\r\n    \r\n    function Table({columnHeaders, rows }) {\r\n        const columns = [];\r\n        \r\n        columnHeaders.forEach(function(item){\r\n            let str = item.replace(/\\s/g, '')\r\n            let a = {                    \r\n                key: str,\r\n                name: str,\r\n                width: 180,\r\n            }\r\n            columns.push(a);\r\n        })   \r\n        \r\n        return (\r\n        <ReactDataGrid \r\n            columns={columns}\r\n            rowGetter={i => rows[i]}\r\n            rowsCount={rows.length}\r\n            minHeight={300}\r\n            />\r\n        );\r\n    }\r\n\r\nexport default Table;","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber, RIETextArea } from 'riek';\r\nimport Papa from 'papaparse'\r\n\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport './Transition.css';\r\nimport Table from './Table'\r\nimport './TableTransition.css';\r\nimport { isNumber } from 'util';\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: TableTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass TableTransition extends Component<Props> {\r\n\r\n  render() {\r\n    let currentValue = [];\r\n    let lookupTableName;\r\n    if (this.props.transition) {\r\n      this.fixMissingValues();\r\n      currentValue = this.props.transition.transition;\r\n      lookupTableName = this.props.transition.lookup_table_name_ModuleBuilder;\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n    let buttonText;\r\n    let displayTable;\r\n    let displayTableError;\r\n    \r\n    if (this.props.transition.viewTable && !this.doesDataHaveInputError()){\r\n      buttonText = 'Display Editable Text Area';\r\n      let data = this.parseTextArea(this.props.transition.lookuptable);\r\n      displayTable = \r\n        <div className=\"TableTransition-table\">\r\n          <Table columnHeaders={Object.keys(data[0])} rows={data} />\r\n        </div>\r\n    }else{\r\n      buttonText = 'Display Read Only Table';\r\n      if (this.props.transition.lookuptable === ''){\r\n        this.props.onChange(`lookuptable`)({val: 'Enter table'});\r\n      }else if (isNumber(this.props.transition.lookuptable)){\r\n        this.props.transition.lookuptable = this.props.transition.lookuptable.toString();\r\n      }\r\n      displayTable = \r\n        <div className='TableTransition-remarks'>\r\n          <RIETextArea value={this.props.transition.lookuptable} propName='lookuptable' change={this.props.onChange(`lookuptable`)}/>\r\n        </div>\r\n    }\r\n    if (this.doesDataHaveInputError()){\r\n      displayTableError= <label className='warning'>Invalid table data. The table must have a header row and be separated by commas.</label>\r\n    }else {\r\n      let msg = this.checkTable();\r\n      displayTableError = <label className='warning'>{msg}</label>\r\n    }\r\n\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n    return (\r\n      <div>\r\n      <label>\r\n        Table Transition:\r\n        {\r\n          currentValue.map((t, i) => {\r\n          return <div key={i} className=\"transition-option\">\r\n            <label>To:\r\n              <RIESelect className='editable-text' propName='transition' value={{id:t.transition, text:t.transition}} change={this.props.onChange(`transitions[${i}].transition`)} options={options} />\r\n            </label>\r\n            <br/>\r\n            {this.renderDistribution(t.default_probability, i)}\r\n            <br />\r\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`transitions.[${i}]`)({val: {id: null}})}>remove</a>\r\n          </div>\r\n        })}\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`transitions[${currentValue.length}]`)({val: {id: getTemplate('Transition.Table.transitions[0]')}})}>+</a>\r\n        <br/>\r\n        {this.renderWarning()}\r\n        <br/>\r\n        </label>\r\n        <div>\r\n          <label>Lookup Table: \r\n            <RIEInput className='editable-text' value={lookupTableName} propName='lookup_table_name_ModuleBuilder' change={this.props.onChange(`lookup_table_name_ModuleBuilder`)} />\r\n          </label>\r\n          <br/>\r\n          {displayTableError}\r\n          <br/>\r\n         <button onClick={() => this.displayTableView()}>{buttonText}</button>\r\n        <br/> \r\n        {displayTable}\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDistribution(distribution: mixed, index: number) {    \r\n    let sum = this.props.transition.transition.reduce( (acc, val) => acc + val.default_probability, 0);\r\n    let remainder = 1 - (sum - distribution);\r\n    let remainderOption = null\r\n    if (sum !== 1) {\r\n      remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`transitions[${index}].default_probability`)({val: remainder})}>(Change to Remainder)</a>\r\n    }\r\n    return (\r\n      <label> Default Weight:\r\n        <RIENumber className='editable-text' value={distribution} propName='default_probability' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`transitions[${index}].default_probability`)} />\r\n        {remainderOption}\r\n        </label>\r\n    );\r\n  }\r\n\r\n  renderWarning() {\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    let warn = (this.props.transition.transition.reduce((acc, val) => acc + (typeof val.default_probability === 'object' ? val.default_probability.default : val.default_probability), 0) !== 1);\r\n    if (warn) {\r\n      return (\r\n        <label className='warning'>Weights do not add up to 100%.</label>\r\n      );\r\n    }\r\n  }\r\n\r\n  formatAsPercentage(num: number) {\r\n    return (num * 100) + \"%\";\r\n  }\r\n\r\n  checkInRange(num: number) {\r\n    return ((num >= 0) && (num <= 1));\r\n  }\r\n\r\n  parseTextArea(data) {\r\n    let parsed;\r\n    if (isNumber(data))\r\n    {\r\n      data  = data.toString();\r\n    }\r\n    Papa.parse(data, {\r\n    header: true,\r\n    complete: function(results) {\r\n      parsed=results;\r\n    }\r\n    });\r\n\r\n    return parsed.data;\r\n  }    \r\n\r\n  displayTableView() {        \r\n    // need to check if the table is correct and that it will be ok being displayed as a table before changing this to true\r\n    // otherwise the undo take an extra click\r\n    if (!this.doesDataHaveInputError())\r\n    {\r\n      this.props.onChange('viewTable')({val: !this.props.transition.viewTable})\r\n    }\r\n  }\r\n\r\n  fixMissingValues(){\r\n    if (this.props.transition.lookuptable === undefined)\r\n    {\r\n      this.props.transition.lookuptable = '';\r\n    }\r\n    if (this.props.transition.viewTable === undefined)\r\n    {\r\n      this.props.transition.viewTable = false;\r\n    }\r\n    if (this.props.transition.lookup_table_name_ModuleBuilder === undefined)\r\n    {\r\n      if (this.props.transition.transition[0].lookup_table_name !== ''){\r\n        this.props.transition.lookup_table_name_ModuleBuilder = this.props.transition.transition[0].lookup_table_name;\r\n      }else{\r\n        this.props.transition.lookup_table_name_ModuleBuilder = '';\r\n      }\r\n    }\r\n  }\r\n\r\n  doesDataHaveInputError(){    \r\n    let data = this.parseTextArea(this.props.transition.lookuptable);\r\n    let textOk = !(this.props.transition.lookuptable === 'Enter table' || this.props.transition.lookuptable === '')\r\n    let parseOk = (data.length > 0 && Object.keys(data[0]).length > 0)\r\n    if (textOk && parseOk ){\r\n        return false;\r\n      } else {\r\n        return true;\r\n      } \r\n  }\r\n\r\n  checkTable(){\r\n    let message = ''\r\n    // check the last X columns vs X transitions\r\n    if (this.doesDataHaveInputError()){\r\n      return message;\r\n    }\r\n    let tableColumns = [];\r\n    let data = this.parseTextArea(this.props.transition.lookuptable);\r\n    if (data.length > 0){ \r\n      tableColumns = Object.keys(data[0]);\r\n    }\r\n\r\n    for (let i = 0; i < this.props.transition.transition.length; i++)\r\n    {\r\n      let transition = this.props.transition.transition[this.props.transition.transition.length - i - 1].transition;\r\n      let column = tableColumns[tableColumns.length-i -1];\r\n      if (transition !== column)\r\n      {\r\n        message += 'Invalid columns (table data and transitions to state don\\'t match) '\r\n        break;\r\n      }\r\n    }\r\n\r\n    return message;    \r\n  }\r\n}\r\n\r\nexport default TableTransition;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport type { Transition as TransitionType } from '../../types/Transition';\r\nimport type { State } from '../../types/State';\r\nimport DirectTransition from './DirectTransition';\r\nimport DistributedTransition from './DistributedTransition';\r\nimport ConditionalTransition from './ConditionalTransition';\r\nimport ComplexTransition from './ComplexTransition';\r\nimport TableTransition from './TableTransition';\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: Transition,\r\n  onChange: any\r\n}\r\n\r\nclass Transition extends Component<Props> {\r\n  render() {\r\n    if(this.props.transition){\r\n      switch (this.props.transition.type) {\r\n        case \"Direct\":\r\n          return <DirectTransition {...this.props} onChange={this.props.onChange('direct_transition')} />\r\n        case \"Distributed\":\r\n          return <DistributedTransition {...this.props} onChange={this.props.onChange('distributed_transition')} />\r\n        case \"Conditional\":\r\n          return <ConditionalTransition {...this.props} onChange={this.props.onChange('conditional_transition')} />\r\n        case \"Complex\":\r\n          return <ComplexTransition {...this.props} onChange={this.props.onChange('complex_transition')} />\r\n        case \"Table\":\r\n          return <TableTransition {...this.props} onChange={this.props.onChange('table_transition')} />\r\n        case \"None\":\r\n          return <div> No transition </div>\r\n        default:\r\n          return <div> {this.props.transition.type} Transition is not supported at this time </div>\r\n      }\r\n    }\r\n    return <div> No Transition </div>\r\n  }\r\n}\r\n\r\nexport default Transition;\r\n","export const BasicTutorial = [\r\n  {title: \"Create Module\", selector: \".Editor-top-open :nth-child(1)\", text: \"Create a new module\"},\r\n  {title: \"Open Module\", selector: \".Editor-top-open :nth-child(2)\", text: \"Open a module by selecting Open Module\"},\r\n  {title: \"Download Module\", selector: \".Editor-top-open :nth-child(3)\", text: \"Download module by selecting Download\"},\r\n  {title: \"Edit Node\", selector: \"#node_Initial\", text: \"To edit a node you can click on it in the graph\"},\r\n  {title: \"Module Remarks\", selector: \".ModuleProperties-remarks\", text: \"This is a place to put any remarks or citations for this module.\"},\r\n  {title: \"Adding a State\", selector: \".navbar-nav :nth-child(4)\", text: \"This will add a new state to the module, it can then be edited like any other state.\"},\r\n  {title: \"Adding a Structure\", selector: \".navbar-nav :nth-child(5)\", text: \"We have a few commonly used structures, this will allow you to add them to your module. This feature is not yet available.\"},\r\n]\r\n\r\nexport const EditTutorial = [\r\n  {title: \"Change State Name\", selector: \".State h3\", text: \"This text is editable, you can change the name of this state here.\"},\r\n  {title: \"Change State Type\", selector: \".State :nth-child(2)\", text: \"You can change the type of this state here, you can find a listing of state types at <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-States' target='_blank'> the wiki </a>.\"},\r\n  {title: \"State Editor\", selector: \".State-Editor\", text: \"Here is a context aware editor, depending on what your state has it will list the various attributes.\"},\r\n  {title: \"Delete State\", selector: \"div.State > a.delete-button\", text: \"This will remove the currently selected state from the editor.\"},\r\n  {title: \"Transition Type\", selector: \".Transition-Type\", text: \"You can change the type of the transition the module has here, <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-Transitions' target='_blank'> here </a> is a list of transition types.\"},\r\n\r\n\r\n]\r\n","import React from 'react'\r\nimport './AutoCompleteText.css'\r\n\r\nexport default class AutoCompleteText extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.state = {\r\n            suggestions: [],\r\n            text: this.props.text\r\n        }\r\n    }\r\n\r\n    suggestionSelected (value) {\r\n        this.props.onChange(value); \r\n        this.setState(() => ({\r\n            suggestions: [],\r\n        }));\r\n    }\r\n\r\n    renderSuggestions () {\r\n        const { suggestions } = this.state;\r\n        return (\r\n            <ul>\r\n                {suggestions.map((item, i) => <li key={i} onClick={() => this.suggestionSelected(item)}>{item}</li>)}\r\n            </ul>)\r\n    }\r\n\r\n    onFocusGained = (e) => {\r\n        let value =  e.target.value;\r\n        const { items } = this.props;\r\n        let suggestions = []\r\n        if (!value.match(/^[a-z0-9'-_() ]*$/i) || value.indexOf('\\\\') !== -1 || value.indexOf('*') === 0)\r\n        {\r\n            suggestions = ['Invalid Input'];\r\n        }\r\n        else \r\n        {\r\n            const regex = new RegExp (`^${value}`, 'i');\r\n            suggestions = items.sort().filter(v => regex.test(v));\r\n        }\r\n        \r\n        this.setState (() => ({suggestions, text: value}));    \r\n    }\r\n\r\n    onSubmitted = (props) => {\r\n        const timer = setTimeout(() => {\r\n            let suggestions = [];\r\n            this.setState (() => ({suggestions}))\r\n            this.props.onBlur(props); \r\n          }, 250);\r\n          return () => clearTimeout(timer);\r\n        \r\n    }\r\n\r\n    handleChange(event) {\r\n        const text = event.target.value;\r\n        this.props.onChange(text); \r\n        const { items } = this.props;\r\n        let suggestions = [];\r\n\r\n            if (text.match(/^[a-z0-9'-_() ]*$/i) && text.indexOf('\\\\') === -1 && text.indexOf('*') !== 0)\r\n            {\r\n                const regex = new RegExp (`^${text.toString()}`, 'i');\r\n                suggestions = items.sort().filter(v => regex.test(v));\r\n            }\r\n            else\r\n            {\r\n                suggestions = ['Invalid Input'];\r\n            }\r\n            \r\n            this.setState (() => ({suggestions, text: text}));\r\n      }\r\n\r\n      keyPressed = (event) => {\r\n        if (event.key === \"Enter\" ) {\r\n            this.onSubmitted(true);\r\n        }\r\n        if (event.key === \"Escape\") {\r\n            this.onSubmitted(false);\r\n        }\r\n      } \r\n\r\n    render () {\r\n        return (\r\n            <div className=\"AutoCompleteText\" onBlur={this.onSubmitted} >\r\n                <input value={this.props.text} onChange={this.handleChange} onFocus={this.onFocusGained} onKeyDown={this.keyPressed}  type=\"text\" />\r\n                {this.renderSuggestions()}\r\n            </div>\r\n        )\r\n    }\r\n}","export default `3decho\r\nAGE\r\nAGE_MONTHS\r\nAlzheimer\\'s Medication\r\nBMI\r\nBreast Cancer\r\nCF_Complication\r\nCystic_Fibrosis\r\nDALY\r\nER_PR_medication\r\nER_medication\r\nEarly menopause due to treatment\r\nG155D Mutation\r\nGlucose\r\nHER2_medication\r\nLung Cancer\r\nLung Cancer Condition\r\nLung Cancer Type\r\nMDD care plan\r\nMemory Loss\r\nMucus\r\nOTC_Bronchitis_Med\r\nQALY\r\nQOLS\r\nRH_NEG\r\nSSRI\r\nSinusitis Condition\r\nSore Throat Antibiotic\r\nSore Throat Condition\r\nSuspected Lung Cancer\r\nSystolic Blood Pressure\r\nTriglycerides\r\nType of Alzheimer\\'s\r\nUnusual Vaginal Bleeding\r\nactive_emergency_encounter\r\nactive_urgent_care_encounter\r\nactive_wellness_encounter\r\naddress\r\nadhd_medication\r\nadherence\r\nadherence probability\r\nadv_drug\r\nalcoholic\r\nalcoholism\r\nallergic_rhinitis\r\nanemia\r\nanemia_medication\r\nanemia_pregnancy\r\nantibiotic_prescription\r\narthritis_careplan\r\nassessment_done\r\nasthma_careplan\r\nasthma_condition\r\nasthma_type\r\natopic\r\natrial_fibrillation\r\natrial_fibrillation_risk\r\nbirth_city\r\nbirth_country\r\nbirth_state\r\nbirth_type\r\nbirthdate\r\nbirthplace\r\nblindness\r\nblood_pressure_controlled\r\nbmi_percentile\r\nbreast_cancer_ER\r\nbreast_cancer_HER2\r\nbreast_cancer_Location\r\nbreast_cancer_M\r\nbreast_cancer_N\r\nbreast_cancer_PR\r\nbreast_cancer_T\r\nbreast_cancer_aromatase_inhibitors\r\nbreast_cancer_chemoCount\r\nbreast_cancer_condition\r\nbreast_cancer_init_followup_counter\r\nbreast_cancer_neoCount\r\nbreast_cancer_neoMed\r\nbreast_cancer_survival\r\nbreast_cancer_tamoxifen\r\nbreast_cancer_treat_count\r\nbreast_cancer_triple_negative\r\nbreast_cancer_years_after_treatment\r\nbroken_bone\r\nbronchitis_careplan\r\nburn_injury\r\ncardio_risk\r\ncardiovascular_disease_med_changes\r\ncardiovascular_procedures\r\ncause_of_death\r\nchemoMed\r\nchemotherapy1\r\nchemotherapy2\r\nchf\r\nckd\r\ncolorectal_adenoma\r\ncolorectal_cancer\r\ncolorectal_cancer_stage\r\nconcussion_injury\r\ncontraceptive\r\ncontraceptive_type\r\ncopd_variant\r\ncoronary_heart_disease\r\ncr_chemo_count\r\ncurrent_weight_length_percentile\r\ndermatitis\r\ndiabetes\r\ndiabetes_amputation_necessary\r\ndiabetes_severity\r\ndiabetes_stage\r\ndiabetic_eye_damage\r\ndiabetic_nerve_damage\r\ndialysis_reason\r\neducation_level\r\nend_stage_renal_disease\r\nethnicity\r\nfatal_pregnancy_complication\r\nfibromyalgia_careplan\r\nfibromyalgia_prescription\r\nfirst_language\r\nfirst_name\r\nfood_allergy\r\nfood_allergy_careplan\r\ngender\r\ngout_careplan\r\ngout_nsaid\r\ngunshot_wound\r\nhomeless\r\nhomelessness_category\r\nhyperglycemia\r\nhyperlipidemia\r\nhypertension\r\nhypertension_dx\r\nhypertension_medication\r\nhypertension_medication_2\r\nhypertension_medication_3\r\nhypertriglyceridemia\r\nhypothyroidism\r\nid\r\nidentifier_drivers\r\nidentifier_passport\r\nidentifier_ssn\r\nimmunizations\r\nimmunotherapy_counter\r\nimmunotherapy_status\r\nincome\r\ninfertile\r\ninjury_careplan\r\ninpatient-count\r\ninpatient-los\r\ninstances_of_homelessness\r\njoint_replacement\r\nknee_injury\r\nlaceration_injury\r\nlast_name\r\nlast_visit_symptom_total\r\nleft_ventricular_hypertrophy\r\nlung_cancer\r\nlung_cancer_nondiagnosis_counter\r\nlung_transplant\r\nlupus_careplan\r\nlupus_corticosteroid\r\nmTBI\r\nmacular_edema\r\nmaiden_name\r\nmarital_status\r\nmdd\r\nmdd_psych\r\nmetabolic_syndrome\r\nmicroalbuminuria\r\nmiscarriage\r\nmost-recent-daly\r\nmost-recent-qaly\r\nmultiple_birth_status\r\nname\r\nname_father\r\nname_mother\r\nname_prefix\r\nname_suffix\r\nnephropathy\r\nneuropathy\r\nnon_low_risk_pregnancy\r\nnonproliferative_retinopathy\r\nnumber_of_children\r\nobesity\r\noccupation_level\r\nopioid_addiction\r\nopioid_addiction_careplan\r\nopioid_prescription\r\nosteoarthritis\r\nosteoporosis\r\notc_antihistamine\r\notc_pain_reliever\r\noutgrew_food_allergies\r\nprediabetes\r\npregnancy_birth_sex\r\npregnancy_careplan\r\npregnancy_complication\r\npregnant\r\nprobability_of_fall_injury\r\nprobability_of_lung_cancer\r\nprobability_of_suicide\r\nproliferative_retinopathy\r\nprostate_cancer\r\nproteinuria\r\nptsd\r\nptsd_careplan\r\nquit alcoholism age\r\nquit alcoholism probability\r\nquit smoking age\r\nquit smoking probability\r\nra_careplan\r\nrace\r\nrecurrent_colorectal_adenoma\r\nretinopathy\r\nseizure\r\nseizure_meds\r\nsexual_orientation\r\nsexually_active\r\nsmoker\r\nsmoking\r\nsmoking_medication\r\nsocioeconomic_category\r\nspinal_injury\r\nsprain_injury\r\nssri\r\nstatin_initial\r\nstatin_renewal\r\nstroke_history\r\nstroke_points\r\nstroke_risk\r\nsuicide\r\nsuicide_attempt\r\nsuicide_careplan\r\nsuicide_risk\r\ntelecom\r\ntext\r\nuti\r\nveteran\r\nveteran_population_override\r\nvisit_allergist\r\nwatchful_waiting\r\nzip`.split('\\n');","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber, RIEToggle, RIETextArea } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { State, InitialState, TerminalState, SimpleState, GuardState, DelayState, SetAttributeState, CounterState, CallSubmoduleState, EncounterState, EncounterEndState, ConditionOnsetState, ConditionEndState, AllergyOnsetState, AllergyEndState, MedicationOrderState, MedicationEndState, CarePlanStartState, CarePlanEndState, ProcedureState, VitalSignState, ObservationState, MultiObservationState, DiagnosticReportState, ImagingStudyState, SymptomState, DeathState } from '../../types/State';\r\n\r\nimport { Code, Codes } from './Code';\r\nimport { Goals } from './Goal';\r\nimport { SeriesList } from './ImagingStudyAttributes';\r\nimport ConditionalEditor from './Conditional';\r\nimport Transition from './Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport { BasicTutorial, EditTutorial } from '../../templates/Tutorial';\r\nimport AutoCompleteText from './AutoCompleteText';\r\nimport Attributes from './Attributes.js';\r\nimport AttributeData from '../analysis/AttributeData.json';\r\nimport './State.css';\r\n\r\ntype Props = {\r\n  moduleName: string,\r\n  state: State,\r\n  otherStates: State[],\r\n  onChange: any,\r\n  renameNode: any,\r\n  copyNode: any,\r\n  changeType: any,\r\n  addTransition: any,\r\n  helpFunction: any,\r\n  displayAttributes: any\r\n}\r\n\r\nconst unitOfTimeOptions = [\r\n  {id: 'years', text: 'years'},\r\n  {id: 'months', text: 'months'},\r\n  {id: 'weeks', text: 'weeks'},\r\n  {id: 'days', text: 'days'},\r\n  {id: 'hours', text: 'hours'},\r\n  {id: 'minutes', text: 'minutes'},\r\n  {id: 'seconds', text: 'seconds'}\r\n];\r\n\r\nclass StateEditor extends Component<Props> {\r\n\r\n  renderStateType() {\r\n    let props = {...this.props};\r\n    props.state.name = props.state.name || 'Unnamed_State';\r\n    props.onChange = this.props.onChange(`states.${props.state.name}`);\r\n    switch (this.props.state.type) {\r\n      case \"Initial\":\r\n        return <Initial {...props} />\r\n      case \"Terminal\":\r\n        return <Terminal {...props} />\r\n      case \"Simple\":\r\n        return <Simple {...props} />\r\n      case \"Guard\":\r\n        return <Guard {...props} />\r\n      case \"Delay\":\r\n        return <Delay {...props} />\r\n      case \"SetAttribute\":\r\n        return <SetAttribute {...props} />\r\n      case \"Counter\":\r\n        return <Counter {...props} />\r\n      case \"CallSubmodule\":\r\n        return <CallSubmodule {...props} />\r\n      case \"Encounter\":\r\n        return <Encounter {...props} />\r\n      case \"EncounterEnd\":\r\n        return <EncounterEnd {...props} />\r\n      case \"ConditionOnset\":\r\n        return <ConditionOnset {...props} />\r\n      case \"ConditionEnd\":\r\n        return <ConditionEnd {...props} />\r\n      case \"AllergyOnset\":\r\n        return <AllergyOnset {...props} />\r\n      case \"AllergyEnd\":\r\n        return <AllergyEnd {...props} />\r\n      case \"MedicationOrder\":\r\n        return <MedicationOrder {...props} />\r\n      case \"MedicationEnd\":\r\n        return <MedicationEnd {...props} />\r\n      case \"CarePlanStart\":\r\n        return <CarePlanStart {...props} />\r\n      case \"CarePlanEnd\":\r\n        return <CarePlanEnd {...props} />\r\n      case \"Procedure\":\r\n        return <Procedure {...props} />\r\n      case \"VitalSign\":\r\n        return <VitalSign {...props} />\r\n      case \"Observation\":\r\n        return <Observation {...props} />\r\n      case \"MultiObservation\":\r\n        return <MultiObservation {...props} />\r\n      case \"DiagnosticReport\":\r\n        return <DiagnosticReport {...props} />\r\n      case \"ImagingStudy\":\r\n        return <ImagingStudy {...props} />\r\n      case \"Symptom\":\r\n        return <Symptom {...props} />\r\n      case \"Death\":\r\n        return <Death {...props} />\r\n      default:\r\n        return this.props.state.type\r\n    }\r\n  }\r\n\r\n  updateRemarks = (el:any) => {\r\n    const remarks = el.remarks? el.remarks.split(\"\\n\") : null;\r\n    this.props.onChange(`states.${this.props.state.name}.remarks`)({remarks:{id:remarks}});\r\n  }\r\n\r\n  render() {\r\n    if(!this.props.state) {\r\n      return null;\r\n    }\r\n\r\n    let typeOptions = Object.keys(getTemplate('State')).sort().map((k) => {return {id: k, text: k}});\r\n    const transitionOptions = [\r\n      {id:\"None\" ,text:\"None\"},\r\n      {id:\"Direct\" ,text:\"Direct\"},\r\n      {id:\"Distributed\" ,text:\"Distributed\"},\r\n      {id:\"Conditional\" ,text:\"Conditional\"},\r\n      {id:\"Complex\" ,text:\"Complex\"},\r\n      {id:\"Table\" ,text:\"Table\"}\r\n    ]\r\n\r\n    let remarks = this.props.state.remarks ||\"\";\r\n    remarks = Array.isArray(remarks)? remarks.join(\"\\n\"): remarks;\r\n\r\n    const transitionType = (this.props.state.transition||{}).type;\r\n    return (\r\n        <div className=\"State\">\r\n          <div className='Editor-panel-title'>\r\n            State Editor\r\n          </div>\r\n          <h3><RIEInput className='editable-text' className='editable-text' propName={'name'} value={this.props.state.name} change={this.props.renameNode} /></h3>\r\n          State Type: <RIESelect className='editable-text' className='editable-text' value={{id: this.props.state.type, text: this.props.state.type}} propName='type'change={this.props.changeType} options={typeOptions}/>\r\n          <hr/>\r\n          <RIETextArea className='editable-text' value={remarks} propName=\"remarks\" change={this.updateRemarks} />\r\n          <br/>\r\n          <hr/>\r\n          <div className=\"State-Editor\">\r\n            {this.renderStateType()}\r\n          </div>\r\n          <br />\r\n          <hr />\r\n          <div>\r\n            <div className=\"Transition-Type\">Transition Type:\r\n              <RIESelect className='editable-text' className='editable-text' value={{id: transitionType, text: transitionType}} propName='transition' change={(e) => this.props.addTransition(e.transition.id)} options={transitionOptions}/>\r\n            </div>\r\n          </div>\r\n          <div className=\"Transition\">\r\n            <Transition\r\n              options={this.props.otherStates.sort((a,b) => a.name > b.name? 1 : -1)}\r\n              transition={this.props.state.transition}\r\n              onChange={this.props.onChange(`states.${this.props.state.name}`)} />\r\n          </div>\r\n          <br/>\r\n          <a onClick={this.props.helpFunction(EditTutorial)}>Help</a>\r\n\r\n\r\n        </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nclass Initial extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): InitialState);\r\n    return (\r\n      null\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Terminal extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): TerminalState);\r\n    return (\r\n      null\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Simple extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): SimpleState);\r\n    return (\r\n      null\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Guard extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): GuardState);\r\n    return (\r\n      <div>\r\n        <ConditionalEditor {...this.props} conditional={state.allow} options={this.props.otherStates} onChange={this.props.onChange('allow')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Delay extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): DelayState);\r\n    return (\r\n      <div>\r\n        {this.renderExactOrRange()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): DelayState);\r\n    if (state.exact) {\r\n      return (\r\n        <div>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          Exact Unit: <RIESelect className='editable-text' value={{id: state.exact.unit, text: state.exact.unit}} propName=\"unit\" change={this.props.onChange('exact.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.RangeWithUnit')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          Range Unit: <RIESelect className='editable-text' value={{id: state.range.unit, text: state.range.unit}} propName=\"unit\" change={this.props.onChange('range.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass SetAttribute extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.attribute,\r\n      lastSubmitted : this.props.state.attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): SetAttributeState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (state.attribute === '')\r\n        {\r\n          state.attribute = 'text';\r\n        }\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    return (\r\n      <div>\r\n        Attribute: {displayAttribute}\r\n        <br/>\r\n        {this.renderValue()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderValue() {\r\n    let state = ((this.props.state: any): SetAttributeState);\r\n\r\n    if (state.value == null) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: \"text\"}})}>Add Value</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let val = state.value;\r\n      if(typeof val === 'boolean'){\r\n        val = String(val);\r\n      }\r\n      return (\r\n        <div>\r\n          Value: <RIEInput className='editable-text' value={val} propName={'value'} change={this.props.onChange('value')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.attribute != this.state.value)\r\n    {\r\n      this.props.onChange('attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.attribute});      \r\n    this.setState({lastSubmitted: this.props.state.attribute})\r\n  }\r\n\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\nclass Counter extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.attribute,//'',\r\n      lastSubmitted : this.props.state.attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): CounterState);\r\n    let options = [\r\n      {id: 'increment', text: 'increment'},\r\n      {id: 'decrement', text: 'decrement'}\r\n    ]; \r\n    \r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (state.attribute === '')\r\n        {\r\n          state.attribute = 'text';\r\n        }\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    return (\r\n      <div>\r\n        Attribute: {displayAttribute}\r\n        <br/>\r\n        Action: <RIESelect className='editable-text' value={{id: state.action, text: state.action}} propName=\"action\" change={this.props.onChange('action')} options={options} />\r\n        <br/>\r\n        Amount: <RIENumber className='editable-text' value={state.amount || 1} propName='amount' change={this.props.onChange('amount')} />\r\n      </div>\r\n    );\r\n  }\r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.attribute != this.state.value)\r\n    {\r\n      this.props.onChange('attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.attribute});      \r\n    this.setState({lastSubmitted: this.props.state.attribute})\r\n  }\r\n\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\nclass CallSubmodule extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): CallSubmoduleState);\r\n    return (\r\n      <div>\r\n        Submodule: <RIEInput className='editable-text' value={state.submodule} propName={'submodule'} change={this.props.onChange('submodule')} />\r\n        <br/>\r\n        <a href={`${window.location.href.replace(window.location.hash,\"\")}#${state.submodule}`} target=\"_blank\">View Submodule</a>\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Encounter extends Component<Props> {\r\n\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.reason,\r\n      lastSubmitted : this.props.state.reason,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.reason != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): EncounterState);\r\n    let options = [\r\n      {id: 'emergency', text: 'emergency'},\r\n      {id: 'inpatient', text: 'inpatient'},\r\n      {id: 'ambulatory', text: 'ambulatory'}\r\n    ];\r\n    if (state.wellness == null) {\r\n      return (\r\n        <div>\r\n          {this.renderWellness()}\r\n          Encounter Class: <RIESelect className='editable-text' value={{id: state.encounter_class, text: state.encounter_class}} propName=\"encounter_class\" change={this.props.onChange('encounter_class')} options={options} />\r\n          <br />\r\n          {this.renderReason()}\r\n          <div className='section'>\r\n            Codes\r\n            <br />\r\n            <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          {this.renderWellness()}\r\n          {this.renderReason()}\r\n        </div>\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n  renderWellness() {\r\n    let state = ((this.props.state: any): EncounterState);\r\n    if (state.wellness == null) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => {this.props.onChange('wellness')({val: {id: true}}); this.props.onChange('codes')({val: {id: null}}); this.props.onChange('encounter_class')({val: {id: null}})}}>Add Wellness</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Wellness\r\n          <a className='editable-text' onClick={() => {this.props.onChange('wellness')({val: {id: null}}); this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): EncounterState);\r\n    if (!state.reason) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let displayAttribute;\r\n        if (this.state.displayLabel)\r\n        {\r\n            const data = AttributeData;      \r\n            let others = [this.props.moduleName];\r\n            if (data[state.reason]!= undefined) \r\n            {\r\n              Object.keys(data[state.reason].read).forEach(i => {others.push(i)})                \r\n              Object.keys(data[state.reason].write).forEach(i => {others.push(i)})\r\n            }\r\n            others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n            others.splice(others.indexOf[this.props.moduleName], 1);\r\n    \r\n            if (state.reason === '')\r\n            {\r\n              state.reason = 'text';\r\n            }\r\n            if (others.length > 0)\r\n            {\r\n              displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.reason}</label>\r\n              <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n              </span>\r\n            }\r\n            else{\r\n              displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.reason}</label>\r\n            }\r\n    \r\n        }\r\n        else\r\n        {\r\n         displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n        }\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {displayAttribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.reason != this.state.value)\r\n    {\r\n      this.props.onChange('reason')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.reason});      \r\n    this.setState({lastSubmitted: this.props.state.reason})\r\n  }\r\n\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n\r\n}\r\n\r\nclass EncounterEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): EncounterEndState);\r\n    return (\r\n      <div>\r\n        {this.renderDischargeDisposition()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDischargeDisposition() {\r\n    let state = ((this.props.state: any): EncounterEndState);\r\n    if (!state.discharge_disposition) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('discharge_disposition')({val: {id: getTemplate('Type.Code.Nubc')}})}>Add Discharge Disposition</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Code code={state.discharge_disposition} system={\"NUBC\"} onChange={this.props.onChange('discharge_disposition')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('discharge_disposition')({val: {id: null}})}>Remove Discharge Disposition</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass ConditionOnset extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.assign_to_attribute,//'',\r\n      lastSubmitted : this.props.state.assign_to_attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.assign_to_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    return (\r\n      <div>\r\n        {this.renderTargetEncounter()}\r\n        {this.renderAssignToAttribute()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTargetEncounter() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    let encounters = this.props.otherStates.filter((s) => {return s.type === \"Encounter\"});\r\n    let options = encounters.map((e) => {return {id: e.name, text: e.name}});\r\n    let targetEncounter = <RIESelect className='editable-text' value={{id: state.target_encounter, text: state.target_encounter}} propName={'target_encounter'}  change={this.props.onChange('target_encounter')} options={options} />\r\n    if (state.target_encounter) {\r\n      return (\r\n        <div>\r\n          Target Encounter: {targetEncounter}\r\n          <br/>\r\n          <a className='editable-text' onClick={() => this.props.onChange('target_encounter')({val: {id: null}})}>(remove to diagnose immediately)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('target_encounter')({val: {id: \"text\"}})}>Add Target Encounter</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.assign_to_attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: {displayAttribute}\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.assign_to_attribute != this.state.value)\r\n    {\r\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.assign_to_attribute});      \r\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\r\n  }\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\n\r\nclass ConditionEnd extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.referenced_by_attribute,\r\n      lastSubmitted : this.props.state.referenced_by_attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    return (\r\n      <div>\r\n        {this.renderConditionOnset()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderConditionOnset() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n    let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.condition_onset) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: \"text\"}})}>Add Condition Onset</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Condition Onset: <RIESelect className='editable-text' value={{id: state.condition_onset, text: state.condition_onset}} propName={'condition_onset'}  change={this.props.onChange('condition_onset')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.referenced_by_attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: {displayAttribute}\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\r\n    {\r\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.referenced_by_attribute});      \r\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\r\n  }\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\nclass AllergyOnset extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.assign_to_attribute,//'',\r\n      lastSubmitted : this.props.state.assign_to_attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.assign_to_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): AllergyOnsetState);\r\n    let encounters = this.props.otherStates.filter((s) => {return s.type === \"Encounter\"});\r\n    let options = encounters.map((e) => {return {id: e.name, text: e.name}});\r\n    return (\r\n      <div>\r\n        Target Encounter: <RIESelect className='editable-text' value={{id: state.target_encounter, text: state.target_encounter}} propName={'target_encounter'} change={this.props.onChange('target_encounter')} options={options} />\r\n        <br />\r\n        {this.renderAssignToAttribute()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): AllergyOnsetState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.assign_to_attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: {displayAttribute}\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.assign_to_attribute != this.state.value)\r\n    {\r\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.assign_to_attribute});      \r\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\r\n  }\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\nclass AllergyEnd extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.referenced_by_attribute,\r\n      lastSubmitted : this.props.state.referenced_by_attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    return (\r\n      <div>\r\n        {this.renderAllergyOnset()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAllergyOnset() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    let allergyOnset = this.props.otherStates.filter((s) => {return s.type === \"AllergyOnset\"});\r\n    let options = allergyOnset.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.allergy_onset) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('allergy_onset')({val: {id: \"text\"}})}>Add Allergy Onset</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Allergy Onset: <RIESelect className='editable-text' value={{id: state.allergy_onset, text: state.allergy_onset}} propName={'allergy_onset'}  change={this.props.onChange('allergy_onset')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('allergy_onset')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.referenced_by_attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: {displayAttribute}\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\r\n    {\r\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.referenced_by_attribute});      \r\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\r\n  }\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\nclass MedicationOrder extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleTextChangeReason = this.handleTextChangeReason.bind(this);\r\n    this.handleSubmitReason = this.handleSubmitReason.bind(this);\r\n    this.state = {\r\n      value : this.props.state.assign_to_attribute,\r\n      lastSubmitted : this.props.state.assign_to_attribute,\r\n      displayLabel : true,\r\n      valueReason : this.props.state.reason,\r\n      lastSubmittedReason : this.props.state.reason,\r\n      displayLabelReason : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.assign_to_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    return (\r\n      <div>\r\n        {this.renderAssignToAttribute()}\r\n        {this.renderReason()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"RxNorm\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        {this.renderPrescription()}\r\n        {this.renderChronicMed()}\r\n        {this.renderCreateAdministration()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderChronicMed() {\r\n    let state = ((this.props.state: any): MedicationOrder);\r\n    return (\r\n      <div>\r\n        <input type=\"checkbox\" checked={state.chronic} onChange={() => this.props.onChange('chronic')({ val: { id: !state.chronic } })} /> Chronic Medication.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCreateAdministration() {\r\n    let state = ((this.props.state: any): MedicationOrder);\r\n    return (\r\n      <div>\r\n        <input type=\"checkbox\" checked={state.administration} onChange={() => this.props.onChange('administration')({ val: { id: !state.administration } })} /> Administration of the medication.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.assign_to_attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: {displayAttribute}\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): MedicationOrder);\r\n    if (!state.reason) {\r\n      if( this.state.valueReason !== 'text')\r\n      {\r\n        this.setState({valueReason: 'text'});\r\n      }\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let displayAttribute;\r\n        if (this.state.displayLabelReason)\r\n        {\r\n          displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabelReason}>{state.reason}</label>\r\n    \r\n        }\r\n        else\r\n        {\r\n         displayAttribute = <AutoCompleteText onChange={this.handleTextChangeReason} onBlur={this.handleSubmitReason} text={this.state.valueReason} items={Attributes}/>\r\n        }\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {displayAttribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  renderPrescription() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription')({val: {id: getTemplate('Attribute.Prescription')}})}>Add Prescription</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Prescription\r\n          {this.renderRefills()}\r\n          {this.renderAsNeeded()}\r\n          {this.renderDosage()}\r\n          {this.renderDuration()}\r\n          {this.renderInstructions()}\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription')({val: {id: null}})}> Remove Prescription</a>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderRefills() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.refills) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.refills')({val: {id: 1}})}>Add Prescription Refills</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Prescription Refills: <RIENumber className='editable-text' value={state.prescription.refills} propName={'refills'}  change={this.props.onChange('prescription.refills')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.refills')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderAsNeeded() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (state.prescription.as_needed == null) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.as_needed')({val: {id: true}})}>Add Prescription As Needed</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Prescription As Needed\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.as_needed')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderDosage() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.dosage) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className='section'>\r\n        Dosage Amount: <RIENumber className='editable-text' value={state.prescription.dosage.amount} propName={'amount'}  change={this.props.onChange('prescription.dosage.amount')} />\r\n        <br />\r\n        Dosage Frequency: <RIENumber className='editable-text' value={state.prescription.dosage.frequency} propName={'frequency'}  change={this.props.onChange('prescription.dosage.frequency')} />\r\n        <br />\r\n        Dosage Period: <RIENumber className='editable-text' value={state.prescription.dosage.period} propName={'period'}  change={this.props.onChange('prescription.dosage.period')} />\r\n        <br />\r\n        Dosage Unit: <RIESelect className='editable-text' value={{id: state.prescription.dosage.unit, text: state.prescription.dosage.unit}} propName=\"unit\" change={this.props.onChange('prescription.dosage.unit')} options={unitOfTimeOptions} />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDuration() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.duration) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className='section'>\r\n        Duration Quantity: <RIENumber className='editable-text' value={state.prescription.duration.quantity} propName={'quantity'}  change={this.props.onChange('prescription.duration.quantity')} />\r\n        <br />\r\n        Duration Unit: <RIESelect className='editable-text' value={{id: state.prescription.duration.unit, text: state.prescription.duration.unit}} propName=\"unit\" change={this.props.onChange('prescription.duration.unit')} options={unitOfTimeOptions} />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderInstructions() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.instructions) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.instructions')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Instructions</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Instructions\r\n          <br />\r\n          <Codes codes={state.prescription.instructions} system={\"SNOMED-CT\"} onChange={this.props.onChange('prescription.instructions')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.instructions')({val: {id: null}})}>Remove Instructions</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleTextChange(value) {\r\n    this.setState({value: value});      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.assign_to_attribute != this.state.value)\r\n    {\r\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.assign_to_attribute});      \r\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\r\n  }\r\n  \r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n  handleTextChangeReason(value) {\r\n    this.setState({valueReason: value});\r\n      \r\n  }\r\n\r\n  handleSubmitReason(save) {\r\n    if (save && this.props.state.reason != this.state.valueReason)\r\n    {\r\n      this.props.onChange('reason')({val: this.state.valueReason})\r\n      this.setState({lastSubmittedReason: this.state.valueReason})      \r\n    }\r\n    else {\r\n      this.setState({valueReason: this.state.lastSubmittedReason})\r\n    }\r\n    this.toggleLabelReason();\r\n  }\r\n\r\n  toggleLabelReason = () =>  {\r\n    this.setState({displayLabelReason: !this.state.displayLabelReason});\r\n  }\r\n\r\n}\r\n\r\nclass MedicationEnd extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.referenced_by_attribute,\r\n      lastSubmitted : this.props.state.referenced_by_attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    return (\r\n      <div>\r\n        {this.renderMedicationOrder()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMedicationOrder() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    let medicationOrder = this.props.otherStates.filter((s) => {return s.type === \"MedicationOrder\"});\r\n    let options = medicationOrder.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.medication_order) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('medication_order')({val: {id: \"text\"}})}>Add Medication Order</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Medication Order: <RIESelect className='editable-text' value={{id: state.medication_order, text: state.medication_order}} propName={'medication_order'}  change={this.props.onChange('medication_order')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('medication_order')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.referenced_by_attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: {displayAttribute}\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.RxNorm')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleTextChange(value) {\r\n    this.setState({value: value});      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\r\n    {\r\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.referenced_by_attribute});      \r\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\r\n  }\r\n  \r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\nclass CarePlanStart extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)    \r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleTextChangeReason = this.handleTextChangeReason.bind(this);\r\n    this.handleSubmitReason = this.handleSubmitReason.bind(this);\r\n    this.state = {\r\n      value : this.props.state.assign_to_attribute,\r\n      lastSubmitted : this.props.state.assign_to_attribute,\r\n      displayLabel : true,\r\n      valueReason : this.props.state.reason,\r\n      lastSubmittedReason : this.props.state.reason,\r\n      displayLabelReason : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.assign_to_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    return (\r\n      <div>\r\n        {this.renderAssignToAttribute()}\r\n        {this.renderReason()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        {this.renderActivities()}\r\n        {this.renderGoals()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.assign_to_attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.assign_to_attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.assign_to_attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.assign_to_attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: {displayAttribute}\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): CarePlanStart);\r\n    if (!state.reason) {\r\n      if( this.state.valueReason !== 'text')\r\n      {\r\n        this.setState({valueReason: 'text'});\r\n      }\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let displayAttribute;\r\n        \r\n        if (this.state.displayLabelReason)\r\n        {            \r\n            displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabelReason}>{state.reason}</label>    \r\n        }\r\n        else\r\n        {\r\n         displayAttribute = <AutoCompleteText onChange={this.handleTextChangeReason} onBlur={this.handleSubmitReason} text={this.state.valueReason} items={Attributes}/>\r\n        }\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {displayAttribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {           \r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  renderActivities() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    if (!state.activities) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('activities')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Activities</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Activities\r\n          <br />\r\n          <Codes codes={state.activities} system={\"SNOMED-CT\"} onChange={this.props.onChange('activities')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('activities')({val: {id: null}})}>Remove Activities</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderGoals() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    if (!state.goals) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('goals')({val: {id: [getTemplate('Attribute.Goal')]}})}>Add Goals</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Goals\r\n          <br />\r\n          <Goals goals={state.goals} onChange={this.props.onChange('goals')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('goals')({val: {id: null}})}>Remove Goals</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleTextChange(value) {\r\n    this.setState({value: value});      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.assign_to_attribute != this.state.value)\r\n    {\r\n      this.props.onChange('assign_to_attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.assign_to_attribute});      \r\n    this.setState({lastSubmitted: this.props.state.assign_to_attribute})\r\n  }\r\n\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n  handleTextChangeReason(value) {\r\n    this.setState({valueReason: value});\r\n      \r\n  }\r\n\r\n  handleSubmitReason(save) {\r\n    if (save && this.props.state.reason != this.state.valueReason)\r\n    {\r\n      this.props.onChange('reason')({val: this.state.valueReason})\r\n      this.setState({lastSubmittedReason: this.state.valueReason})      \r\n    }\r\n    else {\r\n      this.setState({valueReason: this.state.lastSubmittedReason})\r\n    }\r\n    this.toggleLabelReason();\r\n  }\r\n\r\n  toggleLabelReason = () =>  {\r\n    this.setState({displayLabelReason: !this.state.displayLabelReason});\r\n  }\r\n}\r\n\r\nclass CarePlanEnd extends Component<Props> {\r\n\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.referenced_by_attribute,\r\n      lastSubmitted : this.props.state.referenced_by_attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    return (\r\n      <div>\r\n        {this.renderCarePlan()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCarePlan() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    let careplans = this.props.otherStates.filter((s) => {return s.type === \"CarePlanStart\"});\r\n    let options = careplans.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.careplan) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('careplan')({val: {id: \"text\"}})}>Add Care Plan</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Care Plan: <RIESelect className='editable-text' value={{id: state.careplan, text: state.careplan}} propName={'careplan'}  change={this.props.onChange('careplan')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('careplan')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.referenced_by_attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: {displayAttribute}\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\r\n    {\r\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.referenced_by_attribute});      \r\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\r\n  }\r\n\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\nclass Procedure extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)    \r\n    this.handleTextChangeReason = this.handleTextChangeReason.bind(this);\r\n    this.handleSubmitReason = this.handleSubmitReason.bind(this);\r\n    this.state = {\r\n      valueReason : this.props.state.reason,\r\n      lastSubmittedReason : this.props.state.reason,\r\n      displayLabelReason : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ProcedureState);\r\n    return (\r\n      <div>\r\n        {this.renderReason()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        {this.renderDuration()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): Procedure);\r\n    if (!state.reason) {\r\n      if( this.state.valueReason !== 'text')\r\n      {\r\n        this.setState({valueReason: 'text'});\r\n      }\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let displayAttribute;\r\n        \r\n        if (this.state.displayLabelReason)\r\n        {            \r\n            displayAttribute = <label className=\"editable-text\" onClick={this.toggleLabelReason}>{state.reason}</label>    \r\n        }\r\n        else\r\n        {\r\n         displayAttribute = <AutoCompleteText onChange={this.handleTextChangeReason} onBlur={this.handleSubmitReason} text={this.state.valueReason} items={Attributes}/>\r\n        }\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {displayAttribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  renderDuration() {\r\n    let state = ((this.props.state: any): ProcedureState);\r\n    if (!state.duration) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('duration')({val: {id: {low: 10, high: 20, unit: 'days'}}})}>Add Duration</a>\r\n          <br />\r\n        </div>\r\n      );\r\n      return null;\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Duration Low: <RIENumber className='editable-text' value={state.duration.low} propName={'low'}  change={this.props.onChange('duration.low')} />\r\n          <br />\r\n          Duration High: <RIENumber className='editable-text' value={state.duration.high} propName={'high'}  change={this.props.onChange('duration.high')} />\r\n          <br />\r\n          Duration Unit: <RIESelect className='editable-text' value={{id: state.duration.unit, text: state.duration.unit}} propName=\"unit\" change={this.props.onChange('duration.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange('duration')({val: {id: null}})}>(remove)</a>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n  handleTextChangeReason(value) {\r\n    this.setState({valueReason: value});\r\n      \r\n  }\r\n\r\n  handleSubmitReason(save) {\r\n    if (save && this.props.state.reason != this.state.valueReason)\r\n    {\r\n      this.props.onChange('reason')({val: this.state.valueReason})\r\n      this.setState({lastSubmittedReason: this.state.valueReason})      \r\n    }\r\n    else {\r\n      this.setState({valueReason: this.state.lastSubmittedReason})\r\n    }\r\n    this.toggleLabelReason();\r\n  }\r\n\r\n  toggleLabelReason = () =>  {\r\n    this.setState({displayLabelReason: !this.state.displayLabelReason});\r\n  }\r\n\r\n}\r\n\r\nclass VitalSign extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): VitalSignState);\r\n    return (\r\n      <div>\r\n        Vital Sign: <RIEInput className='editable-text' value={state.vital_sign} propName={'vital_sign'} change={this.props.onChange('vital_sign')} />\r\n        <br/>\r\n        Unit: <RIEInput className='editable-text' value={state.unit} propName={'unit'} change={this.props.onChange('unit')} />\r\n        <br/>\r\n        {this.renderExactOrRange()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): VitalSignState);\r\n    if (state.exact) {\r\n      return (\r\n        <div className='section'>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Observation extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.attribute,//'',\r\n      lastSubmitted : this.props.state.attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): ObservationState);\r\n    let options = [\r\n      {id: 'social-history', text: 'social-history'},\r\n      {id: 'vital-signs', text: 'vital-signs'},\r\n      {id: 'imaging', text: 'imaging'},\r\n      {id: 'laboratory', text: 'laboratory'},\r\n      {id: 'procedure', text: 'procedure'},\r\n      {id: 'survey', text: 'survey'},\r\n      {id: 'exam', text: 'exam'},\r\n      {id: 'therapy', text: 'therapy'}\r\n    ];\r\n    return (\r\n      <div>\r\n        Category: <RIESelect className='editable-text' value={{id: state.category, text: state.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\r\n        <br/>\r\n        Unit: <RIEInput className='editable-text' value={state.unit} propName={'unit'} change={this.props.onChange('unit')} />\r\n        <br/>\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\r\n          <br/>\r\n        </div>\r\n        {this.renderValueContainer()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderValueContainer() { // renders exact, range, attribute, or vital_sign\r\n    let state = ((this.props.state: any): ObservationState);\r\n    if (state.exact) {\r\n      let value = state.exact.quantity;\r\n      if(typeof value === 'boolean'){\r\n        value = String(value);\r\n      }\r\n      return (\r\n        <div className='section'>\r\n          Exact Value: <RIEInput className='editable-text' value={value} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          { this.renderToggles('exact') }\r\n        </div>\r\n      );\r\n    } else if (state.range) {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          { this.renderToggles('range') }\r\n        </div>\r\n      );\r\n    } else if (state.attribute) {\r\n      let displayAttribute;\r\n      if (this.state.displayLabel)\r\n      {\r\n          const data = AttributeData;      \r\n          let others = [this.props.moduleName];\r\n          if (data[state.attribute]!= undefined) \r\n          {\r\n            Object.keys(data[state.attribute].read).forEach(i => {others.push(i)})                \r\n            Object.keys(data[state.attribute].write).forEach(i => {others.push(i)})\r\n          }\r\n          others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n          others.splice(others.indexOf[this.props.moduleName], 1);\r\n  \r\n          if (others.length > 0)\r\n          {\r\n            displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\r\n            <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n            </span>\r\n          }\r\n          else{\r\n            displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.attribute}</label>\r\n          }\r\n  \r\n      }\r\n      else\r\n      {\r\n       displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n      }\r\n      return (\r\n        <div className='section'>\r\n          Attribute: {displayAttribute}\r\n          <br/>\r\n          { this.renderToggles('attribute') }\r\n        </div>\r\n      );\r\n    } else if (state.value_code) {\r\n      return (\r\n        <div className='section'>\r\n          <Code code={state.value_code} system={\"SNOMED-CT\"} onChange={this.props.onChange('value_code')} />\r\n          { this.renderToggles('value_code') }\r\n        </div>\r\n      );\r\n    } else { // vital_sign\r\n      return (\r\n        <div className='section'>\r\n          Vital Sign: <RIEInput className='editable-text' value={state.vital_sign} propName={'vital_sign'}  change={this.props.onChange('vital_sign')} />\r\n          { this.renderToggles('vital_sign') }\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderToggles(currentItem) {\r\n    console.log(currentItem);\r\n\r\n    let toggles = [];\r\n\r\n    if (currentItem !== 'exact') {\r\n      toggles.push(\r\n                <div key='exact'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Exact</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'range') {\r\n      toggles.push(\r\n                <div key='range'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Range</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'attribute') {\r\n      toggles.push(\r\n                <div key='attribute'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('attribute')({val: {id: \"text\"}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Attribute</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'vital_sign') {\r\n      toggles.push(\r\n                <div key='vital_sign'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('vital_sign')({val: {id: \"text\"}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Vital Sign</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'value_code') {\r\n      toggles.push(\r\n                <div key='value_code'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('value_code')({val: {id:  getTemplate('Type.Code.Snomed')}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}})}}>Change to Value Code</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    return toggles;\r\n  }\r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.attribute != this.state.value)\r\n    {\r\n      this.props.onChange('attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.attribute});      \r\n    this.setState({lastSubmitted: this.props.state.attribute})\r\n  }\r\n\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\nclass MultiObservation extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): MultiObservationState);\r\n    let observationCount = (state.observations && state.observations.length) || 0;\r\n    let options = [\r\n      {id: 'social-history', text: 'social-history'},\r\n      {id: 'vital-signs', text: 'vital-signs'},\r\n      {id: 'imaging', text: 'imaging'},\r\n      {id: 'laboratory', text: 'laboratory'},\r\n      {id: 'procedure', text: 'procedure'},\r\n      {id: 'survey', text: 'survey'},\r\n      {id: 'exam', text: 'exam'},\r\n      {id: 'therapy', text: 'therapy'}\r\n    ];\r\n    return (\r\n      <div>\r\n        Category: <RIESelect className='editable-text' value={{id: state.category, text: state.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\r\n        <br />\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        <div className='section'>\r\n          <b>Observations</b>\r\n          <br />\r\n          {state.observations && state.observations.map((observation, i) => {\r\n            return (\r\n              <div className='section' key={i}>\r\n                Observation #{i+1} (<a className='editable-text delete-button' onClick={() => this.props.onChange(`observations.[${i}]`)({val: {id: null}})}>remove</a>)\r\n                <Observation state={observation} onChange={this.props.onChange(`observations.[${i}]`)} />\r\n              </div>\r\n            )\r\n          })}\r\n          <a className='editable-text' onClick={() => this.props.onChange(`observations.[${observationCount}]`)({val: {id: _.cloneDeep(getTemplate('Contained.Observation'))}})}>+</a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass DiagnosticReport extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): DiagnosticReportState);\r\n    let observationCount = (state.observations && state.observations.length) || 0;\r\n    return (\r\n      <div>\r\n        <div className='section'>\r\n          <b>Codes</b>\r\n          <br />\r\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\r\n        </div>\r\n        <div className='section'>\r\n          <b>Observations</b>\r\n          <br />\r\n          {state.observations && state.observations.map((observation, i) => {\r\n            return (\r\n              <div className='section' key={i}>\r\n                Observation #{i+1} (<a className='editable-text delete-button' onClick={() => this.props.onChange(`observations.[${i}]`)({val: {id: null}})}>remove</a>)\r\n                <Observation state={observation} onChange={this.props.onChange(`observations.[${i}]`)} />\r\n              </div>\r\n            )\r\n          })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`observations.[${observationCount}]`)({val: {id: _.cloneDeep(getTemplate('Contained.Observation'))}})}>+</a>\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ImagingStudy extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ImagingStudyState);\r\n    return (\r\n      <div>\r\n        <div className='section'>\r\n          <b>Procedure Code:</b>\r\n          <Code code={state.procedure_code} system={\"SNOMED-CT\"} onChange={this.props.onChange('procedure_code')} />\r\n          <br />\r\n        </div>\r\n        <div className='section'>\r\n          <b>Series:</b>\r\n          <br />\r\n          <SeriesList series={state.series} onChange={this.props.onChange('series')} />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Symptom extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    return (\r\n      <div>\r\n        Symptom: <RIEInput className='editable-text' value={state.symptom} propName={'symptom'} change={this.props.onChange('symptom')} />\r\n        <br/>\r\n        {this.renderProbability()}\r\n        {this.renderCause()}\r\n        {this.renderExactOrRange()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderProbability() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    if (!state.probability) {\r\n      return (\r\n        <div>\r\n          Probability: <RIENumber className='editable-text' value={1} propName={'probability'} editProps={{step: .01, min: 0, max: 1}} change={this.props.onChange('probability')} format={this.formatAsPercentage} validate={this.checkInRange} classInvalid=\"invalid\" />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Probability: <RIENumber className='editable-text' value={state.probability} propName={'probability'} editProps={{step: .01, min: 0, max: 1}} change={this.props.onChange('probability')} format={this.formatAsPercentage} validate={this.checkInRange} classInvalid=\"invalid\"/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  checkInRange(num: number) {\r\n    return ((num >= 0) && (num <= 1));\r\n  }\r\n\r\n  formatAsPercentage(num: number) {\r\n    return (num * 100) + \"%\";\r\n  }\r\n\r\n  renderCause() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    if (!state.cause) {\r\n      return (\r\n        <div>\r\n          Cause: <RIEInput className='editable-text' value={this.props.moduleName} propName={'cause'} change={this.props.onChange('cause')} />\r\n          <br/>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Cause: <RIEInput className='editable-text' value={state.cause} propName={'cause'} change={this.props.onChange('cause')} />\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    if (state.exact) {\r\n      return (\r\n        <div className='section'>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Death extends Component<Props> {\r\n  constructor (props) {\r\n    super(props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.state = {\r\n      value : this.props.state.referenced_by_attribute,\r\n      lastSubmitted : this.props.state.referenced_by_attribute,\r\n      displayLabel : true,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // check for undo/redo\r\n    if (this.props.state.referenced_by_attribute != this.state.value && this.state.value == this.state.lastSubmitted)\r\n    {\r\n      this.fixTextBox();\r\n    }\r\n    let state = ((this.props.state: any): DeathState);\r\n    return (\r\n      <div>\r\n        {this.renderExactOrRange()}\r\n        {this.renderCodes()}\r\n        {this.renderConditionOnset()}\r\n        {this.renderReferencedByAttribute()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    if (state.exact) {\r\n      return (\r\n        <div className='section'>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          Exact Unit: <RIESelect className='editable-text' value={{id: state.exact.unit, text: state.exact.unit}} propName=\"unit\" change={this.props.onChange('exact.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.RangeWithUnit')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: null}}); this.props.onChange('exact')({val: {id: null}})}}>Remove Exact/Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else if (state.range) {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          Range Unit: <RIESelect className='editable-text' value={{id: state.range.unit, text: state.range.unit}} propName=\"unit\" change={this.props.onChange('range.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: null}}); this.props.onChange('exact')({val: {id: null}})}}>Remove Exact/Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Add Exact/Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderConditionOnset() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n    let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.condition_onset) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: \"text\"}})}>Add Condition Onset</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Condition Onset: <RIESelect className='editable-text' value={{id: state.condition_onset, text: state.condition_onset}} propName={'condition_onset'}  change={this.props.onChange('condition_onset')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    let displayAttribute;\r\n    if (this.state.displayLabel)\r\n    {\r\n        const data = AttributeData;      \r\n        let others = [this.props.moduleName];\r\n        if (data[state.referenced_by_attribute]!= undefined) \r\n        {\r\n          Object.keys(data[state.referenced_by_attribute].read).forEach(i => {others.push(i)})                \r\n          Object.keys(data[state.referenced_by_attribute].write).forEach(i => {others.push(i)})\r\n        }\r\n        others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n        others.splice(others.indexOf[this.props.moduleName], 1);\r\n\r\n        if (others.length > 0)\r\n        {\r\n          displayAttribute = <span><label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n          <button className=\"attribute-button\" onClick={this.props.displayAttributes}>See other uses</button>\r\n          </span>\r\n        }\r\n        else{\r\n          displayAttribute = <label class=\"editable-text\" onClick={this.toggleLabel}>{state.referenced_by_attribute}</label>\r\n        }\r\n\r\n    }\r\n    else\r\n    {\r\n     displayAttribute = <AutoCompleteText onChange={this.handleTextChange} onBlur={this.handleSubmit} text={this.state.value} items={Attributes}/>\r\n    }\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: {displayAttribute}\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n   \r\n  handleTextChange(value) {\r\n    this.setState({value: value});\r\n      \r\n  }\r\n\r\n  handleSubmit(save) {\r\n    if (save && this.props.state.referenced_by_attribute != this.state.value)\r\n    {\r\n      this.props.onChange('referenced_by_attribute')({val: this.state.value})\r\n      this.setState({lastSubmitted: this.state.value})      \r\n    }\r\n    else {\r\n      this.setState({value: this.state.lastSubmitted})\r\n    }\r\n    this.toggleLabel();\r\n  }\r\n\r\n  fixTextBox() {    \r\n    this.setState({value: this.props.state.referenced_by_attribute});      \r\n    this.setState({lastSubmitted: this.props.state.referenced_by_attribute})\r\n  }\r\n\r\n  toggleLabel = () =>  {\r\n    this.setState({displayLabel: !this.state.displayLabel});\r\n  }\r\n\r\n}\r\n\r\nexport default StateEditor;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIEInput, RIETextArea } from 'riek';\r\n\r\nimport './ModuleProperties.css';\r\n\r\nimport type { Module } from './types/Module';\r\n\r\ntype Props = {\r\n  module: Module,\r\n  onRemarksChange: (selectedModuleIndex: number, newName: string) => mixed\r\n}\r\n\r\nclass ModulePropertiesEditor extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onRemarksChange = this.onRemarksChange.bind(this);\r\n  }\r\n\r\n  onRemarksChange(remarks) {\r\n    this.props.onRemarksChange(remarks)\r\n  }\r\n\r\n  render() {\r\n    let remarks = \"No remarks.\" \r\n    if(Array.isArray(this.props.module.remarks)){ \r\n      remarks = this.props.module.remarks.join(\"\\n\");\r\n    }\r\n\r\n    // NOTE: WHAT IF REMARKS SET TO BLANK?\r\n\r\n    return (\r\n      <div className='ModuleProperties'>\r\n        <div className='Editor-panel-title'> \r\n           Module Remarks\r\n        </div>\r\n        <div className='ModuleProperties-remarks'>\r\n          <RIETextArea value={remarks} propName=\"remarks\" change={(newval) => this.onRemarksChange(newval.remarks)} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ModulePropertiesEditor;\r\n","// @flow\r\nimport type { Module } from './types/Module';\r\nimport type { State } from './types/State';\r\n\r\nimport { cleanString } from '../utils/stringUtils';\r\n\r\nconst STANDARD_COLOR = 'Black';\r\n/*\r\nconst HIGHLIGHT_COLOR = '#007bff';\r\nconst MUTED_COLOR = '#CCCCCC'\r\n*/\r\n\r\nexport function generateDOT(module: Module, selectedState: State, selectedStateTransition: Number) {\r\n\r\n  let relatedStates = {};\r\n\r\n  if(selectedState) {\r\n    Object.keys(module.states).forEach( key => {\r\n      let state = module.states[key];\r\n\r\n      let allTransitions = findTransitions(module.states[key])\r\n\r\n      if(allTransitions[selectedState.name]){\r\n        relatedStates[state.name] = true;\r\n      }\r\n\r\n    });\r\n\r\n    relatedStates = Object.assign({}, relatedStates, findTransitions(module.states[selectedState.name]))\r\n\r\n  }\r\n\r\n  let output =  ['digraph G {',\r\n          nodesAsDOT(module, selectedState, relatedStates),\r\n          transitionsAsDOT(module, selectedState, selectedStateTransition),\r\n         '}'\r\n         ].join('\\n');\r\n\r\n  return output;\r\n\r\n}\r\n\r\nconst nodesAsDOT = (module: Module, selectedState: State, relatedStates: mixed) => {\r\n\r\n  return Object.keys(module.states).filter(name => typeof module.states[name] === 'object').map( name => {\r\n\r\n    let state = module.states[name]\r\n    state['name'] = name\r\n\r\n    let node = {\r\n      id: 'node_' + escapeId(name),\r\n      shape: 'record',\r\n      style: 'rounded,filled',\r\n      fillcolor: 'White',\r\n      fontcolor: STANDARD_COLOR\r\n    }\r\n\r\n    if(state['type'] === 'Initial' || state['type'] === 'Terminal'){\r\n        node['fillcolor'] = 'Grey'\r\n        node['style'] = 'rounded,filled'\r\n        node['fontcolor'] = 'White'\r\n    }\r\n\r\n    if(selectedState && state.name === selectedState.name){\r\n      node['fillcolor'] = 'White'\r\n      node['class'] = 'node-highlighted'\r\n    } else if (selectedState && !relatedStates[state.name]){\r\n      node['class'] = 'node-muted'\r\n    }\r\n\r\n    let details = stateDescription(state)\r\n    if(details.length === 0){\r\n      node['label'] = (name === state['type']) ? state['name'] : `{ ${name} | ${state['type']} }`\r\n    } else {\r\n      node['label'] = `{ ${name} | { ${state['type']} | ${details} } }`\r\n    }\r\n\r\n    node['label'] = escapeLabel(node['label']);\r\n\r\n    let params = Object.keys(node).map((key) => `${key} = \"${node[key]}\"`).join(\", \");\r\n\r\n    return `\"${escapeName(name)}\" [${params};]`\r\n\r\n  }).join(\"\\n\");\r\n\r\n}\r\n\r\nconst transitionsAsDOT = (module: Module, selectedState: State, selectedStateTransition: Number) => {\r\n\r\n  return Object.keys(module.states).map( name => {\r\n\r\n    let state = module.states[name]\r\n    let escapedName = escapeName(name);\r\n\r\n    let className='';\r\n\r\n    if(!!selectedState){\r\n      className = 'transition-muted'\r\n    }\r\n\r\n    if(selectedState && selectedState.name === name){\r\n      className='transition-highlighted'\r\n    }\r\n\r\n    if(state.direct_transition !== undefined){\r\n      if(selectedState && state.direct_transition === selectedState.name && selectedState.name !== name){\r\n        className='';\r\n      }\r\n\r\n      if(selectedStateTransition === 0 ){\r\n        className += ' transition-selected';\r\n      }\r\n\r\n      if(module.states[state.direct_transition]){\r\n        return `  \"${escapedName}\" -> \"${escapeName(module.states[state.direct_transition].name)}\" [class = \"transition transition-index_0 ${className}\"];\\n`\r\n      } else {\r\n        console.log(`NO SUCH NODE TO TRANSITION TO: ${state.direct_transition} FROM ${name}`);\r\n      }\r\n    } else if(state.distributed_transition !== undefined){\r\n      let out_transitions = ''\r\n      state.distributed_transition.forEach( (t, i) => {\r\n        let transitionClassName = className\r\n        let distLabel = ''\r\n        if(typeof t.distribution === 'object'){\r\n          distLabel = `p(${t.distribution.attribute})`\r\n          if(t.distribution.default){\r\n            let pct = t.distribution.default * 100\r\n            distLabel += `, default ${pct}%`\r\n          }\r\n        } else {\r\n          let pct = t.distribution * 100\r\n          distLabel = `${pct}%`\r\n        }\r\n        if(module.states[t.transition]){\r\n          if(selectedState && t.transition === selectedState.name && selectedState.name !== name){\r\n            transitionClassName = '';\r\n          }\r\n\r\n          if(selectedStateTransition === i){\r\n            transitionClassName += ' transition-selected';\r\n          }\r\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"${distLabel}\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\r\n        } else {\r\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\r\n        }\r\n      })\r\n      return out_transitions\r\n    } else if(state.table_transition !== undefined){\r\n        let out_transitions = ''\r\n        state.table_transition.transitions.forEach( (t, i) => {\r\n        let transitionClassName = className\r\n        let pct = t.default_probability * 100\r\n        let distLabel = `${pct}%`\r\n        if(module.states[t.transition]){\r\n          if(selectedState && t.transition === selectedState.name && selectedState.name !== name){\r\n            transitionClassName = '';\r\n          }\r\n\r\n          if(selectedStateTransition === i){\r\n            transitionClassName += ' transition-selected';\r\n          }\r\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"See Table (def: ${distLabel})\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\r\n          } else {\r\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\r\n        }\r\n      })\r\n      return out_transitions\r\n    } else if (state.conditional_transition !== undefined){\r\n      let out_transitions = ''\r\n      state.conditional_transition.forEach( (t, i ) => {\r\n        let transitionClassName = className\r\n        let cnd = t.condition !== undefined ? logicDetails(t.condition) : 'else';\r\n        if(module.states[t.transition]){\r\n          if(selectedState && t.transition === selectedState.name){\r\n            transitionClassName = ''\r\n          }\r\n          if(selectedStateTransition === i){\r\n            transitionClassName += ' transition-selected';\r\n          }\r\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"${i+1}. ${cnd}\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\r\n        } else {\r\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}\\n`);\r\n        }\r\n      })\r\n     return out_transitions\r\n\r\n    } else if (state.complex_transition !== undefined){\r\n      let transitions = {}\r\n      let nodeHighlighted = {}\r\n      state.complex_transition.forEach( (t, i) => {\r\n        let cnd = t.condition !== undefined ? logicDetails(t['condition']) : 'else'\r\n        if(t.transition !== undefined){\r\n          if(module.states[t.transition]){\r\n            let nodes = `  \"${escapedName}\" -> \"${t.transition}\"`\r\n            if(selectedState && t.transition === selectedState.name){\r\n              nodeHighlighted[nodes] = 'standard'\r\n            }\r\n            if(selectedState && name === selectedState.name){\r\n              nodeHighlighted[nodes] = 'highlighted'\r\n            }\r\n            if(transitions[nodes] === undefined){\r\n              transitions[nodes] = [];\r\n            }\r\n            transitions[nodes].push(cnd)\r\n          } else {\r\n            console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\r\n          }\r\n        } else {\r\n          t.distributions.forEach( dist => {\r\n            if(module.states[dist.transition]){\r\n              let pct = dist.distribution * 100\r\n              let nodes = `  \"${escapedName}\" -> \"${dist.transition}\"`\r\n              if(selectedState && dist.transition === selectedState.name){\r\n                nodeHighlighted[nodes] = 'standard'\r\n              }\r\n              if(selectedState && name === selectedState.name){\r\n                nodeHighlighted[nodes] = 'highlighted'\r\n              }\r\n              if(transitions[nodes] === undefined){\r\n                transitions[nodes] = [];\r\n              }\r\n              transitions[nodes].push(`${cnd}: ${pct}%`)\r\n            } else {\r\n              console.log(`NO SUCH NODE TO TRANSITION TO: ${dist.transition} FROM ${name}`);\r\n            }\r\n          })\r\n        }\r\n      })\r\n\r\n      let out_transitions = ''\r\n      Object.keys(transitions).forEach( (trans, index) => {\r\n        let transitionClassName = className\r\n        if(nodeHighlighted[trans] === 'standard'){\r\n          transitionClassName = ''\r\n        } else if(nodeHighlighted[trans] === 'highlighted'){\r\n          transitionClassName='transition-highlighted'\r\n        }\r\n        if(selectedStateTransition === index){\r\n          transitionClassName += ' transition-selected';\r\n        }\r\n        out_transitions += `${trans} [label = \"${transitions[trans].join(',\\\\n')}\", class = \"transition transition-index_${index} ${transitionClassName}\"]\\n`\r\n      })\r\n\r\n      return out_transitions;\r\n\r\n    }\r\n\r\n    return ''\r\n\r\n  }).join('')\r\n\r\n}\r\n\r\nconst stateDescription = (state) =>{\r\n\r\n  let details = ''\r\n\r\n  switch(state['type']){\r\n    case 'Initial':\r\n    case 'Terminal':\r\n      details = ''\r\n      break;\r\n    case 'Guard':\r\n      details = \"Allow if \" + logicDetails(state['allow'])\r\n      break;\r\n\r\n    case 'Delay':\r\n    case 'Death':\r\n      if(state['range'] !== undefined){\r\n        let r = state['range']\r\n        details = `${r['low']} - ${r['high']} ${r['unit']}`\r\n      } else if (state['exact'] !== undefined) {\r\n        let e = state['exact']\r\n        details = `${e['quantity']} ${e['unit']}`\r\n      }\r\n      break;\r\n    case 'Encounter':\r\n      if(state['wellness']){\r\n        details = 'Wait for regularly scheduled wellness encounter\\\\n'\r\n      }\r\n      break;\r\n    case 'EncounterEnd':\r\n      details = 'End the current encounter'\r\n      if(state['discharge_disposition']){\r\n       let code = state['discharge_disposition']\r\n       details += `\\\\lDischarge Disposition: [${code['code']}] ${code['display']}`\r\n      }\r\n      break;\r\n    case 'SetAttribute':\r\n      let v = state['value']\r\n      details = `Set '${state[\"attribute\"]}' = ${(v === undefined || v === null || v === \"\") ? 'nil' : v}`\r\n      break;\r\n    case 'Symptom':\r\n     let s = state['symptom']\r\n     let p = state['probability']\r\n      if(state.range !== undefined){\r\n        let r = state['range']\r\n        details = `${s}: ${r['low']} - ${r['high']}`\r\n      } else if (state.exact !== undefined) {\r\n        let e = state['exact']\r\n        details = `${s}: ${e['quantity']}`\r\n      }\r\n      if (p && p < 1.0 && p > 0) {\r\n        let pct = p*100;\r\n        details += ` (${pct}%)`\r\n      }\r\n      break;\r\n    case 'Observation':\r\n      let unit = state['unit']\r\n      if(unit){\r\n        unit = \"in \" + unit.replace('{','(').replace('}',')')\r\n      }\r\n\r\n      if(state.vital_sign !== undefined) {\r\n        details = `Record value from Vital Sign '${state[\"vital_sign\"]}' ${unit}\\\\l`\r\n      } else if (state.attribute !== undefined) {\r\n        details = `Record value from Attribute '${state[\"attribute\"]}' ${unit}\\\\l`\r\n      } else if(state.range !== undefined){\r\n        let r = state['range']\r\n        details = `Record value between: ${r['low']} - ${r['high']} ${unit}\\\\l`\r\n      } else if (state.exact !== undefined) {\r\n        let e = state['exact']\r\n        details = `Record value ${e['quantity']} ${unit}\\\\l`\r\n      } else if (state.value_code !== undefined) {\r\n        let v = state['value_code']\r\n        details = `Record value ${v['system']}[${v['code']}]: ${v['display']}\\\\l`\r\n      }\r\n      break;\r\n\r\n    case 'ImagingStudy':\r\n      let series = state['series'];\r\n      if (series.length > 0) {\r\n        let primarySeries = series[0];\r\n        let primaryModality = primarySeries['modality'];\r\n        let primaryBodySite = primarySeries['body_site'];\r\n\r\n        details = `DICOM-DCM[${primaryModality['code']}]: ${primaryModality['display']}\\\\l`\r\n        details += `SNOMED-CT[${primaryBodySite['code']}]: Body Site: ${primaryBodySite['display']}\\\\l`\r\n      }\r\n      break;\r\n\r\n    case 'Counter':\r\n      details = `${state['action']} value of attribute '${state[\"attribute\"]}' by ${state['amount'] || 1}`\r\n      break;\r\n    case 'VitalSign':\r\n      let vs = state['vital_sign']\r\n      let unitv = state['unit']\r\n      if(state.range !== undefined){\r\n        let r = state['range']\r\n        details = `Set ${vs}: ${r['low']} - ${r['high']} ${unitv}`\r\n      } else if (state.exact !== undefined) {\r\n        let e = state['exact']\r\n        details = `Set ${vs}: ${e['quantity']} ${unitv}`\r\n      }\r\n      break;\r\n    case 'CallSubmodule':\r\n      details = `Call submodule '${state['submodule']}'`\r\n      break;\r\n    case 'MultiObservation':\r\n    case 'DiagnosticReport':\r\n      if(state.observations && state.observations.length > 0){\r\n        let diagType = ['Type']\r\n        let diagValue = ['Value']\r\n        let diagUnits = ['Unit'];\r\n        state.observations.forEach( (s,i) => {\r\n          let unit = s['unit']\r\n          if(unit){\r\n            unit = unit.replace('{','(').replace('}',')')\r\n          }\r\n          diagType.push(s.codes.map(c => c.display).join('\\\\l'))\r\n          diagUnits.push(unit)\r\n\r\n          if(s.vital_sign !== undefined) {\r\n            diagValue.push(`Vital Sign: '${s[\"vital_sign\"]}'`)\r\n          } else if (s.attribute !== undefined) {\r\n            diagValue.push(`Attribute: '${s[\"attribute\"]}'`)\r\n          } else if(s.range !== undefined){\r\n            let r = s['range']\r\n            diagValue.push(`${r['low']} - ${r['high']}`)\r\n          } else if (s.exact !== undefined) {\r\n            let e = s['exact']\r\n            diagValue.push(`${e['quantity']}`);\r\n          } else if (s.value_code !== undefined) {\r\n            let v = s['value_code']\r\n            diagValue.push(`${v['system']}[${v['code']}]: ${v['display']}`);\r\n          }\r\n        });\r\n        details += `{${diagType.map(t => t).join('|')}}|`;\r\n        details += `{${diagValue.map(t => t).join('|')}}|`;\r\n        details += `{${diagUnits.map(t => t).join('|')}}|`;\r\n      } else {\r\n        details = `No Observations\\\\l`;\r\n      }\r\n\r\n      break;\r\n    default:\r\n      break;\r\n\r\n  }\r\n\r\n  if(state.codes !== undefined){\r\n    state['codes'].forEach( code => {\r\n      details = details + code['system'] + \"[\" + code['code'] + \"]: \" + code['display'] + \"\\\\l\"\r\n    })\r\n  }\r\n\r\n  if(state.target_encounter !== undefined){\r\n   let verb = 'Perform'\r\n\r\n    switch(state['type']){\r\n      case 'ConditionOnset':\r\n      case 'AllergyOnset':\r\n        verb = 'Diagnose'\r\n        break;\r\n      case 'MedicationOrder':\r\n        verb = 'Prescribe'\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    details = details + verb + \" at \" + state['target_encounter'] + \"\\\\l\"\r\n  }\r\n\r\n  if(state.reason){\r\n    details = details + `Reason: ${state['reason']}\\\\l`\r\n  }\r\n  if(state.medication_order){\r\n    details = details + `Prescribed at: ${state['medication_order']}\\\\l`\r\n  }\r\n  if(state.condition_onset){\r\n    details = details + `Onset at: ${state['condition_onset']}\\\\l`\r\n  }\r\n  if(state.allergy_onset){\r\n    details = details + `Onset at: ${state['allergy_onset']}\\\\l`\r\n  }\r\n  if(state.careplan){\r\n    details = details + `Prescribed at: ${state['careplan']}\\\\l`\r\n  }\r\n  if(state.assign_to_attribute){\r\n    details = details + `Assign to Attribute: '${state['assign_to_attribute']}'\\\\l`\r\n  }\r\n  if(state.administration){\r\n    details = details + `Medication is administered\\\\l`\r\n  }\r\n  if(state.referenced_by_attribute){\r\n    details = details + `Referenced By Attribute: '${state['referenced_by_attribute']}'\\\\l`\r\n  }\r\n  if(state.activities){\r\n    details = details + \"\\\\lActivities:\\\\l\"\r\n    state['activities'].forEach( activity => {\r\n      details = details + activity['system'] + \"[\" + activity['code'] + \"]: \" + activity['display'] + \"\\\\l\"\r\n    })\r\n  }\r\n  if(state.goals){\r\n    details = details + \"\\\\lGoals:\\\\l\"\r\n    state['goals'].forEach( goal => {\r\n      if(goal['text']){\r\n        details = details + goal['text'] + \"\\\\l\"\r\n      } else if(goal['codes']) {\r\n        let code = goal['codes'][0]\r\n        details = details + code['system'] + \"[\" + code['code'] + \"]: \" + code['display'] + \"\\\\l\"\r\n      } else if(goal['observation']) {\r\n        let logic = goal['observation']\r\n        let obs = findReferencedType(logic)\r\n        details = details + `Observation ${obs} \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\r\n      }\r\n    })\r\n  }\r\n  if(state.duration){\r\n    let d = state['duration']\r\n    details = `${details}\\\\lDuration: ${d['low']} - ${d['high']} ${d['unit']}\\\\l`\r\n  }\r\n  if(state.category){\r\n    details = `${details}Category: ${state['category']}\\\\l`\r\n  }\r\n\r\n  return details;\r\n}\r\n\r\nconst logicDetails = logic => {\r\n\r\n  switch(logic['condition_type']){\r\n    case 'And':\r\n    case 'Or':\r\n      let subsWhen =logic['conditions'].map( c => {\r\n        if(c['condition_type'] === 'and' || c['condition_type'] === 'or'){\r\n          return \"(\\\\l\" + logicDetails(c) + \")\\\\l\"\r\n        } else {\r\n          return logicDetails(c)\r\n        }\r\n      })\r\n      return subsWhen.join(logic['condition_type'].toLowerCase() + ' ')\r\n    case 'At Least':\r\n    case 'At Most':\r\n      let threshold = logic['minimum'] || logic['maximum']\r\n      let subsOr = logic['conditions'].map( c => {\r\n        if(c['condition_type'] === 'and' || c['condition_type'] === 'or'){\r\n          return \"(\\\\l\" + logicDetails(c) + \")\\\\l\"\r\n        } else {\r\n          return logicDetails(c)\r\n        }\r\n      });\r\n      return `${logic['condition_type']} ${threshold} of:\\\\l- ${subsOr.join('- ')}`\r\n    case 'Not':\r\n      let condition = logicDetails(logic['condition'])\r\n      return `not ${condition}`\r\n    case 'Gender':\r\n      return `gender is '${logic['gender']}'\\\\l`\r\n    case 'Age':\r\n      return `age \\\\${logic['operator']} ${logic['quantity']} ${logic['unit']}\\\\l`\r\n    case 'Socioeconomic Status':\r\n      return `${logic['category']} Socioeconomic Status\\\\l`\r\n    case 'Race':\r\n      return `race is '${logic['race']}'\\\\l`\r\n    case 'Date':\r\n      if (logic.year !== undefined) {\r\n        return `Year is \\\\${logic['operator']} ${logic['year']}\\\\l`\r\n      } else if (logic.month !== undefined) {\r\n        return `Month is \\\\${logic['operator']} ${logic['month']}\\\\l`\r\n      } else if (logic.date !== undefined) {\r\n        let d = logic['date']\r\n        return `Date is \\\\${logic['operator']} ${d['year']}-${d['month']}-${d['day']} ${d['hour']}:${d['minute']}:${d['second']}.${d['millisecond']}\\\\l`\r\n      }\r\n    case 'Symptom':\r\n      return `Symptom: '${logic['symptom']}' \\\\${logic['operator']} ${logic['value']}\\\\l`\r\n    case 'PriorState':\r\n      let prior_description = `state '${logic['name']}' has been processed`\r\n      if(logic.since !== undefined){\r\n        prior_description = `${prior_description} since ${logic.since}`\r\n      }\r\n      if(logic.within !== undefined){\r\n        prior_description = `${prior_description} within ${logic.within['quantity']} ${logic.within['unit']}`\r\n      }\r\n      return `${prior_description} \\\\l`\r\n    case 'Attribute':\r\n      return `Attribute: '${logic['attribute']}' \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\r\n    case 'Observation':\r\n      let obs = findReferencedType(logic)\r\n      if (logic.operator !== 'is nil' && logic.operator !== 'is not nil' && logic.operator.id !== 'is nil' && logic.operator.id !== 'is not nil'){\r\n        if(logic.value !== undefined){\r\n          return `Observation ${obs} \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\r\n        } else if (logic.value_code !== undefined) {\r\n          return `Observation ${obs} \\\\${logic['operator']} ${logic.value_code['system']}[${logic.value_code['code']}]: ${logic.value_code['display']}\\\\l`\r\n        }\r\n      } else {\r\n        return `Observation ${obs} \\\\${logic['operator']}\\\\l`\r\n      }\r\n\r\n    case 'Vital Sign':\r\n      return `Vital Sign ${logic['vital_sign']} \\\\${logic['operator']} ${logic['value']}\\\\l`\r\n    case 'Active Condition':\r\n      let cond = findReferencedType(logic)\r\n      return `Condition ${cond} is active\\\\l`\r\n    case 'Active CarePlan':\r\n      let plan = findReferencedType(logic)\r\n      return `CarePlan ${plan} is active\\\\l`\r\n    case 'Active Medication':\r\n      let med = findReferencedType(logic)\r\n      return `Medication ${med} is active\\\\l`\r\n    case 'Active Allergy':\r\n      let alg = findReferencedType(logic)\r\n      return `Allergy ${alg} is active\\\\l`\r\n    case 'True':\r\n    case 'False':\r\n      return logic['condition_type']\r\n    default:\r\n      return `Unknown Condition: ${logic['condition_type']}`\r\n\r\n  }\r\n}\r\n\r\nconst findReferencedType = (logic) => {\r\n  if(logic['codes']){\r\n    let code = logic['codes'][0]\r\n    return `'${code['system']} [${code['code']}]: ${code['display']}'`\r\n  } else if (logic['referenced_by_attribute']) {\r\n    return `Referenced By Attribute: '${logic['referenced_by_attribute']}'`\r\n  }\r\n  return `Error with referenced types: ${logic['condition_type']} condition must be specified by code or attribute`\r\n}\r\n\r\nconst findTransitions = (obj, ret) => {\r\n\r\n  if(!ret) ret = {};\r\n  if (!obj) return ret;\r\n  if (obj instanceof Array) {\r\n    for (let i in obj) {\r\n        ret = Object.assign({}, ret, findTransitions(obj[i], {}))\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  if (obj['direct_transition']) ret[obj['direct_transition']] = true\r\n  if (obj['transition']) ret[obj['transition']] = true;\r\n\r\n  if ((typeof obj === \"object\") && (obj !== null) ){\r\n    let children = Object.keys(obj);\r\n    if (children.length > 0){\r\n      for (let i = 0; i < children.length; i++ ){\r\n        ret = Object.assign({}, ret,findTransitions(obj[children[i]], {}));\r\n      }\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\nconst leaveUndefinedBlank = (value) => {\r\n  if(value === undefined){\r\n    return '';\r\n  } else {\r\n    return ' ' + value;\r\n  }\r\n}\r\n\r\nconst escapeId = (name) => {\r\n  return cleanString(name, {'?': '', '\"': \"\"});\r\n};\r\n\r\nconst escapeName = (name) => {\r\n  return  cleanString(name, {'\"': '\\\\'});\r\n};\r\n\r\nconst escapeLabel = (label) => {\r\n\r\n  // note: order matters; in practice order is retained in browsers but we may want to make an array\r\n  const mapObj = {\r\n        \"&\" : \"&amp;\",\r\n        \"<\" : \"&lt;\",\r\n        \">\" : \"&gt;\",\r\n        '\"' : '\\\\\"',\r\n        };\r\n\r\n  return cleanString(label, mapObj);\r\n\r\n}\r\n\r\nexport const svgDefs = `<defs>\r\n\r\n  <filter id=\"outershadow\" height=\"200%\" width=\"200%\" x=\"-75%\" y=\"-75%\" color-interpolation-filters=\"sRGB\">\r\n    <feMorphology operator=\"dilate\" radius=\"3\" in=\"SourceAlpha\" result=\"thicken\" />\r\n    <feGaussianBlur in=\"thicken\" stdDeviation=\"4\" result=\"blurred\" />\r\n    <feFlood flood-color=\"#336699\" result=\"glowColor\" />\r\n    <feComposite in=\"glowColor\" in2=\"blurred\" operator=\"in\" result=\"glowComposite\" />\r\n    <feMerge>\r\n      <feMergeNode in=\"glowComposite\"/>\r\n      <feMergeNode in=\"SourceGraphic\"/>\r\n    </feMerge>\r\n  </filter>\r\n</defs>`;\r\n\r\n","// @flow\r\nimport React, { Component } from 'react';\r\n\r\nimport svgPanZoom from  'svg-pan-zoom';\r\n\r\nimport Viz from 'viz.js';\r\nimport {generateDOT,svgDefs} from '../../utils/graphviz';\r\n\r\nimport './ModuleGraph.css';\r\n\r\nimport type { Module } from './types/Module';\r\nimport type { State } from './types/State';\r\n\r\ntype Props = {\r\n  module: Module,\r\n  onClick: (id:string) => mixed,\r\n  selectedState: State\r\n}\r\n\r\nclass ModuleGraph extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onPanZoom = this.onPanZoom.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n    this.onMouseDown = this.onMouseDown.bind(this);\r\n    this.bold = false;\r\n    this.lastDOT = '';\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.writeSVG(this.props.module)\r\n    this.mount.addEventListener('mouseup', this.onMouseUp);\r\n    this.mount.addEventListener('mousedown', this.onMouseDown);\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps: Props){\r\n\r\n    if(nextProps.module.name !== this.props.module.name){\r\n      this.panZoomSettings = null\r\n    }\r\n\r\n    this.writeSVG(nextProps.module, nextProps.selectedState, nextProps.selectedStateTransition);\r\n\r\n    if(nextProps.fullscreen !== this.props.fullscreen){\r\n      if(nextProps.fullscreen){\r\n        this.svgPanZoom.panBy({x: 250, y: 0});\r\n        this.customPanBy({x: -100, y: 0})\r\n      }else{\r\n        this.svgPanZoom.panBy({x: -250, y: 0});\r\n        this.customPanBy({x: 100, y: 0})\r\n      }\r\n    }\r\n\r\n    if(this.panZoomSettings){\r\n      this.blockPanZoomEvent = true\r\n      this.svgPanZoom.zoom(this.panZoomSettings.zoom, true);\r\n      this.svgPanZoom.pan(this.panZoomSettings.pan, true);\r\n      this.blockPanZoomEvent = false\r\n    }\r\n\r\n  }\r\n\r\n  customPanBy(amount) { // {x: 1, y: 2}\r\n    var animationTime = 300 // ms\r\n      , animationStepTime = 15 // one frame per 30 ms\r\n      , animationSteps = animationTime / animationStepTime\r\n      , animationStep = 0\r\n      , intervalID = null\r\n      , stepX = amount.x / animationSteps\r\n      , stepY = amount.y / animationSteps\r\n\r\n    intervalID = setInterval(() => {\r\n      if (animationStep++ < animationSteps) {\r\n        if(this.svgPanZoom){\r\n        this.svgPanZoom.panBy({x: stepX, y: stepY})\r\n        }\r\n      } else {\r\n        // Cancel interval\r\n        clearInterval(intervalID)\r\n      }\r\n    }, animationStepTime)\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n        <div ref={mount => this.mount = mount } className={'Module ' + (this.props.fullscreen ? \"Module-fullscreen\" : 'Module-standard-screen')}>\r\n         <svg width=\"50000px\" height=\"50000px\" xmlns=\"http://www.w3.org/2000/svg\" style={{opacity: .3}}>\r\n           <defs>\r\n            <pattern id=\"smallGrid\" width=\"10\" height=\"10\" patternUnits=\"userSpaceOnUse\">\r\n              <path d=\"M 10 0 L 0 0 0 10\" fill=\"none\" stroke=\"#95b4cf\" strokeWidth=\"0.5\"/>\r\n            </pattern>\r\n            <pattern id=\"grid\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\">\r\n              <rect width=\"100\" height=\"100\" fill=\"url(#smallGrid)\"/>\r\n              <path d=\"M 100 0 L 0 0 0 100\" fill=\"none\" stroke=\"#95b4cf\" strokeWidth=\"1\"/>\r\n            </pattern>\r\n          </defs>\r\n          <g>\r\n            <rect width=\"100%\" height=\"100%\" style={{\"transform\": \"translate(-50%, -50%)\"}} fill=\"url(#grid)\" />\r\n          </g>\r\n        </svg>\r\n        <div style={{\"position\":\"absolute\", \"top\": 0, \"left\": 0, \"width\": \"100%\", \"height\": '100%'}} className=\"Module-graph\">\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  onMouseUp(e) {\r\n    if(this.fireClickOnMouseUp){\r\n      this.props.onClick();\r\n    }\r\n  }\r\n  onMouseDown() {\r\n    this.fireClickOnMouseUp = true;\r\n  }\r\n\r\n  onPanZoom() {\r\n    if(this.blockPanZoomEvent) return;\r\n\r\n    this.fireClickOnMouseUp = false;\r\n    this.panZoomSettings = {pan: this.svgPanZoom.getPan(), zoom: this.svgPanZoom.getZoom()};\r\n\r\n    this.mount.children[0].children[1].setAttribute('transform', this.mount.children[1].children[0].children[1].attributes['transform'].value)\r\n\r\n    let linesShouldBold = Math.max(this.originalWidth, this.originalHeight) / this.svgPanZoom.getZoom() > 1500\r\n\r\n    if(linesShouldBold && !this.bold){\r\n      this.bold = true\r\n      this.mount.children[1].className = 'Module bold-lines'\r\n    } else if(!linesShouldBold && this.bold){\r\n      this.bold = false\r\n      this.mount.children[1].className = 'Module'\r\n    }\r\n\r\n  }\r\n\r\n  writeSVG(module: Module, selectedState: State, selectedStateTransition: Number){\r\n\r\n    const dot = generateDOT(module, selectedState, (selectedStateTransition: Number));\r\n    if(dot === this.lastDOT){\r\n      return;\r\n    }\r\n\r\n    this.lastDOT = dot;\r\n\r\n    /* write SVG */\r\n    try {\r\n      this.mount.children[1].innerHTML= Viz(dot).replace('</svg>', svgDefs + '</svg>');\r\n    } catch (ex) {\r\n      alert('Invalid module: ' + ex.message)\r\n      this.mount.children[1].innerHTML = `<svg width=\"10px\" height=\"10px\"/>`;\r\n    }\r\n\r\n    let svg = this.mount.children[1].children[0]\r\n\r\n    /* Add event handlers for states */\r\n    Object.keys(module.states).forEach( s => {\r\n      let el = document.getElementById(`node_${s.replace('?','')}`);     \r\n\r\n      if(el){\r\n        // force rerender because of a pan bug\r\n        el.addEventListener('mouseup', (e) => {this.lastDOT = null;e.stopPropagation(); this.props.onClick(s)});\r\n\r\n        if(selectedState && s === selectedState.name){\r\n          // assume path is at index 1 to speed things up.  bad assumption?\r\n          el.children[1].setAttribute('filter', 'url(#outershadow)')\r\n        } else {\r\n          el.children[1].removeAttribute('filter')\r\n        }\r\n      }\r\n\r\n    })\r\n\r\n    // Removes the title elmeent generated by graph viz that causes a \"G\" to always show on mouse hover\r\n    const unnecessaryGTitle = document.querySelector('svg > g > title');\r\n    if(unnecessaryGTitle){\r\n      unnecessaryGTitle.remove();\r\n    }\r\n\r\n    const unnecessaryFill = document.querySelector('svg > g > polygon');\r\n    if(unnecessaryFill){\r\n      unnecessaryFill.remove();\r\n    }\r\n\r\n    /* Add event handlers for transitions, and increase their 'hit box' size */\r\n    document.querySelectorAll('.edge.transition').forEach( group => {\r\n      let originator = group.querySelector('title').innerHTML.split('-&gt;')[0]\r\n      let hitLine = group.querySelector('path').cloneNode(true)\r\n      let transitionIndex = null;\r\n      let transitionIndexClass = group.className.baseVal.split(' ').find(t => t.startsWith('transition-index'));\r\n      if(transitionIndexClass){\r\n        try{\r\n          transitionIndex = parseInt(transitionIndexClass.split('_')[1])\r\n        } catch(e){\r\n          // just ignore if not a number\r\n        }\r\n\r\n      }\r\n      hitLine.setAttribute('class', 'transition-hitbox');\r\n      hitLine.setAttribute('stroke-width', 20)\r\n      hitLine.setAttribute('opacity', 0)\r\n      group.appendChild(hitLine)\r\n\r\n      group.querySelectorAll('path,text').forEach( path => {\r\n        // force rerender because of a pan bug\r\n        path.addEventListener('mouseup', (e) => {this.lastDOT = null;e.stopPropagation(); this.props.onClick(originator, transitionIndex)});\r\n      })\r\n    })\r\n\r\n    /* Bump the transition labels to the right because it is too crowded */\r\n    document.querySelectorAll('svg .edge text').forEach(t => t.setAttribute('x', parseFloat(t.getAttribute('x'))+5))\r\n\r\n    /* add pan/zoom if available */\r\n    if(typeof svgPanZoom === \"function\"){\r\n\r\n      this.originalWidth = svg.attributes.width.value.match(/\\d+/g).map(Number)[0];\r\n      this.originalHeight = svg.attributes.height.value.match(/\\d+/g).map(Number)[0];\r\n\r\n      let offsetLeft = this.mount.children[1].getBoundingClientRect().x\r\n      let offsetTop = this.mount.children[1].getBoundingClientRect().y\r\n      let visibleWidth = this.mount.children[1].getBoundingClientRect().width - offsetLeft;\r\n      let visibleHeight = this.mount.children[1].getBoundingClientRect().height - offsetTop;\r\n\r\n      this.mount.children[1].children[0].setAttribute('width', '100%')\r\n      this.mount.children[1].children[0].setAttribute('height', '100%')\r\n\r\n      let zoomFactor = 1\r\n\r\n      if(this.originalWidth / this.originalHeight > visibleWidth / visibleHeight){\r\n        //width constrained\r\n        zoomFactor = visibleWidth / this.originalWidth;\r\n      } else {\r\n        //height constrained\r\n        zoomFactor = visibleHeight / this.originalHeight;\r\n      }\r\n\r\n      this.svgPanZoom = svgPanZoom(this.mount.children[1].children[0],{\r\n          controlIconsEnabled: false, // BUGGY BECAUSE OF EVENT HANDLERS \r\n          minZoom: .1,\r\n          onPan: this.onPanZoom,\r\n          onZoom: this.onPanZoom,\r\n        });\r\n\r\n      let panZoomControlsElement = document.getElementById('svg-pan-zoom-controls');\r\n\r\n      if(panZoomControlsElement){\r\n        /* DISABLED BECAUSE BUGGY WITH OTHER EVENT HANDLERS */\r\n        panZoomControlsElement.setAttribute(\"transform\", `translate(${visibleWidth-100} ${visibleHeight-150}) scale(.75)`)\r\n        document.getElementById('svg-pan-zoom-zoom-in').addEventListener('mouseup', (e) => {this.svgPanZoom.zoomIn()});\r\n        document.getElementById('svg-pan-zoom-zoom-out').addEventListener('mouseup', (e) => {this.svgPanZoom.zoomOut()});\r\n        document.getElementById('svg-pan-zoom-reset-pan-zoom').addEventListener('mouseup', (e) => {\r\n          e.stopPropagation();\r\n          this.svgPanZoom.pan({x: this.svgPanZoom.getPan().x - offsetLeft/2 , y: 50}, true)\r\n          this.svgPanZoom.zoom(Math.pow(.8,zoomFactor), true);\r\n        });\r\n      }\r\n\r\n      if(!this.panZoomSettings){\r\n        /* first time load of module */\r\n        /* center and bump down a bit */\r\n        this.svgPanZoom.pan({x: this.svgPanZoom.getPan().x - offsetLeft/2 , y: 50}, true)\r\n        this.svgPanZoom.zoom(Math.pow(.8,zoomFactor), true);\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default ModuleGraph;\r\n","import React, {useMemo} from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\n\r\nconst baseStyle = {\r\n  flex: 1,\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  alignItems: 'center',\r\n  padding: '25px',\r\n  borderWidth: 2,\r\n  borderRadius: '5px',\r\n  marginBottom: '15px',\r\n  borderColor: '#666666',\r\n  borderStyle: 'dashed',\r\n  backgroundColor: '#ffffff',\r\n  outline: 'none',\r\n  transition: 'border .15s ease-in-out'\r\n};\r\n\r\nconst activeStyle = {\r\n  borderColor: '#336699',\r\n  backgroundColor: '#dceaef',\r\n  color: '#336699'\r\n};\r\n\r\nconst acceptStyle = {\r\n  borderColor: '#339999',\r\n  cursor: 'hand'\r\n};\r\n\r\nconst rejectStyle = {\r\n  borderColor: '#ff1744',\r\n  backgroundColor: '#ffeeee',\r\n  cursor: 'no-drop'\r\n};\r\n\r\nfunction StyledDropzone(props) {\r\n  const {\r\n    getRootProps,\r\n    getInputProps,\r\n    isDragActive,\r\n    isDragAccept,\r\n    isDragReject\r\n  } = useDropzone({accept: 'application/json',onDrop:props.onDrop});\r\n\r\n  const style = useMemo(() => ({\r\n    ...baseStyle,\r\n    ...(isDragActive ? activeStyle : {}),\r\n    ...(isDragAccept ? acceptStyle : {}),\r\n    ...(isDragReject ? rejectStyle : {})\r\n  }), [\r\n    isDragActive,\r\n    isDragReject\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"LoadModule-dropzone\">\r\n      <div {...getRootProps({style})}>\r\n        <input {...getInputProps()} />\r\n        <p>Drop files here or click to open saved modules.</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StyledDropzone;\r\n","import React, { Component } from 'react';\r\nimport './LoadModule.css';\r\nimport {generateDOT} from '../../utils/graphviz';\r\nimport StyledDropzone from './StyledDropZone';\r\n\r\nclass LoadModule extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {json: '', selectedOption: 'core'}\r\n  }\r\n\r\n  loadModule = (json) => {\r\n    try {\r\n      let module = JSON.parse(json)\r\n\r\n      if(module.name === undefined){\r\n        throw new Error('Module must have a name.')\r\n      }\r\n\r\n      if(module.states === undefined || Object.keys(module.states).length === 0){\r\n        throw new Error('Module must have at least one state.')\r\n      }\r\n\r\n      let tableMessage =  ''\r\n\r\n      // need to get the tables for any table transition\r\n      for (var key in module.states)\r\n      {\r\n        if (module.states[key].table_transition != null)\r\n        { \r\n          tableMessage += key.toString() + ' & '\r\n          \r\n          // put default data in for state of the table transition\r\n          module.states[key].table_transition.lookup_table_name_ModuleBuilder = module.states[key].table_transition.transitions[0].lookup_table_name;\r\n          module.states[key].table_transition.viewTable = false;    \r\n          module.states[key].table_transition.lookuptable = '';\r\n        }\r\n      }\r\n\r\n      if (tableMessage.length > 0)\r\n      {\r\n        tableMessage = tableMessage.substr(0, tableMessage.length - 2);\r\n        // make a pop-up to tell the user to enter the table data\r\n        alert('Table Transition must be filled out in Module Builder for ' + tableMessage)\r\n      }\r\n      // this will throw an error if the module is incomprehensible\r\n      let dot = generateDOT(module);\r\n\r\n      this.props.newModule(module)\r\n      this.setState({...this.state, json: '', selectedOption: 'core'})\r\n\r\n    } catch (ex) {\r\n      alert('Error creating module: ' + ex.message);\r\n    }\r\n\r\n  }\r\n\r\n  onClick = (key) => {\r\n    return () => {\r\n      this.setState({...this.state, json: '', selectedOption: 'core'})\r\n      this.props.push('#' + key);   \r\n    }\r\n  }\r\n\r\n  onDrop = (files) => {\r\n    files.forEach(file => {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = () => {\r\n        this.loadModule(reader.result);\r\n      };\r\n      reader.readAsText(file);\r\n    });\r\n  }\r\n\r\n  onLoadJSON = () => {\r\n    this.loadModule(this.state.json);\r\n  };\r\n\r\n  onOptionClick = (key) =>{\r\n    return () => {\r\n      this.setState({...this.state, selectedOption: key});\r\n    }\r\n  }\r\n\r\n  updateJson = (event) => {\r\n    this.setState({...this.state, json: event.target.value})\r\n  }\r\n\r\n  renderFooter = () => {\r\n    let loadButton = <span/>\r\n    if(this.state.selectedOption === 'json'){\r\n        loadButton = <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.onLoadJSON}>Load</button>\r\n    }\r\n    let closeButton = <span/>\r\n    if(!this.props.welcome){\r\n      closeButton = <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.props.onHide}>Close</button>\r\n    }\r\n\r\n    return <div className=\"modal-footer\" style={{height: 69}}>\r\n      {loadButton}\r\n      {closeButton}\r\n    </div>\r\n\r\n  }\r\n\r\n  renderDetails = () => {\r\n\r\n    switch(this.state.selectedOption){\r\n      case 'core':\r\n        return (\r\n          <ul className='LoadModule-list'>\r\n            { Object.keys(this.props.library).filter(n => (n.indexOf('/') === -1)).map( (key, index) => {\r\n              let module = this.props.library[key]\r\n              return (\r\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{module.name}</button></li>\r\n              )\r\n            })}\r\n          </ul>\r\n        )\r\n\r\n      case 'submodules':\r\n        return (\r\n          <ul className='LoadModule-list'>\r\n            { Object.keys(this.props.library).filter(n => (n.indexOf('/') > -1)).map( (key, index) => {\r\n              let module = this.props.library[key]\r\n              return (\r\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{key.split('/')[0] + ': ' + module.name}</button></li>\r\n              )\r\n            })}\r\n          </ul>\r\n        )\r\n\r\n      case 'my':\r\n        return (\r\n          <ul className='LoadModule-list'>\r\n            { Object.keys(this.props.modules).map( (key, index) => {\r\n              let module = this.props.modules[key]\r\n              return (\r\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{module.name} ({key})</button></li>\r\n              )\r\n            })}\r\n          </ul>\r\n        )\r\n\r\n\r\n      case 'json':\r\n        return (\r\n          <textarea id='loadJSON' value={this.state.json} onChange={this.updateJson}></textarea>\r\n        )\r\n\r\n      case 'git':\r\n        let moduleList = null;\r\n        let submoduleList = null;\r\n        if (this.state.Modules) {\r\n          moduleList = (\r\n          <div className='col-4 nopadding'>\r\n            <ul className='LoadModule-list'>\r\n              {this.state.Folders}\r\n              {this.state.Modules}\r\n            </ul>\r\n          </div>\r\n          )\r\n          if (this.state.Submodules) {\r\n            submoduleList = (\r\n              <div className='col-4 nopadding'>\r\n                <ul className='LoadModule-list'>\r\n                  {this.state.Submodules}\r\n                </ul>\r\n              </div>\r\n            )\r\n          }\r\n        }\r\n        return(\r\n        <div className='row'>  \r\n          <ul className='LoadModule-list'>\r\n            {this.state.Branches}  \r\n          </ul>\r\n          {moduleList}\r\n          {submoduleList}\r\n        </div>  \r\n        )\r\n\r\n    default:\r\n      return;\r\n\r\n    }\r\n  }\r\n\r\n  changeColor(ID, type) {\r\n    document.getElementById(ID).style.backgroundColor = \"#ddd\";\r\n    let list = null\r\n    switch(type) {\r\n      case 'branch':\r\n        list = this.state.Branches\r\n        break;\r\n      case 'module':\r\n        list = this.state.Modules\r\n        break;\r\n      case 'folder':\r\n        list = this.state.Folders\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    list.forEach((i) => {\r\n      if (i.props.id !== ID) {\r\n        document.getElementById(i.props.id).style.backgroundColor = \"#eee\";\r\n      }\r\n    }) \r\n  }\r\n  \r\n  fetchBranchList() {\r\n    fetch(`https://api.github.com/repos/synthetichealth/synthea/branches`)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      this.setState({\r\n        Branches: data.map((branch, i) => (\r\n          <li key={i} id={branch.name}><button className='btn btn-link' onClick={() => {this.changeColor(branch.name, 'branch');this.fetchModuleList(branch.name)}}>{branch.name}</button></li>\r\n        ))\r\n      })\r\n    })  \r\n    .catch(error => console.log('error: ', error)); \r\n  }\r\n\r\n  fetchModuleList(branch) {\r\n    this.setState({\r\n      currentBranch: branch\r\n    })\r\n    fetch(`https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules?ref=` + branch)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        let folders = data.filter(name => !name.name.includes(\".json\"))\r\n        let modules = data.filter(name => name.name.includes(\".json\"))\r\n        this.setState({\r\n        Folders: folders.map((name, i) => (\r\n          <li key={i} id={name.name}><button className='btn btn-link' onClick={() => {this.changeColor(name.name, 'folder');this.fetchModule(name.name)}}>{name.name}/</button></li>\r\n        )),\r\n        Modules: modules.map((name, i) => (\r\n          <li key={i} id={name.name}><button className='btn btn-link' onClick={() => {this.changeColor(name.name, 'module');this.fetchModule(name.name)}}>{name.name}</button></li>\r\n        ))\r\n        })\r\n      })  \r\n      .catch(error => console.log('error: ', error));\r\n  }\r\n\r\n  fetchModule(name) {\r\n    this.setState({\r\n      currentModule: name\r\n    })\r\n    if (name.includes(\".json\")) {\r\n      fetch(`https://raw.githubusercontent.com/synthetichealth/synthea/` + this.state.currentBranch + `/src/main/resources/modules/` + name)  \r\n        .then(response => response.text())\r\n        .then(data => this.loadModule(data))\r\n        .then(this.setState ({\r\n          Modules: null\r\n        }))\r\n        .catch(error => console.log('error: ', error));\r\n    } else {\r\n      fetch(`https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules/` + name + `?ref=` + this.state.currentBranch)  \r\n      .then(response => response.json())\r\n      .then(data => this.setState({\r\n        Submodules: data.map((name, i) => (\r\n          <li key={i} id={name.name}><button className='btn btn-link' onClick={() => {this.fetchSubmodule(name.name)}}>{name.name}</button></li>\r\n        ))\r\n      }))\r\n      .catch(error => console.log('error: ', error));\r\n    }\r\n  }\r\n\r\n  fetchSubmodule(name) {\r\n    fetch(`https://raw.githubusercontent.com/synthetichealth/synthea/` + this.state.currentBranch + `/src/main/resources/modules/` + this.state.currentModule + `/` + name)  \r\n      .then(response => response.text())\r\n      .then(data => this.loadModule(data))\r\n      .then(this.setState ({\r\n        Submodules: null,\r\n        Modules: null\r\n      }))\r\n      .catch(error => console.log('error: ', error));\r\n  }    \r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.selectedOption === 'git' && prevState.selectedOption !== 'git') {\r\n      this.fetchBranchList()\r\n    }\r\n  }\r\n\r\n  renderWelcomeMessage = () => {\r\n    if(this.props.welcome){\r\n      return (<div>\r\n        Welcome to Synthea Module Builder.  Please visit the documentation first.\r\n        </div>)\r\n    }\r\n\r\n    return <div />\r\n  }\r\n\r\n  render() {\r\n\r\n    let classDetails = \" hide\", style = {display: 'none'}\r\n\r\n    if(this.props.visible){\r\n      classDetails = \" show\";\r\n      style = {display: 'block'}\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div className={'modal ' +  classDetails} style={style}>\r\n            <div className=\"modal-content\" style={{width:\"900px\", marginLeft: '15%', marginRight: '15%', marginTop: 50}}>\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">{(!this.props.welcome ? 'Load Module' : 'Synthea Module Builder')}</h5>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={this.props.onHide} style={{display: (this.props.welcome ? 'none' : '')}}>\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div className=\"modal-body LoadModule-body\">\r\n                <StyledDropzone onDrop={this.onDrop.bind(this)}/>\r\n                <div className='container'>\r\n                  <div className='row'>\r\n                    <div className='col-3 nopadding'>\r\n                      <ul className='LoadModule-options'>\r\n                         <li className={(this.state.selectedOption === 'core') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('core')}>Core Modules</button></li>\r\n                         <li className={(this.state.selectedOption === 'submodules') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('submodules')}>Submodules</button></li>\r\n                         {Object.keys(this.props.modules).length > 0 ? <li className={(this.state.selectedOption === 'my') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('my')}>My Modules</button></li> : ''}\r\n                         <li className={(this.state.selectedOption === 'json') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('json')}>Paste JSON</button></li>\r\n                         <li className={(this.state.selectedOption === 'git') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('git')}>GitHub Modules</button></li>\r\n                      </ul>\r\n                    </div>\r\n                    <div className='col-9 nopadding'>\r\n                      {this.renderDetails()}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {this.renderFooter()}\r\n          </div>\r\n        </div>\r\n        <div className={`modal-backdrop ${classDetails}`} style={style}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LoadModule;\r\n","import React, { Component } from 'react';\r\nimport FileSaver from 'file-saver';\r\nimport _ from 'lodash'\r\n\r\nimport './Download.css';\r\n\r\nclass Download extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.onDownload = this.onDownload.bind(this)\r\n  }\r\n  \r\n  onDownload(){\r\n    let blob = new Blob([this.refs.codeInput.value], {\r\n       type: \"text/plain;charset=utf-8\"\r\n    });\r\n\r\n    this.downloadCsvs();\r\n\r\n    let filename = this.props.module.name.replace(/[^a-z0-9]/gi, '_').toLowerCase();\r\n\r\n    FileSaver.saveAs(blob, `${filename}.json`, true); // true = no BOM, see https://github.com/eligrey/FileSaver.js/issues/160\r\n  }\r\n\r\n  downloadCsvs(){\r\n    \r\n    let module = _.cloneDeep(this.props.module);\r\n\r\n    // Go through the states\r\n    Object.keys(module.states).map(k => module.states[k]).forEach( s => {\r\n\r\n      // find table transitions and download the tables\r\n      if (s.table_transition !== undefined){\r\n        this.downloadCsv(s.table_transition.lookup_table_name_ModuleBuilder, s.table_transition.lookuptable);\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  downloadCsv(filename, data){\r\n      // the \\n are getting encoded to \\ + n. replace that with a line break\r\n      data = encodeURIComponent(data);\r\n      data = data.replace(/%5Cn/g, \"%0D%0A\"); \r\n\r\n      \r\n      var element = document.createElement('a');   \r\n      element.style.display = 'none';   \r\n      element.setAttribute('href', 'data:text/csv;charset=utf-8,' + data);\r\n      element.setAttribute('download', filename);\r\n      document.body.appendChild(element);\r\n      element.click();\r\n      document.body.removeChild(element);\r\n  }\r\n\r\n  prepareJSON(){\r\n    let module = _.cloneDeep(this.props.module);\r\n\r\n    // We currently save name in the state for convenience\r\n    // In lieu of a better solution, we will just remove it here\r\n    Object.keys(module.states).map(k => module.states[k]).forEach( s => {\r\n      if(s['name'] !== undefined){\r\n        delete s.name;\r\n      }\r\n\r\n      // find table transitions and delete state data\r\n      if (s.table_transition !== undefined){\r\n        let name = s.table_transition.lookup_table_name_ModuleBuilder;\r\n        s.table_transition.transitions.forEach( t => \r\n          {\r\n            t.lookup_table_name = name;\r\n          })\r\n        delete s.table_transition.lookup_table_name_ModuleBuilder;\r\n        delete s.table_transition.lookuptable;\r\n        delete s.table_transition.viewTable;\r\n      }\r\n\r\n    })\r\n\r\n    return JSON.stringify(module, null, 2)\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    let classDetails = \"hide\", style = {display: 'none'}\r\n\r\n    if(this.props.visible){\r\n      classDetails = \"show\";\r\n      style = {display: 'block'}\r\n    }\r\n\r\n    return (\r\n      <div className='Download'>\r\n        <div className={`modal ${classDetails}`} style={style}>\r\n          <div className=\"modal-dialog modal-lg\" role=\"document\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Download Module</h5>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={this.props.onHide}>\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div className=\"modal-body Download-body\">\r\n              <textarea ref=\"codeInput\" disabled value={this.prepareJSON()} />\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.onDownload}>Download</button>\r\n                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.props.onHide}>Close</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`modal-backdrop ${classDetails}`} style={style}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Download;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\n\r\nimport './NavTabs.css';\r\n\r\nimport type { Module } from './types/Module';\r\n\r\nimport CancelButton from './cancel-button.png';\r\n\r\ntype Props = {\r\n  modules: Module[],\r\n  selectedModuleKey: string,\r\n  onChange: any\r\n}\r\n\r\n\r\nclass NavTabs extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  onClick = (selectedModuleKey) => {\r\n    if(selectedModuleKey === this.props.selectedModuleKey){\r\n      return () => {}\r\n    }\r\n\r\n    return () => this.props.onChangeModule(selectedModuleKey);\r\n  }\r\n\r\n  onClose = (selectedModuleKey) => {\r\n    return () => this.props.onCloseModule(selectedModuleKey);\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className='NavTabs'>\r\n        <ul>\r\n         {\r\n           Object.keys(this.props.modules).map( m => {\r\n             return (<li key={m} className={(m === this.props.selectedModuleKey ? 'NavTabs-active' : '')} ><button onClick={this.onClick(m)}>\r\n                 {/*this.props.modules[m].name*/}\r\n                 {m}.json\r\n               </button>\r\n              <img className=\"NavTabs-close\" src={CancelButton} onClick={this.onClose(m)} alt=\"Close\"/>\r\n             </li>\r\n             )})\r\n           }\r\n         </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NavTabs;\r\n","// @flow\r\nimport uuid from 'uuid-js';\r\n\r\nimport type { Module } from '../types/Module';\r\nimport type { State } from '../types/State';\r\nimport type { DirectTransition, DistributedTransition, ConditionalTransition, ComplexTransition, TableTransition, Transition } from '../types/Transition';\r\n\r\nexport function extractModule(data: any): Module {\r\n  let name = extractName(data);\r\n  let states = extractStates(data);\r\n  let remarks = extractRemarks(data);\r\n  return {name, states, remarks};\r\n}\r\n\r\nexport function extractStates(data: any): State[] {\r\n  if(!data){\r\n      return []\r\n  }\r\n  let stateNames = Object.keys(data.states);\r\n  return stateNames.map((name) => {\r\n    return extractState(name, data.states[name]);\r\n  })\r\n}\r\n\r\nexport function extractState(name: string, state: any): State {\r\n  let transition = extractTransition(state);\r\n  let id = uuid.create().toString();\r\n  let type = state.type;\r\n  return {name, transition, id, type, ...state};\r\n}\r\n\r\nexport function extractTransition(state: any): ?Transition {\r\n  if(state.direct_transition) {\r\n    return extractDirectTransition(state.direct_transition);\r\n  }\r\n  if(state.distributed_transition) {\r\n    return extractDistributedTransition(state.distributed_transition);\r\n  }\r\n  if(state.conditional_transition) {\r\n    return extractConditionalTransition(state.conditional_transition);\r\n  }\r\n  if(state.complex_transition) {\r\n    return extractComplexTransition(state.complex_transition);\r\n  }\r\n  if(state.table_transition) {\r\n    return extractTableTransition(state.table_transition);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function extractDirectTransition(data: any): DirectTransition {\r\n  return {to: data, type: 'Direct'}\r\n}\r\n\r\nexport function extractDistributedTransition(data: any): DistributedTransition {\r\n  let transition = data.map((d) => {\r\n    return {distribution: d.distribution, to: d.transition};\r\n  });\r\n  return {type: 'Distributed', transition};\r\n}\r\n\r\nexport function extractConditionalTransition(data: any): ConditionalTransition {\r\n  let transition = data.map((d) => {\r\n    return {condition: d.condition, to: d.transition};\r\n  });\r\n  return {type: 'Conditional', transition};\r\n}\r\n\r\nexport function extractComplexTransition(data: any): ComplexTransition {\r\n  let transition = data.map((c) => {\r\n    return {\r\n      condition: c.condition,\r\n      distributions: extractDistributedTransition(c.distributions||[]).transition,\r\n      transition: extractDirectTransition(c.transition)\r\n    }\r\n  })\r\n  return {type: 'Complex', transition};\r\n}\r\n\r\nexport function extractTableTransition(data: any): TableTransition {\r\n  let transition = data.transitions.map((d) => {\r\n    return {\r\n      default_probability: d.default_probability, \r\n      transition: d.transition,\r\n      lookup_table_name: d.lookup_table_name,\r\n    };\r\n  });\r\n  return { \r\n    type: 'Table', \r\n    lookuptable: data.lookuptable, \r\n    viewTable: data.viewTable,\r\n    lookup_table_name_ModuleBuilder: data.lookup_table_name_ModuleBuilder, \r\n    transition \r\n  };\r\n}\r\n\r\nexport function extractRemarks(data: any):string[] {\r\n  return (data.remarks :string[]);\r\n}\r\n\r\nexport function extractName(data: any): string {\r\n  return (data.name: string);\r\n}\r\n\r\nexport function extractAttributes(module: Module): string[] {\r\n  let attributes = Object.keys(module.states).filter((key) => {\r\n    return module.states[key].type === 'SetAttribute' || module.states[key].type === 'Counter';\r\n  }).map(key => (module.states[key].attribute))\r\n\r\n  attributes = attributes.concat(Object.keys(module.states).filter((key) => {\r\n    return !!module.states[key].assign_to_attribute\r\n  }).map(key => (module.states[key].assign_to_attribute)))\r\n\r\n\r\n  return [...new Set(attributes)]\r\n\r\n}\r\n","\r\nexport function findAvailableKey(root, keys){\r\n  // eslint-disable-next-line no-sequences\r\n  let keys_index = keys.reduce((r, i) => (r[i] = true, r), {})\r\n\r\n  let next = root;\r\n  let index = 1;\r\n\r\n  // check if this pattern already exists, so we don't chain key_2_2_2 etc\r\n  let endsInNumber = /_(\\d+)$/g;\r\n  let matches = endsInNumber.exec(root);\r\n  if(matches && matches.length > 1){\r\n    index = parseInt(matches[1]);\r\n    root = next = next.replace(matches[0], \"\");\r\n  }\r\n\r\n  while(keys_index[next]){\r\n    index++;\r\n    next = root + \"_\" + index;\r\n  }\r\n\r\n  return next;\r\n}\r\n\r\nexport function createSafeKeyFromName(name){\r\n  return name.replace(/[^A-Z0-9]/ig, \"_\");\r\n}\r\n","export default { \"example_module\": \r\n    {\r\n      \"name\": \"Examplitis\",\r\n      \"remarks\": [\r\n        \"Examplitis is a painful condition that affects only males. Most patients \",\r\n        \"can be cured with Examplitol or an Examplotomy but some never recover.\"\r\n      ],\r\n      \"states\": {\r\n\r\n        \"Initial\": {\r\n          \"type\": \"Initial\",\r\n          \"conditional_transition\": [\r\n            {\r\n              \"condition\": {\r\n                \"condition_type\": \"Gender\",\r\n                \"gender\": \"M\"\r\n              },\r\n              \"transition\": \"Age_Guard\"\r\n            },\r\n            {\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Age_Guard\": {\r\n          \"type\": \"Guard\",\r\n          \"allow\": {\r\n            \"condition_type\": \"Age\",\r\n            \"operator\": \">\",\r\n            \"quantity\": 40,\r\n            \"unit\": \"years\"\r\n          },\r\n          \"distributed_transition\": [\r\n            {\r\n              \"distribution\": 0.10,\r\n              \"transition\": \"Pre_Examplitis\"\r\n            },\r\n            {\r\n              \"distribution\": 0.90,\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Pre_Examplitis\": {\r\n          \"type\": \"Delay\",\r\n          \"range\": {\r\n            \"low\": 0,\r\n            \"high\": 10,\r\n            \"unit\": \"years\"\r\n          },\r\n          \"direct_transition\": \"Examplitis\"\r\n        },\r\n\r\n        \"Examplitis\": {\r\n          \"type\": \"ConditionOnset\",\r\n          \"target_encounter\": \"Wellness_Encounter\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"123\",\r\n              \"display\": \"Examplitis\"\r\n            }\r\n          ],\r\n          \"direct_transition\": \"Wellness_Encounter\"\r\n        },\r\n\r\n        \"Wellness_Encounter\": {\r\n          \"type\": \"Encounter\",\r\n          \"wellness\": true,\r\n          \"direct_transition\": \"Examplitol\"\r\n        },\r\n\r\n        \"Examplitol\": {\r\n          \"type\": \"MedicationOrder\",\r\n          \"reason\": \"Examplitis\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"RxNorm\",\r\n              \"code\": \"456\",\r\n              \"display\": \"Examplitol\"\r\n            }\r\n          ],\r\n          \"distributed_transition\": [\r\n            {\r\n              \"distribution\": 0.2,\r\n              \"transition\": \"Pre_Examplotomy\"\r\n            },\r\n            {\r\n              \"distribution\": 0.1,\r\n              \"transition\": \"Last_Days\"\r\n            },\r\n            {\r\n              \"distribution\": 0.7,\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Pre_Examplotomy\": {\r\n          \"type\": \"Delay\",\r\n          \"range\": {\r\n            \"low\": 18,\r\n            \"high\": 36,\r\n            \"unit\": \"months\"\r\n          },\r\n          \"direct_transition\": \"Examplotomy_Encounter\"\r\n        },\r\n\r\n        \"Examplotomy_Encounter\": {\r\n          \"type\": \"Encounter\",\r\n          \"encounter_class\": \"ambulatory\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"ABC\",\r\n              \"display\": \"Examplotomy Encounter\"\r\n            }\r\n          ],\r\n          \"direct_transition\": \"Examplotomy\"\r\n        },\r\n\r\n        \"Examplotomy\": {\r\n          \"type\": \"Procedure\",\r\n          \"duration\": {\r\n            \"low\": 2,\r\n            \"high\": 3,\r\n            \"unit\": \"hours\"\r\n          },\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"789\",\r\n              \"display\": \"Examplotomy\"\r\n            }\r\n          ],\r\n          \"reason\": \"Examplitis\",\r\n          \"direct_transition\": \"End_Examplotomy_Encounter\"\r\n        },\r\n\r\n        \"End_Examplotomy_Encounter\": {\r\n            \"type\": \"EncounterEnd\",\r\n            \"distributed_transition\": [\r\n            {\r\n              \"distribution\": 0.1,\r\n              \"transition\": \"Death\"\r\n            },\r\n            {\r\n              \"distribution\": 0.9,\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Last_Days\": {\r\n          \"type\": \"Delay\",\r\n          \"range\": {\r\n              \"low\": 8,\r\n              \"high\": 20,\r\n              \"unit\": \"years\"\r\n          },\r\n          \"direct_transition\": \"Death\"\r\n        },\r\n\r\n        \"Death\": {\r\n          \"type\": \"Death\",\r\n          \"direct_transition\": \"Terminal\"\r\n        },\r\n\r\n        \"Terminal\": {\r\n          \"type\": \"Terminal\"\r\n        }\r\n      }\r\n    }\r\n}\r\n","// @flow\r\nimport React, { Component } from 'react';\r\n\r\nimport './JsonEditor.css';\r\nimport { JsonEditor as Editor } from 'jsoneditor-react';\r\nimport 'jsoneditor-react/es/editor.min.css';\r\nimport ace from 'brace';\r\nimport 'brace/mode/json';\r\nimport {generateDOT} from '../../utils/graphviz';\r\n\r\nimport type { Module } from './types/Module';\r\n\r\ntype Props = {\r\n  module: Module,\r\n  onChange: mixed\r\n}\r\n\r\nclass JsonEditor extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  onChange(module) {\r\n    \r\n    if(this.clearTimeout){\r\n      clearTimeout(this.clearTimeout);\r\n    }\r\n\r\n    this.clearTimeout = setTimeout(()=>{\r\n\r\n      try {\r\n        let dot = generateDOT(module);\r\n\r\n        this.props.onChange(module)\r\n\r\n      } catch (ex) {\r\n        // currently silently fails on this\r\n        // alert('Error creating module: ' + ex.message);\r\n      }\r\n\r\n    }, 1000) // wait a second for user to complete changes\r\n  }\r\n\r\n\r\n  render() {\r\n    if(this.props.refreshCodeFlag){\r\n      return <div/>\r\n    }\r\n    return (\r\n      <div className='JsonEditor'>\r\n        <Editor\r\n          value={this.props.module}\r\n          mode='code'\r\n          ace={ace}\r\n          onChange={this.onChange}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JsonEditor;;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './StateList.css';\r\nimport CancelButton from './cancel-button.png';\r\n\r\ntype Props = {\r\n  states: State[],\r\n  selectedState: State,\r\n  onChange: any,\r\n}\r\n\r\nclass StateList extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {search: ''};\r\n  }\r\n\r\n  onClick(state) {\r\n    return () => { this.props.onClick(state.name)}\r\n  }\r\n\r\n  onChange(event){\r\n    this.setState({search: event.target.value});\r\n  }\r\n\r\n  clearSearch(){\r\n    this.setState({search: ''})\r\n  }\r\n\r\n  stateFilter(state){\r\n    return state.name.toLowerCase().includes(this.state.search.toLowerCase()) || \r\n           state.type.toLowerCase().includes(this.state.search.toLowerCase());\r\n  }\r\n\r\n  render() {\r\n    return (<div className='StateList'>\r\n          <div className='Editor-panel-title'> \r\n             State List\r\n          </div>\r\n          <div className=\"btn-group\">\r\n            <input type=\"text\" className=\"form-control\" placeholder=\"Find\" value={this.state.search} onChange={this.onChange.bind(this)}/>\r\n            <img className=\"search-clear\" src={CancelButton} onClick={this.clearSearch.bind(this)}/>\r\n          </div>\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">State</th>\r\n                  <th scope=\"col\">Type</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n              {this.props.states.filter(this.stateFilter.bind(this)).map((state,i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(state)} className={this.props.selectedState && (state.name === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{state.name}</th>\r\n                    <td>{state.type}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default StateList;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './AttributeList.css';\r\nimport CancelButton from './cancel-button.png';\r\nimport AttributeData from './AttributeData.json';\r\nimport Attributes from '../editor/Attributes';\r\nimport Dropdown from 'react-dropdown';\r\nimport './Dropdown.css';\r\n\r\ntype Props = {\r\n  states: State[],\r\n  modules: Module[],\r\n  selectedState: State,\r\n  onChange: any,\r\n}\r\n\r\nclass AttributeList extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {search: ''};\r\n  }\r\n\r\n  onClick(attribute) {\r\n    return () => { this.props.onClick(attribute.stateName)}\r\n  }\r\n\r\n  onChange(event){\r\n    this.setState({search: event.target.value});\r\n  }\r\n\r\n  clearSearch(){\r\n    this.setState({search: ''})\r\n  }\r\n\r\n  attributeFilter(attribute){\r\n    return attribute.attribute.toLowerCase().includes(this.state.search.toLowerCase()) || \r\n           attribute.stateName.toLowerCase().includes(this.state.search.toLowerCase());\r\n  }\r\n  \r\n  onSelect = (option) =>  {\r\n    // Open this module\r\n    this.props.loadSelectedModule(option.label)\r\n  }\r\n\r\n  render() {\r\n    const data = AttributeData;\r\n    return (<div className='AttributeList'>\r\n          <div className='Editor-panel-title'> \r\n             Attribute List\r\n          </div>\r\n\r\n          <div className=\"btn-group\">\r\n            <input type=\"text\" className=\"form-control\" placeholder=\"Find\" value={this.state.search} onChange={this.onChange.bind(this)}/>\r\n            <img className=\"search-clear\" src={CancelButton} onClick={this.clearSearch.bind(this)}/>\r\n          </div>\r\n          <div>\r\n            Note: This currently only displays attributes being written in this module.  It does not include referenced attributes\r\n            or attributes written in other modules.\r\n          </div>\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">Attribute</th>\r\n                  <th scope=\"col\">State</th>\r\n                  <th scope=\"col\">Other Modules</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n              {this.props.attributes.filter(this.attributeFilter.bind(this)).map((attribute, i) => {\r\n                let others = [this.props.module.name];\r\n                if (data[attribute.attribute]!= undefined) \r\n                {\r\n                  Object.keys(data[attribute.attribute].read).forEach(i => {others.push(i)})                \r\n                  Object.keys(data[attribute.attribute].write).forEach(i => {others.push(i)})\r\n                }\r\n                others = others.filter((x, i, a) => a.indexOf(x) == i)\r\n                others.splice(others.indexOf[this.props.module.name], 1);\r\n                let dropDown;\r\n                if (others.length > 0)\r\n                {\r\n                  dropDown = <Dropdown className='code' options={others} onChange={this.onSelect} value=\"Jump To Module...\" />\r\n                }\r\n                else\r\n                {\r\n                  dropDown = <td className={this.props.selectedState && (attribute.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"} onClick={this.onClick(attribute)} >None</td>\r\n                }\r\n\r\n                \r\n                return (\r\n                  <tr key={i}>\r\n                    <th className={this.props.selectedState && (attribute.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"} onClick={this.onClick(attribute)} scope=\"row\">{attribute.attribute}</th>\r\n                    <td className={this.props.selectedState && (attribute.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"} onClick={this.onClick(attribute)} >{attribute.stateName} </td>\r\n                    {dropDown}\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default AttributeList;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './WarningList.css';\r\n\r\ntype Props = {\r\n  warnings: mixed,\r\n  selectedState: State\r\n}\r\n\r\nclass WarningList extends Component<Props> {\r\n\r\n  onClick(warning) {\r\n    return () => { this.props.onClick(warning.stateName)}\r\n  }\r\n\r\n  render() {\r\n    return (<div className='WarningList'>\r\n          <div className='Editor-panel-title'> \r\n            Warnings\r\n          </div>\r\n\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">Warning</th>\r\n                  <th scope=\"col\">State</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n       \r\n              {this.props.warnings.map( (warning, i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(warning)} className={this.props.selectedState && (warning.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{warning.message}</th>\r\n                    <td>{warning.stateName}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default WarningList;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './RelatedList.css';\r\n\r\ntype Props = {\r\n  related: mixed,\r\n  selectedState: State\r\n}\r\n\r\nclass RelatedList extends Component<Props> {\r\n\r\n  onClick(related) {\r\n    return () => { this.props.onClick(related.stateName)}\r\n  }\r\n\r\n  render() {\r\n    return (<div className='RelatedList'>\r\n          <div className='Editor-panel-title'> \r\n            Related Modules\r\n          </div>\r\n\r\n          <div>\r\n            This currently only displays relationships based on submodules.  Additional relationships are in progress.\r\n          </div>\r\n\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">Type</th>\r\n                  <th scope=\"col\">Module</th>\r\n                  <th scope=\"col\">State</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n       \r\n              {this.props.related.map( (related, i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(related)} className={this.props.selectedState && (related.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{related.type}</th>\r\n                    <td>{related.moduleKey}</td>\r\n                    <td>{related.stateName}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default RelatedList;\r\n","export const analyze = (moduleKey, module) => {\r\n  return ({\r\n    type: 'ANALYZE',\r\n    data: {moduleKey, module}\r\n  })\r\n}\r\n","import {analyze} from  './analysis';\r\nimport { push } from 'connected-react-router'\r\n\r\nconst dispatchThenAnalyze = (action) => {\r\n  return (dispatch, getState) => {\r\n    dispatch(action);\r\n    let moduleKey = getState().editor.selectedModuleKey;\r\n    let module = getState().editor.modules[moduleKey];\r\n    if(module){\r\n      dispatch(analyze(moduleKey, module));\r\n    }\r\n\r\n    // refresh the editor if the change didn't originate from the editor\r\n    if(action.type !== 'JSON_EDIT'){\r\n      dispatch(refreshCode())\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport const selectNode = (key, transitionIndex) => {\r\n  return ({\r\n    type: 'SELECT_NODE',\r\n    data: {key, transitionIndex}\r\n  })\r\n}\r\n\r\nexport const addNode = (currentModuleKey, stateKey, state, selectedState, selectedStateTransition) => {\r\n   return dispatchThenAnalyze({\r\n    type: 'ADD_NODE',\r\n    data: {currentModuleKey, stateKey, state, selectedState, selectedStateTransition}\r\n  })\r\n}\r\n\r\nexport const addStructure = (currentModuleKey, structureName) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'ADD_STRUCTURE',\r\n    data: {currentModuleKey, structureName}\r\n  });\r\n}\r\n\r\nexport const addTransition = (currentModuleKey, nodeName, transitionType) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'ADD_TRANSITION',\r\n    data: {currentModuleKey, nodeName, transitionType}\r\n  });\r\n}\r\n\r\nexport const editNode = (update, path) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'EDIT_NODE',\r\n    data: {\r\n      update,\r\n      path\r\n    }\r\n  })\r\n}\r\n\r\nexport const renameNode = (targetModuleKey, targetNode, newName) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'RENAME_NODE',\r\n    data:{\r\n      targetModuleKey,\r\n      targetNode,\r\n      newName\r\n    }\r\n  })\r\n}\r\n\r\nexport const copyNode = (targetModuleKey, targetNode, newName) => {\r\n  return {\r\n    type: 'COPY_NODE',\r\n    data:{\r\n      targetModuleKey,\r\n      targetNode\r\n    }\r\n  }\r\n}\r\n\r\nexport const jsonEdit = (module) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'JSON_EDIT',\r\n    data: {module}\r\n  })\r\n}\r\n\r\nexport const closeModule = (selectedModuleKey) => {\r\n\r\n  return (dispatch, getState) => {\r\n\r\n    if(Object.keys(getState().editor.modules).length > 1){\r\n      if(Object.keys(getState().editor.modules)[0] === selectedModuleKey){\r\n        dispatch(push('#' + Object.keys(getState().editor.modules)[1])); // handling case where first is the one we already have open\r\n      }else {\r\n        dispatch(push('#' + Object.keys(getState().editor.modules)[0]));\r\n      }\r\n    } else {\r\n      dispatch({type: 'OPEN_MODULE', data: {}}); // open nothing to force welcome screen\r\n      dispatch(push('#'));\r\n    }\r\n\r\n\r\n    return dispatch({type: 'CLOSE_MODULE', data: {selectedModuleKey}});\r\n\r\n  }\r\n}\r\n\r\nexport const newModule = (key, module) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'NEW_MODULE',\r\n    data: {key, module}\r\n  })\r\n}\r\n\r\nexport const editModuleName = (targetModuleKey, newName) => {\r\n  return ({\r\n    type: 'EDIT_MODULE_NAME',\r\n    data: {\r\n      newName,\r\n      targetModuleKey\r\n    }\r\n  })\r\n}\r\n\r\nexport const editModuleRemarks = (targetModuleKey, newRemarks) => {\r\n  return ({\r\n    type: 'EDIT_MODULE_REMARKS',\r\n    data: {\r\n      newRemarks,\r\n      targetModuleKey\r\n    }\r\n  })\r\n}\r\n\r\nexport const changeStateType = (targetModuleKey, targetNode, newType) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'CHANGE_STATE_TYPE',\r\n    data:{\r\n      targetModuleKey,\r\n      targetNode,\r\n      newType\r\n    }\r\n  })\r\n}\r\n\r\nexport const undo = () => {\r\n  return dispatchThenAnalyze({\r\n    type: 'UNDO'\r\n  })\r\n}\r\n\r\nexport const redo = () => {\r\n  return dispatchThenAnalyze({\r\n    type: 'REDO'\r\n  })\r\n}\r\n\r\nexport const showLoadModule = () => {\r\n  return ({\r\n    type: 'SHOW_LOAD_MODULE'\r\n  })\r\n}\r\n\r\nexport const hideLoadModule = () => {\r\n  return ({\r\n    type: 'HIDE_LOAD_MODULE'\r\n  })\r\n}\r\n\r\nexport const showDownload = () => {\r\n  return ({\r\n    type: 'SHOW_DOWNLOAD'\r\n  })\r\n}\r\n\r\nexport const hideDownload = () => {\r\n  return ({\r\n    type: 'HIDE_DOWNLOAD',\r\n  })\r\n}\r\n\r\n\r\nexport const changeModulePanel = (targetPanel) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'CHANGE_MODULE_PANEL',\r\n    data:{\r\n      targetPanel\r\n    }\r\n  })\r\n}\r\n\r\nexport const refreshCode = () => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'REFRESH_CODE_FLAG',\r\n      data:{\r\n        flag: true\r\n      }\r\n    })\r\n\r\n    setTimeout(() => {dispatch({\r\n      type: 'REFRESH_CODE_FLAG',\r\n      data:{\r\n        flag: false\r\n      }\r\n    })}, 250)\r\n\r\n\r\n  }\r\n}\r\n\r\n","import {analyze} from  './analysis';\r\n\r\nexport const openModule = (key) => {\r\n\r\n  return (dispatch, getState) => {\r\n    let action = {type: 'OPEN_MODULE', data: {key}};\r\n\r\n    if(!getState().editor.modules[key] && getState().library.modules[key]){\r\n      action.data.libraryModule = getState().library.modules[key];\r\n    }\r\n\r\n    dispatch(action);\r\n    if(getState().editor.modules[key]){\r\n      dispatch(analyze(key, getState().editor.modules[key]));\r\n    }\r\n  }\r\n}\r\n","import { openModule } from './router'\r\n\r\nexport const loadLibrary = (modules) => {\r\n  return (dispatch, getState) => {\r\n\r\n    dispatch ({\r\n      type: 'LOAD_LIBRARY',\r\n      data: modules\r\n    })\r\n\r\n    if(getState().router.location.hash.charAt(0) === '#'){\r\n      dispatch(openModule(getState().router.location.hash.slice(1)));\r\n    }\r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { push } from 'connected-react-router'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport Joyride from 'react-joyride'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport Draggable from 'react-draggable'\r\n\r\nimport StateEditor from '../components/editor/State';\r\nimport ModulePropertiesEditor from '../components/editor/ModuleProperties';\r\nimport ModuleGraph from '../components/graph/ModuleGraph';\r\nimport LoadModule from '../components/menu/LoadModule';\r\nimport Download from '../components/menu/Download';\r\nimport NavTabs from '../components/editor/NavTabs';\r\nimport { extractStates } from '../transforms/Module';\r\nimport {cleanString } from '../utils/stringUtils';\r\n\r\nimport { findAvailableKey, createSafeKeyFromName } from '../utils/keys';\r\nimport { getTemplate } from '../templates/Templates';\r\nimport { BasicTutorial } from '../templates/Tutorial';\r\n\r\nimport { RIEInput } from 'riek';\r\n\r\nimport examplitis from '../data/example_module'\r\n\r\nimport './Editor.css';\r\n\r\nimport JsonEditor from '../components/editor/JsonEditor';\r\n\r\nimport StateList from '../components/analysis/StateList';\r\nimport AttributeList from '../components/analysis/AttributeList';\r\nimport WarningList from '../components/analysis/WarningList';\r\nimport RelatedList from '../components/analysis/RelatedList';\r\n\r\nimport LoadingLogo from './synthea-animated-logo.svg'\r\n// import SyntheaLogo from './synthea-logo-dark-glow.png'\r\nimport SyntheaLogo from './synthea-logo.png'\r\nimport MinimizePanel from './minimize-panel.png'\r\nimport FullscreenButton from './fullscreen.png'\r\nimport InfoButton from './Info.png'\r\nimport StateButton from './state-button.png'\r\nimport StateListButton from './statelist.png'\r\nimport CodeButton from './code-button.png'\r\nimport AttributeButton from './attribute-button.png'\r\nimport RelatedButton from './related-button.png'\r\nimport WarningButton from './warning-button.png'\r\n\r\nimport {selectNode,\r\n        addNode,\r\n        addStructure,\r\n        addTransition,\r\n        editNode,\r\n        renameNode,\r\n        copyNode,\r\n        newModule,\r\n        jsonEdit,\r\n        showLoadModule,\r\n        hideLoadModule,\r\n        showDownload,\r\n        hideDownload,\r\n        refreshCode,\r\n        changeStateType,\r\n        editModuleName,\r\n        editModuleRemarks,\r\n        closeModule,\r\n        undo,\r\n        redo,\r\n        changeModulePanel} from '../actions/editor';\r\n\r\nimport {loadLibrary} from '../actions/library';\r\n\r\nclass Editor extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.originalPanelWidth = 500;\r\n    this.state = {\r\n      joyride: {\r\n        run: false,\r\n        steps: BasicTutorial,\r\n        stepIndex: 0\r\n      },\r\n      panelWidth: this.originalPanelWidth,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    import(\"../data/modules\").then(modules => {\r\n      this.props.loadLibrary({...examplitis, ...modules.default});\r\n\r\n      // see https://github.com/wwayne/react-tooltip/issues/40\r\n      setTimeout(() => {\r\n       ReactTooltip.rebuild();\r\n      }, 1000)\r\n    });\r\n\r\n  }\r\n\r\n  /*\r\n    This is a recursive function to track the path that an edit action took through the Inspector\r\n    It was written this way because there's multiple ways that one could get to, say, a Conditional Editor\r\n    By keeping track of where it's been it means that the action can just look into the modules along the path\r\n  */\r\n  onChange  = (update, path=[]) => {\r\n    if(typeof update !== 'object') {\r\n      return (val) => this.onChange(val, [].concat(path, [update]))\r\n    }\r\n    this.props.editNode(update, path)\r\n  }\r\n\r\n  renameNode = (targetModuleKey, targetNode) => {\r\n    return (newName) => {\r\n      newName.name = cleanString(newName.name, {'.': '', '\\\\': '', '|': ''});\r\n      this.props.renameNode(targetModuleKey, targetNode, newName);\r\n    }\r\n  }\r\n\r\n  copyNode = (targetModuleKey, targetNode) => {\r\n    return () => {\r\n      this.props.copyNode(targetModuleKey, targetNode);\r\n    }\r\n  }\r\n\r\n  pasteNode = (selectedModuleKey, takenKeys, selectedState, selectedStateTransition) => {\r\n    return () => {\r\n      let key = findAvailableKey(createSafeKeyFromName(this.props.clipboard.name), takenKeys);\r\n      let newState = _.cloneDeep(this.props.clipboard);\r\n      this.props.addNode(selectedModuleKey, key, newState, selectedState, selectedStateTransition);\r\n    }\r\n  }\r\n  \r\n  changeStateType = (targetModuleKey, targetNode) => {\r\n    return (newType) => {\r\n      this.props.changeStateType(targetModuleKey, targetNode, newType);\r\n    }\r\n  }\r\n\r\n  addTransition = (targetModuleKey, targetNode) => {\r\n    return (transitionType) => {\r\n      this.props.addTransition(targetModuleKey, targetNode, transitionType)\r\n    }\r\n  }\r\n\r\n  newModule = (takenKeys) => {\r\n    return (module = getTemplate('Module.Blank')) => {\r\n      let key = findAvailableKey(createSafeKeyFromName(module.name), takenKeys);\r\n      this.props.newModule(key, module);\r\n      this.props.push('#' + key)\r\n    }\r\n  }\r\n\r\n  addNode = (selectedModuleKey, takenKeys, selectedState, selectedStateTransition) => {\r\n    return () => {\r\n      let key = findAvailableKey(createSafeKeyFromName('New State'), takenKeys);\r\n      let newState = {...getTemplate('State.Simple'), direct_transition: key };\r\n      this.props.addNode(selectedModuleKey, key, newState, selectedState, selectedStateTransition);\r\n    }\r\n  }\r\n\r\n  startTutorial = (steps) => {\r\n    return () => {\r\n      this.joyride.reset(true);\r\n      this.setState({joyride: {run: true, steps}})\r\n    }\r\n  }\r\n  renderAddStateButton = () => {\r\n    if(this.props.selectedModuleKey){\r\n      return <button className='button-clear' data-tip='Add a state to this graph.' onClick={this.addNode(this.props.selectedModuleKey, Object.keys(this.props.module.states), this.props.selectedStateKey, this.props.selectedStateTransition)}> + Add State </button>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  renderUndoButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.undoEnabled){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Undo' onClick={() => this.props.undo()}> Undo</button>\r\n  }\r\n\r\n  renderRedoButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.redoEnabled){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Redo' onClick={() => this.props.redo()}> Redo</button>\r\n  }\r\n\r\n  renderDownloadButton = () => {\r\n  }\r\n\r\n  renderUndoButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.undoEnabled){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Undo' onClick={() => this.props.undo()}> Undo</button>\r\n  }\r\n  \r\n  renderDeleteButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.selectedStateKey){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Delete State' onClick={() => this.props.selectedStateKey && this.onChange(`${this.props.selectedModuleKey}.states.${this.props.selectedStateKey}`)({val: {id: null}})}> Delete State</button>\r\n  }\r\n\r\n  renderCopyButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.selectedStateKey){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Copy State' onClick={this.props.selectedStateKey && this.copyNode(this.props.selectedModuleKey, this.props.moduleState, Object.keys(this.props.module.states))}> Copy State</button>\r\n  }\r\n\r\n  renderPasteButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.clipboard){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Paste State Here' onClick={this.props.clipboard && this.pasteNode(this.props.selectedModuleKey, Object.keys(this.props.module.states), this.props.selectedStateKey, this.props.selectedStateTransition)}> Paste State</button>\r\n  }\r\n\r\n  renderStateEditor = () => {\r\n    if(this.props.module){\r\n      return <StateEditor\r\n        moduleName={this.props.module.name}\r\n        helpFunction={this.startTutorial}\r\n        renameNode={this.renameNode(this.props.selectedModuleKey, this.props.moduleState)}\r\n        changeType={this.changeStateType(this.props.selectedModuleKey, this.props.moduleState)}\r\n        copyNode={this.copyNode(this.props.selectedModuleKey, this.props.moduleState, Object.keys(this.props.module.states))}\r\n        addTransition={this.addTransition(this.props.selectedModuleKey, this.props.moduleState)}\r\n        state={this.props.moduleState}\r\n        otherStates={this.props.moduleStates}\r\n        onChange={this.onChange(this.props.selectedModuleKey)}\r\n        displayAttributes={this.leftNavClick('attribute')} />\r\n    }\r\n    return <div/>\r\n\r\n  }\r\n\r\n  renderDownload = () => {\r\n    if(this.props.module){\r\n      return <Download module={this.props.module}\r\n        visible={this.props.downloadVisible}\r\n        onHide={this.props.hideDownload}/>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  renderLoadModule = () => {\r\n    return <LoadModule modules={this.props.modules}\r\n          library={this.props.library}\r\n          visible={this.props.loadModuleVisible}\r\n          onHide={this.props.hideLoadModule}\r\n          push={this.props.push}\r\n          welcome={!this.props.module}\r\n          newModule={this.newModule(Object.keys(this.props.modules))}\r\n          />\r\n  }\r\n\r\n  loadSelectedModule= (key) => \r\n  {\r\n    let val;\r\n    Object.keys(this.props.library).forEach(option => {\r\n      if (this.props.library[option].name === key)\r\n      {\r\n        val = option;\r\n      }\r\n    })\r\n    if (val !== undefined)\r\n    {\r\n        this.props.push('#' + val);   \r\n    }\r\n  }\r\n\r\n  renderModulePropertiesEditor = () => {\r\n    if(this.props.module){\r\n      return <ModulePropertiesEditor\r\n              module={this.props.module}\r\n              onRemarksChange={(remarks) => this.props.editModuleRemarks(this.props.selectedModuleKey, remarks)}/>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  renderModuleGraph = () => {\r\n    if(this.props.module){\r\n      return <ModuleGraph\r\n            module={this.props.module}\r\n            fullscreen={!this.props.modulePanelVisible}\r\n            onClick={this.props.selectNode}\r\n            selectedState={this.props.moduleState}\r\n            selectedStateTransition={this.props.selectedStateTransition}/>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  onPanelResize = (event, data) => {\r\n    this.setState({...this.state, panelWidth: this.state.panelWidth + data.deltaX})\r\n  }\r\n\r\n  onPanelResizeDone = () => {\r\n    this.props.refreshCode();\r\n    if(this.state.panelWidth <= 250){\r\n      this.setState({...this.state, panelWidth: 250});\r\n      this.leftNavClick('hide')();\r\n    }\r\n  }\r\n\r\n  renderPanelContent = () => {\r\n    switch(this.props.selectedModulePanel){\r\n      case 'info':\r\n        return this.renderModulePropertiesEditor();\r\n      case 'state':\r\n        return this.renderStateEditor();\r\n      case 'statelist':\r\n        return <StateList selectedState={this.props.moduleState} states={this.props.moduleStates} onClick={this.props.selectNode} />\r\n      case 'code':\r\n        return <JsonEditor onChange={(value) => {this.props.jsonEdit(value)}} module={this.props.module} refreshCodeFlag={this.props.refreshCodeFlag}/>\r\n      case 'attribute':\r\n        // The attribute list does not show attributes that are referenced \r\n        // for example BMI is not in the attribute list in the Metabolic Syndrome Standards of Care Module but the state 'Obese Check' uses BMI in the transition\r\n        return <AttributeList attributes={this.props.attributes} selectedState={this.props.moduleState} modules={this.props.modules} states={this.props.moduleStates} onClick={this.props.selectNode} module={this.props.module} editor={this.props} loadSelectedModule={this.loadSelectedModule}/>\r\n      case 'warning':\r\n        return <WarningList warnings={this.props.warnings} selectedState={this.props.moduleState} onClick={this.props.selectNode} />\r\n      case 'related':\r\n        return <RelatedList related={this.props.relatedModules} selectedState={this.props.moduleState} onClick={this.props.selectNode} />\r\n      default:\r\n        return <div/>\r\n    }\r\n  }\r\n\r\n  renderStateButton = () => {\r\n    let className = '';\r\n    let onClick = this.leftNavClick('state');\r\n    if(this.props.selectedModulePanel === 'state'){\r\n      className = 'Editor-left-selected';\r\n    } else if(!this.props.moduleState){\r\n      className = 'Editor-left-disabled';\r\n      onClick = () => {};\r\n    }\r\n    let dataTip = 'View currently selected state.'\r\n\r\n    if(this.props.moduleStates){\r\n      dataTip += ' Please selected a state in the graph, state list, or attribute list.'\r\n    }\r\n\r\n    return <li className={className}><button data-tip={dataTip} onClick={onClick}><img src={StateButton} alt=\"\"/></button></li>\r\n  }\r\n\r\n  renderStateListButton = () => {\r\n   let stateCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.moduleStates.length > 0){\r\n       stateCount = <span className='Editor-button-count'>{this.props.moduleStates.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'statelist' ? 'Editor-left-selected' : ''}><button data-tip='Searchable list of states.' onClick={this.leftNavClick('statelist')}><img src={StateListButton} alt=\"\"/>{stateCount}</button></li>\r\n\r\n  }\r\n\r\n  renderAttributesButton = () => {\r\n   let attributesCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.attributes.length > 0){\r\n     attributesCount = <span className='Editor-button-count'>{this.props.attributes.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'attribute' ? 'Editor-left-selected' : ''}><button data-tip='Attributes set in this module.' onClick={this.leftNavClick('attribute')}><img src={AttributeButton} alt=\"\"/>{attributesCount}</button></li>\r\n\r\n  }\r\n\r\n\r\n  renderWarningButton = () => {\r\n   let warningCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.warnings.length > 0){\r\n     warningCount = <span className='Editor-button-count Editor-button-count-warning'>{this.props.warnings.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'warning' ? 'Editor-left-selected' : ''}><button data-tip='Problems in module that need to be resolved.' onClick={this.leftNavClick('warning')}><img src={WarningButton} alt=\"\"/>{warningCount}</button></li>\r\n\r\n  }\r\n\r\n  renderRelatedModulesButton = () => {\r\n\r\n   let relatedCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.relatedModules.length > 0){\r\n     relatedCount = <span className='Editor-button-count'>{this.props.relatedModules.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'related' ? 'Editor-left-selected' : ''}><button data-tip='Related modules, such as those that share attributes. ' onClick={this.leftNavClick('related')}><img src={RelatedButton} alt=\"\"/>{relatedCount}</button></li>\r\n\r\n  }\r\n\r\n\r\n  leftNavClick = (nav) => {\r\n    return () => {\r\n      if(nav !== 'hide' || (nav === 'hide' && this.props.modulePanelVisible)){\r\n        this.props.changeModulePanel(nav);\r\n      } else if (nav === 'hide') {\r\n        if(this.props.selectedStateKey){\r\n          this.props.changeModulePanel('state');\r\n        } else {\r\n          this.props.changeModulePanel('info');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  renderNav = () => {\r\n    return(\r\n      <div className='Editor-top'>\r\n        <img src={SyntheaLogo} className='Editor-top-logo' alt='Synthea Logo'/>\r\n        <div className='Editor-top-title'>Synthea Module Builder</div>\r\n        <div className='Editor-top-open'>\r\n          <button className='button-clear' onClick={this.newModule(Object.keys(this.props.modules)).bind(this, undefined)}>New Module</button>\r\n          <button className='button-clear' onClick={this.props.showLoadModule}>Open Module</button>\r\n          <button className='button-clear Editor-top-download' onClick={this.props.showDownload}>Download</button>\r\n        </div>\r\n        <button className='button-clear Editor-top-help' onClick={this.startTutorial(BasicTutorial)}> ? </button>\r\n        <NavTabs selectedModuleKey={this.props.selectedModuleKey}\r\n                 modules={this.props.modules}\r\n                 onChangeModule={(key) => this.props.push('#' + key)}\r\n                 onCloseModule={(key) => {this.props.closeModule(key)}}\r\n                 />\r\n              \r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  renderMainEditor = () => {\r\n\r\n    if(!this.props.module){\r\n      return <img className='Editor-loading-logo' src={LoadingLogo} alt='Loading'/>\r\n    }\r\n\r\n    return (\r\n      <div className='Editor-main'>\r\n\r\n        <div className='Editor-action-bar'>\r\n              <RIEInput className='Editor-top-module' value={(this.props.module && this.props.module.name) || 'Untitled'} propName=\"name\" change={(name) => {this.props.editModuleName(this.props.selectedModuleKey, name.name)}} />\r\n             <div className='Editor-graph-buttons'>\r\n                {this.renderAddStateButton()}\r\n                {this.renderUndoButton()}\r\n                {this.renderRedoButton()}\r\n                {this.renderDeleteButton()}\r\n                {this.renderCopyButton()}\r\n                {this.renderPasteButton()}\r\n                {this.renderDownloadButton()}\r\n\r\n             </div>\r\n        </div>\r\n\r\n        <div className='Editor-left'>\r\n         <ul>\r\n        <li className={'Editor-left-fullscreen' + (!this.props.modulePanelVisible ? ' Editor-left-fullscreen-active' : '')}><button data-tip='Show/hide editor panel.' onClick={this.leftNavClick('hide')}><img src={FullscreenButton} alt=\"\"/></button></li>\r\n           <li className='Editor-left-spacer'></li>\r\n           <li className={this.props.selectedModulePanel === 'info' ? 'Editor-left-selected' : ''}><button data-tip='Module Properties.' onClick={this.leftNavClick('info')}><img src={InfoButton} alt=\"\"/></button></li>\r\n           {this.renderStateButton()}\r\n           <li className='Editor-left-spacer'></li>\r\n           <li className={this.props.selectedModulePanel === 'code' ? 'Editor-left-selected' : ''}><button data-tip='Directly edit module JSON.' onClick={this.leftNavClick('code')}><img src={CodeButton} alt=\"\"/></button></li>\r\n           <li className='Editor-left-spacer'></li>\r\n           {this.renderStateListButton()}\r\n           {this.renderAttributesButton()}\r\n           {this.renderWarningButton()}\r\n           {this.renderRelatedModulesButton()}\r\n\r\n\r\n         </ul>\r\n        </div>\r\n\r\n        <div className='Editor-panel' style={{left: this.props.modulePanelVisible ? 50 :  -this.state.panelWidth, width: this.state.panelWidth}}>\r\n          <div className='Editor-panel-content'>\r\n            <button className='Editor-panel-minimize button-clear' onClick={this.leftNavClick('hide')} ><img src={MinimizePanel} alt=\"\"/></button>\r\n            {this.renderPanelContent()}\r\n          </div>\r\n\r\n          <Draggable\r\n             axis='x'\r\n             onDrag={this.onPanelResize}\r\n             onStop={this.onPanelResizeDone}\r\n             bounds={{left: -250, top: 0, right: Infinity, bottom: 0}}\r\n            >\r\n            <div className='Editor-panel-resize' style={{left: this.originalPanelWidth - 8}}></div>\r\n          </Draggable>\r\n\r\n         </div>\r\n\r\n\r\n\r\n        {this.renderModuleGraph()}\r\n\r\n\r\n      </div>)\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className='Editor'>\r\n\r\n        <ReactTooltip\r\n          className='react-tooltip-customized'\r\n          effect='solid'\r\n          delayShow={800}\r\n          />\r\n\r\n        { this.renderNav() }\r\n\r\n        { this.renderLoadModule() }\r\n        { this.renderDownload() }\r\n\r\n        { this.renderMainEditor() }\r\n\r\n\r\n        <Joyride\r\n          ref={c => (this.joyride = c)}\r\n          showOverlay={true}\r\n          showSkipButton={true}\r\n          showStepsProgress={false}\r\n          type={'continuous'}\r\n          steps={this.state.joyride.steps}\r\n          run={this.state.joyride.run}\r\n          autoStart={true}\r\n          debug={false}\r\n          allowClicksThruHole={false}\r\n          keyboardNavigation={true}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\r\n  let selectedModuleKey = state.editor.selectedModuleKey;\r\n\r\n  let loadModuleVisible = state.editor.loadModuleVisible;\r\n\r\n  if(!selectedModuleKey){\r\n    loadModuleVisible = true;\r\n  }\r\n\r\n  let module = state.editor.modules[selectedModuleKey];\r\n\r\n  let moduleStates = selectedModuleKey && extractStates(module);\r\n  let moduleState =  moduleStates && moduleStates.find(s => (s.name === state.editor.selectedStateKey))\r\n\r\n  let undoEnabled = state.editor.historyIndex < state.editor.history.length - 1;\r\n  let redoEnabled = state.editor.historyIndex > 0;\r\n\r\n  return {\r\n    module,\r\n    modules: state.editor.modules,\r\n    library: state.library.modules,\r\n    selectedModuleKey,\r\n    moduleState,\r\n    moduleStates,\r\n    selectedStateKey: state.editor.selectedStateKey,\r\n    selectedStateTransition: state.editor.selectedStateTransition,\r\n    loadModuleVisible: loadModuleVisible,\r\n    downloadVisible: state.editor.downloadVisible,\r\n    selectedModulePanel: state.editor.selectedModulePanel,\r\n    modulePanelVisible: state.editor.modulePanelVisible,\r\n    warnings: state.analysis.warnings,\r\n    relatedModules: state.analysis.relatedModules,\r\n    attributes: state.analysis.attributes,\r\n    undoEnabled,\r\n    redoEnabled,\r\n    refreshCodeFlag: state.editor.refreshCodeFlag,\r\n    clipboard: state.editor.clipboard\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators({\r\n  selectNode,\r\n  addNode,\r\n  addStructure,\r\n  addTransition,\r\n  editNode,\r\n  renameNode,\r\n  copyNode,\r\n  changeStateType,\r\n  newModule,\r\n  loadLibrary,\r\n  showLoadModule,\r\n  hideLoadModule,\r\n  showDownload,\r\n  hideDownload,\r\n  refreshCode,\r\n  editModuleName,\r\n  editModuleRemarks,\r\n  changeModulePanel,\r\n  jsonEdit,\r\n  closeModule,\r\n  undo,\r\n  redo,\r\n  push\r\n}, dispatch)\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Editor);\r\n","// @flow\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport { ConnectedRouter} from 'connected-react-router'\r\n\r\nimport createAppStore, { history } from './store';\r\nimport Editor from './containers/Editor';\r\n\r\nimport { openModule } from './actions/router';\r\n\r\nconst store = createAppStore(history)\r\n\r\nconst App = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <ConnectedRouter history={history}>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Editor} />\r\n        </Switch>\r\n      </ConnectedRouter>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nconst dispatchLocationChange = location => {\r\n  if(location.hash.charAt(0) === '#'){\r\n    store.dispatch(openModule(location.hash.slice(1)));\r\n  }\r\n}\r\n\r\nhistory.listen(dispatchLocationChange);\r\n\r\ndispatchLocationChange(history.location);\r\n\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css'\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// Do not use service workers because they cause unexpected behavior and we\r\n// are not interested in offline modes currently. Unregister to clear out\r\n// previous registered service workers for people that have already visited\r\n// the app.\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}