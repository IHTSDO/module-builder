{"version":3,"sources":["reducers/library.js","templates/Templates.js","utils/stringUtils.js","reducers/editor.js","reducers/analysis.js","store.js","reducers/index.js","components/editor/Code.js","components/editor/String.js","components/editor/Goal.js","components/editor/ImagingStudyAttributes.js","components/editor/Conditional.js","components/editor/DirectTransition.js","components/editor/DistributedTransition.js","components/editor/ConditionalTransition.js","components/editor/ComplexTransition.js","components/editor/Table.js","components/editor/TableTransition.js","components/editor/Transition.js","templates/Tutorial.js","components/editor/State.js","components/editor/ModuleProperties.js","utils/graphviz.js","components/graph/ModuleGraph.js","components/menu/StyledDropZone.js","components/menu/LoadModule.js","components/menu/Download.js","components/editor/NavTabs.js","transforms/Module.js","utils/keys.js","data/example_module.js","components/editor/JsonEditor.js","components/analysis/StateList.js","components/analysis/AttributeList.js","components/analysis/WarningList.js","components/analysis/RelatedList.js","actions/analysis.js","actions/editor.js","actions/router.js","actions/library.js","containers/Editor.js","App.js","serviceWorker.js","index.js","components/analysis/cancel-button.png","components/editor/cancel-button.png","containers/synthea-animated-logo.svg","containers/synthea-logo.png","containers/minimize-panel.png","containers/fullscreen.png","containers/Info.png","containers/state-button.png","containers/statelist.png","containers/code-button.png","containers/attribute-button.png","containers/related-button.png","containers/warning-button.png"],"names":["initialState","modules","analysis","library","state","arguments","length","undefined","action","type","Object","objectSpread","data","location","getTemplate","path","parsedPath","split","template","shift","reducedPath","join","typeVar","TypeTemplates","AttributeTemplates","TransitionTemplates","StateTemplates","ContainedTemplates","StructureTemplates","ModuleTemplates","_","cloneDeep","get","Date","Year","Month","Day","Hour","Minute","Second","Millisecond","Code","Snomed","system","code","display","Loinc","RxNorm","Nubc","DicomDCM","DicomSOP","Condition","Gender","condition_type","gender","Age","operator","quantity","unit","year","Active Condition","codes","Socioeconomic Status","category","Race","race","Symptom","symptom","value","Observation","Vital Sign","vital_sign","Active Medication","Active CarePlan","PriorState","name","Attribute","attribute","And","conditions","Or","At Least","minimum","At Most","maximum","Not","condition","True","False","Exact","ExactWithUnit","Range","low","high","RangeWithUnit","Prescription","dosage","amount","frequency","period","duration","Goal","addresses","Since","Within","UnnamedDistribution","NamedDistribution","default","ImagingStudy","Instance","title","sop_class","Series","body_site","modality","instances","Direct","Conditional","transition","Distributed","distribution","Complex","distributions","Table","lookuptable","viewTable","lookup_table_name_ModuleBuilder","transitions","default_probability","lookup_table_name","Initial","Terminal","Simple","Guard","allow","Delay","exact","SetAttribute","Counter","CallSubmodule","submodule","Encounter","encounter_class","reason","EncounterEnd","ConditionOnset","assign_to_attribute","target_encounter","ConditionEnd","AllergyOnset","AllergyEnd","MedicationOrder","MedicationEnd","CarePlanStart","CarePlanEnd","Procedure","VitalSign","MultiObservation","number_of_observations","DiagnosticReport","observations","procedure_code","series","cause","probability","Death","CheckYearly","conditional_transition","ActiveCondition","HasCondition","direct_transition","ConditionIncidence","RiskPerMonth","distributed_transition","AcquireCondition","GenderDifference","Male","Female","Common","ConditionVariation","VariantDistribution","Condition1","Condition2","Condition3","Join","MedicationVariation","Medication1","Medication2","Medication3","ChildrensDose","DosageDecision","AdultDose","MedicationsByYear","VariantsByYear","Medication4","ProcedureVariation","BeginEncounter","Procedure1","Observation1","Procedure2","Observation2","Procedure3","Observation3","Blank","remarks","states","Yearly","DeadAt40","DelayUntil40","cleanString","mapObj","keys","reduce","acc","cur","selectedStateKey","selectedStateTransition","selectedModuleKey","loadModuleVisible","downloadVisible","selectedModulePanel","modulePanelVisible","history","clipboard","historyIndex","refreshCodeFlag","editor","newState","key","transitionIndex","toConsumableArray","targetModuleKey","targetNode","currentModuleKey","defineProperty","stateKey","selectedState","alteredState","oldTransitionPoint","table_transition","complex_transition","complexTransitions","rightNode","forEach","t","i","nodes","dist","saveHistory","concat","structureName","libraryModule","newModule","selectStateTransition","newModules","tempModule","module","values","update","id","set","trim","test","parseFloat","toLowerCase","normalizeType","splitPath","Array","isArray","parent","slice","unset","splice","newVal","filter","x","stateName","fixStateReferences","transitionMapping","transitionName","transitionType","oldTransitionName","nodeName","paths","pathIndex","transitionTo","newName","moduleState","newRemarks","newType","pick","targetPanel","flag","map","s","condition_onset","allergy_onset","medication_order","careplan","libraryModuleCodes","warnings","libraryRelatedModules","relatedModules","attributes","templateCodes","c","parseLookupTable","parsed","isNumber","toString","Papa","parse","header","complete","results","tableHasError","textOk","parseOk","stateCollisionWarnings","globalCodes","equivalentStates","checkCollision","libraryState","local","first","second","e","collisions","push","message","moduleKey","visitedStateCheck","visitNext","_loop","nextStateKey","pop","nextState","notVisitedWarnings","visited","v","orphanStateWarnings","o","instance","placeholderCodeWarnings","tableColumns","tableTransitionWarnings","relatedMap","related","relatedBySubmodule","stateType","sort","a","b","y","enhancers","middleware","createBrowserHistory","basename","createAppStore","routerMiddleware","thunk","composedEnhancers","compose","apply","applyMiddleware","createStore","combineReducers","router","connectRouter","createRootReducer","_Component","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","inherits","createClass","props","react_default","createElement","lib","className","propName","change","onChange","Component","Codes","_Component2","_this","templates","SNOMED-CT","LOINC","NUBC","DICOM-DCM","DICOM-SOP","onClick","val","Code_Code","StringEditor","label","StringsEditor","String_StringEditor","goal","renderObservation","renderText","String_StringsEditor","observation","goalObservationValue","Code_Codes","text","options","_this2","Goals","_this3","goals","Goal_Goal","InstanceList","ImagingStudyAttributes_Instance","_Component3","ImagingStudyAttributes_InstanceList","SeriesList","_Component4","ImagingStudyAttributes_Series","unitOfTimeOptions","unitOfAgeOptions","ConditionalEditor","conditional","Conditional_Gender","Conditional_Age","Conditional_Date","Conditional_SocioeconomicStatus","Conditional_Race","Conditional_Symptom","Conditional_Observation","Conditional_VitalSign","Conditional_ActiveCondition","Conditional_ActiveMedication","Conditional_ActiveCarePlan","Conditional_PriorState","Conditional_Attribute","Conditional_And","Conditional_Or","Conditional_AtLeast","Conditional_AtMost","Conditional_Not","k","renderConditionalType","renderType","renderWarning","month","date","yearInput","monthInput","dayInput","day","hourInput","hour","minuteInput","minute","secondInput","millisecondInput","millisecond","SocioeconomicStatus","value_code","renderValueOrCodeValue","String","valueInput","ActiveMedication","ActiveCarePlan","renderSince","renderWithin","_this4","since","_this5","within","_this6","cond","Conditional_ConditionalEditor","assign","_this7","AtLeast","_this8","AtMost","_this9","DirectTransitionEditor","to","DistributedTransition","currentValue","renderDistribution","index","sum","remainder","remainderOption","editProps","step","min","max","format","formatAsPercentage","validate","checkInRange","num","ConditionalTransition","indexTo","indexFrom","oldEntry","clone","newEntry","swapItems","isLast","renderIf","renderUpDown","ComplexTransition","d","transitionEditor","newDistributedTransition","DirectTransition","nextTransition","newDirectTransition","editor_DistributedTransition","renderTransition","_ref","columnHeaders","rows","columns","item","str","replace","width","react_data_grid_default","rowGetter","rowsCount","minHeight","TableTransition","lookupTableName","buttonText","displayTable","displayTableError","fixMissingValues","doesDataHaveInputError","parseTextArea","editor_Table","msg","checkTable","displayTableView","Transition","editor_ConditionalTransition","editor_ComplexTransition","components_editor_TableTransition","BasicTutorial","selector","EditTutorial","StateEditor","updateRemarks","el","State_Initial","State_Terminal","State_Simple","State_Guard","State_Delay","State_SetAttribute","State_Counter","State_CallSubmodule","State_Encounter","State_EncounterEnd","State_ConditionOnset","State_ConditionEnd","State_AllergyOnset","State_AllergyEnd","State_MedicationOrder","State_MedicationEnd","State_CarePlanStart","State_CarePlanEnd","State_Procedure","State_VitalSign","State_Observation","State_MultiObservation","State_DiagnosticReport","State_ImagingStudy","State_Symptom","State_Death","_React$createElement","_React$createElement2","_React$createElement3","typeOptions","renameNode","changeType","renderStateType","addTransition","components_editor_Transition","otherStates","helpFunction","renderExactOrRange","range","renderValue","href","window","hash","target","wellness","renderWellness","renderReason","allOptions","renderDischargeDisposition","discharge_disposition","renderTargetEncounter","renderAssignToAttribute","targetEncounter","renderConditionOnset","renderReferencedByAttribute","renderCodes","_this10","_this11","referenced_by_attribute","_this12","_this13","renderAllergyOnset","_this14","_this15","_this16","renderPrescription","renderChronicMed","renderCreateAdministration","_this17","checked","chronic","_this18","administration","_this19","_this20","_this21","prescription","renderRefills","renderAsNeeded","renderDosage","renderDuration","renderInstructions","_this22","refills","_this23","as_needed","_this24","instructions","renderMedicationOrder","_this25","_this26","_this27","renderActivities","renderGoals","_this28","_this29","_this30","activities","_this31","Goal_Goals","renderCarePlan","_this32","_this33","_this34","_this35","_this36","_this37","renderValueContainer","renderToggles","currentItem","_this38","console","log","toggles","_this39","observationCount","_this40","ImagingStudyAttributes_SeriesList","renderProbability","renderCause","classInvalid","moduleName","_this41","_this42","_this43","_this44","_this45","ModulePropertiesEditor","call","onRemarksChange","bind","assertThisInitialized","newval","generateDOT","relatedStates","findTransitions","nodesAsDOT","transitionsAsDOT","node","escapeId","shape","style","fillcolor","fontcolor","details","stateDescription","escapeLabel","params","escapeName","escapedName","out_transitions","transitionClassName","distLabel","pct","cnd","logicDetails","nodeHighlighted","trans","r","p","primarySeries","primaryModality","primaryBodySite","vs","unitv","diagType","diagValue","diagUnits","verb","activity","logic","obs","findReferencedType","leaveUndefinedBlank","threshold","subsOr","prior_description","plan","med","alg","obj","ret","children","?","\"","&","<",">","ModuleGraph","onPanZoom","onMouseUp","onMouseDown","bold","lastDOT","writeSVG","mount","addEventListener","nextProps","panZoomSettings","fullscreen","svgPanZoom","panBy","customPanBy","blockPanZoomEvent","zoom","pan","animationStep","intervalID","stepX","animationTime","stepY","setInterval","clearInterval","ref","height","xmlns","opacity","patternUnits","fill","stroke","strokeWidth","transform","position","top","left","fireClickOnMouseUp","getPan","getZoom","setAttribute","linesShouldBold","Math","originalWidth","originalHeight","dot","innerHTML","Viz","svgDefs","ex","alert","svg","document","getElementById","stopPropagation","removeAttribute","unnecessaryGTitle","querySelector","remove","unnecessaryFill","querySelectorAll","group","originator","hitLine","cloneNode","transitionIndexClass","baseVal","find","startsWith","parseInt","appendChild","getAttribute","match","Number","offsetLeft","getBoundingClientRect","offsetTop","visibleWidth","visibleHeight","zoomFactor","controlIconsEnabled","minZoom","onPan","onZoom","panZoomControlsElement","zoomIn","zoomOut","pow","baseStyle","flex","flexDirection","alignItems","padding","borderWidth","borderRadius","marginBottom","borderColor","borderStyle","backgroundColor","outline","activeStyle","color","acceptStyle","cursor","rejectStyle","StyledDropzone","_useDropzone","useDropzone","accept","onDrop","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useMemo","LoadModule","loadModule","json","JSON","Error","tableMessage","substr","setState","selectedOption","files","file","reader","FileReader","onload","result","readAsText","onLoadJSON","onOptionClick","updateJson","event","renderFooter","loadButton","data-dismiss","closeButton","welcome","onHide","renderDetails","n","indexOf","moduleList","submoduleList","Modules","Folders","Submodules","Branches","renderWelcomeMessage","ID","list","fetch","then","response","branch","changeColor","fetchModuleList","catch","error","currentBranch","folders","includes","fetchModule","currentModule","fetchSubmodule","prevProps","prevState","fetchBranchList","classDetails","visible","marginLeft","marginRight","marginTop","aria-label","aria-hidden","StyledDropZone","Download","onDownload","blob","Blob","refs","codeInput","downloadCsvs","filename","FileSaver","saveAs","downloadCsv","encodeURIComponent","element","body","click","removeChild","stringify","role","disabled","prepareJSON","NavTabs","onChangeModule","onClose","onCloseModule","m","src","CancelButton","alt","extractStates","extractDirectTransition","extractDistributedTransition","extractComplexTransition","extractTableTransition","extractTransition","uuid","create","extractState","findAvailableKey","root","keys_index","next","matches","exec","createSafeKeyFromName","example_module","Age_Guard","Pre_Examplitis","Examplitis","Wellness_Encounter","Examplitol","Pre_Examplotomy","Examplotomy_Encounter","Examplotomy","End_Examplotomy_Encounter","Last_Days","JsonEditor","clearTimeout","setTimeout","jsoneditor_react_es","mode","ace","StateList","search","placeholder","clearSearch","scope","stateFilter","AttributeList","attributeFilter","WarningList","warning","RelatedList","analyze","dispatchThenAnalyze","dispatch","getState","refreshCode","selectNode","addNode","addStructure","editNode","copyNode","jsonEdit","closeModule","editModuleName","editModuleRemarks","changeStateType","undo","redo","showLoadModule","hideLoadModule","showDownload","hideDownload","changeModulePanel","openModule","loadLibrary","charAt","Editor",".","\\","|","pasteNode","takenKeys","startTutorial","steps","joyride","reset","run","renderAddStateButton","data-tip","renderUndoButton","undoEnabled","renderRedoButton","redoEnabled","renderDownloadButton","renderDeleteButton","renderCopyButton","renderPasteButton","renderStateEditor","editor_State","moduleStates","renderDownload","components_menu_Download","renderLoadModule","components_menu_LoadModule","renderModulePropertiesEditor","editor_ModuleProperties","renderModuleGraph","components_graph_ModuleGraph","onPanelResize","panelWidth","deltaX","onPanelResizeDone","leftNavClick","renderPanelContent","components_analysis_StateList","components_editor_JsonEditor","components_analysis_AttributeList","components_analysis_WarningList","components_analysis_RelatedList","renderStateButton","dataTip","StateButton","renderStateListButton","stateCount","StateListButton","renderAttributesButton","attributesCount","AttributeButton","renderWarningButton","warningCount","WarningButton","renderRelatedModulesButton","relatedCount","RelatedButton","nav","renderNav","SyntheaLogo","components_editor_NavTabs","renderMainEditor","FullscreenButton","InfoButton","CodeButton","MinimizePanel","react_draggable_default","axis","onDrag","onStop","bounds","right","Infinity","bottom","originalPanelWidth","LoadingLogo","stepIndex","__webpack_require__","examplitis","ReactTooltip","rebuild","dist_default","effect","delayShow","react_joyride_es","showOverlay","showSkipButton","showStepsProgress","autoStart","debug","allowClicksThruHole","keyboardNavigation","connect","bindActionCreators","store","dispatchLocationChange","listen","App","es","esm","react_router","component","Boolean","hostname","ReactDOM","render","src_App","navigator","serviceWorker","ready","registration","unregister","exports"],"mappings":"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","file":"static/js/main.fac00d12.chunk.js","sourcesContent":["const initialState = {modules: {}, analysis: {}};\r\n\r\nexport default (state = initialState, action) => {\r\n  let newState = null;\r\n  switch (action.type) {\r\n    case 'LOAD_LIBRARY':\r\n      newState = {...state, modules: {...action.data}, location: action.location}\r\n      return newState\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import _ from 'lodash';\r\n\r\n// do not allow direct access because it is easy to forget to clone these templates\r\nexport function getTemplate(path){\r\n\r\n  const parsedPath = path.split('.')\r\n  const template = parsedPath.shift();\r\n  const reducedPath = parsedPath.join('.')\r\n\r\n  let typeVar = null;\r\n  switch(template){\r\n    case 'Type':\r\n      typeVar = TypeTemplates;\r\n      break;\r\n\r\n    case 'Attribute':\r\n      typeVar = AttributeTemplates;\r\n      break;\r\n\r\n    case 'Transition':\r\n      typeVar = TransitionTemplates;\r\n      break;\r\n\r\n    case 'State':\r\n      typeVar = StateTemplates;\r\n      break;\r\n\r\n    case 'Contained':\r\n      typeVar = ContainedTemplates;\r\n      break;\r\n\r\n    case 'Structure':\r\n      typeVar = StructureTemplates;\r\n      break;\r\n\r\n    case 'Module':\r\n      typeVar = ModuleTemplates;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n\r\n  if(reducedPath.length === 0){\r\n    return typeVar\r\n  }\r\n\r\n  return _.cloneDeep(_.get(typeVar, reducedPath));\r\n}\r\n\r\nconst TypeTemplates = {\r\n  Date: {\r\n    Year: 2000,\r\n    Month: 12,\r\n    Day: 25,\r\n    Hour: 0,\r\n    Minute: 0,\r\n    Second: 0,\r\n    Millisecond: 0\r\n  },\r\n  Code: {\r\n    Snomed: {\r\n      system: \"SNOMED-CT\",\r\n      code: \"1234\",\r\n      display: \"SNOMED Code\"\r\n    },\r\n    Loinc: {\r\n      system: \"LOINC\",\r\n      code: \"1234\",\r\n      display: \"LOINC Code\"\r\n    },\r\n    RxNorm: {\r\n      system: \"RxNorm\",\r\n      code: \"1234\",\r\n      display: \"RxNorm Code\"\r\n    },\r\n    Nubc: {\r\n      system: \"NUBC\",\r\n      code: \"1234\",\r\n      display: \"NUBC Code\"\r\n    },\r\n    DicomDCM: {\r\n      system: \"DICOM-DCM\",\r\n      code: \"XX\",\r\n      display: \"DICOM Modality Code\"\r\n    },\r\n    DicomSOP: {\r\n      system: \"DICOM-SOP\",\r\n      code: \"1.2.3.4.5.6.7.8\",\r\n      display: \"DICOM Subject-Object Pair Code\"\r\n    }\r\n  },\r\n\r\n  Condition: {\r\n    Gender: {\r\n      condition_type: 'Gender',\r\n      gender: 'F'\r\n    },\r\n    Age: {\r\n      condition_type: 'Age',\r\n      operator: \">\",\r\n      quantity: 0,\r\n      unit: \"years\"\r\n    },\r\n    Date: {\r\n      condition_type: 'Date',\r\n      operator: \">\",\r\n      year: 2000,\r\n    },\r\n    \"Active Condition\": {\r\n      condition_type: 'Active Condition',\r\n      codes: [{\r\n        system: \"SNOMED-CT\",\r\n        code: \"1234\",\r\n        display: \"SNOMED Code\"\r\n      }],\r\n    },\r\n    \"Socioeconomic Status\": {\r\n        \"condition_type\": \"Socioeconomic Status\",\r\n        \"category\": \"Middle\"\r\n    },\r\n    Race: {\r\n      \"condition_type\": \"Race\",\r\n      \"race\": \"Hispanic\"\r\n    },\r\n    Symptom: {\r\n      \"condition_type\": \"Symptom\",\r\n      \"symptom\" : \"Chest Pain\",\r\n      \"operator\": \">=\",\r\n      \"value\": 50\r\n    },\r\n    Observation: {\r\n      \"condition_type\": \"Observation\",\r\n      \"codes\": [\r\n        {\r\n          \"system\": \"LOINC\",\r\n          \"code\": \"72107-6\",\r\n          \"display\": \"Mini Mental State Examination\"\r\n        }\r\n      ],\r\n      \"operator\": \"==\",\r\n      \"value\": 0\r\n    },\r\n    \"Vital Sign\": {\r\n        \"condition_type\" : \"Vital Sign\",\r\n        \"vital_sign\" : \"Systolic Blood Pressure\",\r\n        \"operator\" : \">\",\r\n        \"value\" : 120\r\n    },\r\n    \"Active Medication\": {\r\n      \"condition_type\": \"Active Medication\",\r\n      \"codes\": [\r\n        {\r\n          \"system\": \"RxNorm\",\r\n          \"code\": \"849727\",\r\n          \"display\": \"Naproxen sodium 220 MG [Aleve]\"\r\n        }\r\n      ]\r\n    },\r\n    \"Active CarePlan\": {\r\n      \"condition_type\": \"Active CarePlan\",\r\n      \"codes\": [\r\n        {\r\n          \"system\": \"SNOMED-CT\",\r\n          \"code\": \"698360004\",\r\n          \"display\": \"Diabetes self management plan\"\r\n        }\r\n      ]\r\n    },\r\n    PriorState: {\r\n      \"condition_type\": \"PriorState\",\r\n      \"name\": \"\"\r\n    },\r\n    Attribute: {\r\n      \"condition_type\": \"Attribute\",\r\n      \"attribute\": \"opiod_prescription\",\r\n      \"operator\": \"==\",\r\n      \"value\": \"Vicodin\"\r\n    },\r\n    And: {\r\n      \"condition_type\": \"And\",\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        }\r\n      ]\r\n    },\r\n    Or: {\r\n      \"condition_type\": \"Or\",\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        }\r\n      ]\r\n    },\r\n    \"At Least\" : {\r\n      \"condition_type\": \"At Least\",\r\n      \"minimum\": 2,\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        },\r\n        {\r\n          \"condition_type\" : \"Active CarePlan\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"698360004\",\r\n              \"display\": \"Diabetes self management plan\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    \"At Most\": {\r\n      \"condition_type\": \"At Most\",\r\n      \"maximum\" : 2,\r\n      \"conditions\": [\r\n        {\r\n          \"condition_type\": \"Gender\",\r\n          \"gender\": \"M\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Age\",\r\n          \"operator\": \">=\",\r\n          \"quantity\": 40,\r\n          \"unit\": \"years\"\r\n        },\r\n        {\r\n          \"condition_type\": \"Active CarePlan\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"698360004\",\r\n              \"display\": \"Diabetes self management plan\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    Not: {\r\n      \"condition_type\": \"Not\",\r\n      \"condition\": {\r\n        \"condition_type\": \"Gender\",\r\n        \"gender\": \"M\"\r\n      }\r\n    },\r\n    \"True\": {\r\n      condition_type: \"True\"\r\n    },\r\n    \"False\": {\r\n      condition_type: \"False\"\r\n    }\r\n  }\r\n}\r\n\r\nconst AttributeTemplates = {\r\n  Exact: {\r\n    quantity: 1\r\n  },\r\n  ExactWithUnit: {\r\n    quantity: 1,\r\n    unit: \"days\"\r\n  },\r\n  Range: {\r\n    low: 1,\r\n    high: 2,\r\n  },\r\n  RangeWithUnit: {\r\n    low: 1,\r\n    high: 2,\r\n    unit: \"days\"\r\n  },\r\n  Prescription: {\r\n    dosage: {\r\n      amount: 1,\r\n      frequency: 1,\r\n      period: 1,\r\n      unit: \"days\"\r\n    },\r\n    duration: {\r\n      quantity: 1,\r\n      unit: \"days\"\r\n    }\r\n  },\r\n  Goal: {\r\n    addresses: [\"text\"]\r\n  },\r\n  Observation: {\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    operator: \"==\",\r\n    value: 1\r\n  },\r\n  Since: \" \",\r\n  Within: {\r\n    quantity: 1,\r\n    unit: \"days\"\r\n  },\r\n  UnnamedDistribution: 1.0,\r\n  NamedDistribution: {\r\n    attribute: \"attribute\",\r\n    default: 1.0\r\n  },\r\n\r\n  ImagingStudy: {\r\n    Instance: {\r\n      title: \"Title of this image\",\r\n      sop_class: {...TypeTemplates.Code.DicomSOP}\r\n    },\r\n    Series: {\r\n      body_site: {...TypeTemplates.Code.Snomed},\r\n      modality: {...TypeTemplates.Code.DicomDCM},\r\n      instances: [{\r\n        title: \"Title of this image\",\r\n        sop_class: {...TypeTemplates.Code.DicomSOP}\r\n      }]\r\n    }\r\n  }\r\n}\r\n\r\n\r\nconst TransitionTemplates = {\r\n  Direct: 'Initial',\r\n  Conditional: [{transition: 'Initial', condition: {...TypeTemplates.Condition.Age}}],\r\n  Distributed: [{transition: 'Initial', distribution: 1.0}],\r\n  Complex: [{condition: {...TypeTemplates.Condition.Age}, distributions: [{transition: 'Initial', distribution: 1.0}]}],\r\n  Table: {\r\n    type: 'Table',\r\n    lookuptable: 'age,Initial,Terminal\\n0-50,.1,.9\\n51-140,.4,.6',\r\n    viewTable: true,\r\n    lookup_table_name_ModuleBuilder: 'file.csv',\r\n    transitions:[{transition: 'Initial', default_probability: 1.0, lookup_table_name: 'table.csv'}]\r\n  }\r\n}\r\n\r\nconst StateTemplates = {\r\n  Initial: {\r\n    type: \"Initial\",\r\n  },\r\n\r\n  Terminal: {\r\n    type: \"Terminal\",\r\n  },\r\n\r\n  Simple: {\r\n    type: \"Simple\",\r\n  },\r\n\r\n  Guard: {\r\n    type: \"Guard\",\r\n    allow: {...TypeTemplates.Condition.Age}\r\n  },\r\n\r\n  Delay: {\r\n    type: \"Delay\",\r\n    exact: {...AttributeTemplates.ExactWithUnit}\r\n  },\r\n\r\n  SetAttribute: {\r\n    type: \"SetAttribute\",\r\n    attribute: \"\"\r\n  },\r\n\r\n  Counter: {\r\n    type: \"Counter\",\r\n    attribute: \"\",\r\n    action: \"increment\"\r\n  },\r\n\r\n  CallSubmodule: {\r\n    type: \"CallSubmodule\",\r\n    submodule: \"\"\r\n  },\r\n\r\n  Encounter: {\r\n    type: \"Encounter\",\r\n    encounter_class: \"ambulatory\",\r\n    reason: \"\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  EncounterEnd: {\r\n    type: \"EncounterEnd\"\r\n  },\r\n\r\n  ConditionOnset: {\r\n    type: \"ConditionOnset\",\r\n    assign_to_attribute: \"\",\r\n    target_encounter: \"\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  ConditionEnd: {\r\n    type: \"ConditionEnd\"\r\n  },\r\n\r\n  AllergyOnset: {\r\n    type: \"AllergyOnset\",\r\n    target_encounter: \"\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  AllergyEnd: {\r\n    type: \"AllergyEnd\"\r\n  },\r\n\r\n  MedicationOrder: {\r\n    type: \"MedicationOrder\",\r\n    codes: [{...TypeTemplates.Code.RxNorm}]\r\n  },\r\n\r\n  MedicationEnd: {\r\n    type: \"MedicationEnd\"\r\n  },\r\n\r\n  CarePlanStart: {\r\n    type: \"CarePlanStart\",\r\n    codes: [{...TypeTemplates.Code.Snomed}]\r\n  },\r\n\r\n  CarePlanEnd: {\r\n    type: \"CarePlanEnd\"\r\n  },\r\n\r\n  Procedure: {\r\n    type: \"Procedure\",\r\n    codes: [{...TypeTemplates.Code.Snomed}],\r\n    duration: {\r\n      low: 30,\r\n      high: 30,\r\n      unit: 'minutes'\r\n    }\r\n  },\r\n\r\n  VitalSign: {\r\n    type: \"VitalSign\",\r\n    vital_sign: \"\",\r\n    unit: \"\",\r\n    exact: {...AttributeTemplates.Exact}\r\n  },\r\n\r\n  Observation: {\r\n    type: \"Observation\",\r\n    category: \"vital-signs\",\r\n    unit: \"\",\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    exact: {...AttributeTemplates.Exact}\r\n  },\r\n\r\n  MultiObservation: {\r\n    type: \"MultiObservation\",\r\n    category: \"vital-signs\",\r\n    number_of_observations: 0,\r\n    codes: [{...TypeTemplates.Code.Loinc}]\r\n  },\r\n\r\n  DiagnosticReport: {\r\n    type: \"DiagnosticReport\",\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    observations: []\r\n  },\r\n\r\n  ImagingStudy: {\r\n    type: \"ImagingStudy\",\r\n    procedure_code: {...TypeTemplates.Code.Snomed},\r\n    series: [{...AttributeTemplates.ImagingStudy.Series}]\r\n  },\r\n\r\n  Symptom: {\r\n    type: \"Symptom\",\r\n    symptom: \"\",\r\n    cause: \"\",\r\n    probability: 1.0,\r\n    exact: {...AttributeTemplates.Exact}\r\n  },\r\n\r\n  Death: {\r\n    type: \"Death\",\r\n    exact: {...AttributeTemplates.ExactWithUnit}\r\n  }\r\n}\r\n\r\nconst ContainedTemplates = {\r\n  Observation: {\r\n    category: \"laboratory\",\r\n    unit: \"\",\r\n    codes: [{...TypeTemplates.Code.Loinc}],\r\n    exact: {...AttributeTemplates.Exact}\r\n  }\r\n}\r\n\r\nconst StructureTemplates = {\r\n  CheckYearly: {\r\n    CheckYearly: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 1, unit: 'years'},\r\n      conditional_transition: [{transition: 'HasCondition', condition: {...TypeTemplates.Condition.ActiveCondition}},{transition: 'CheckYearly'}]},\r\n    HasCondition: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ConditionIncidence: {\r\n    RiskPerMonth: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 1, unit: 'months'},\r\n      distributed_transition: [{distribution: 0.99, transition: 'RiskPerMonth'},{distribution: 0.01, transition: 'AcquireCondition'}]},\r\n    AcquireCondition: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Terminal'}\r\n  },\r\n\r\n  GenderDifference: {\r\n    GenderDifference: {...StateTemplates.Simple,\r\n          conditional_transition: [\r\n            {condition: {...TypeTemplates.Condition.Gender, gender: 'M'}, transition: 'Male'},\r\n            {condition: {...TypeTemplates.Condition.Gender, gender: 'F'}, transition: 'Female'}]},\r\n    Male: {...StateTemplates.Simple, direct_transition: 'Common'},\r\n    Female: {...StateTemplates.Simple, direct_transition: 'Common'},\r\n    Common: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ConditionVariation: {\r\n    VariantDistribution: {...StateTemplates.Simple,\r\n      distributed_transition:[{distribution: 0.25, transition: 'Condition1'},{distribution: 0.35, transition: 'Condition2'},{distribution: 0.40, transition: 'Condition3'}]},\r\n    Condition1: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Condition2: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Condition3: {...StateTemplates.ConditionOnset, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  MedicationVariation: {\r\n    VariantDistribution: {...StateTemplates.Simple,\r\n      distributed_transition:[{distribution: 0.25, transition: 'Medication1'},{distribution: 0.35, transition: 'Medication2'},{distribution: 0.40, transition: 'Medication3'}]},\r\n    Medication1: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication2: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication3: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ChildrensDose: {\r\n    DosageDecision: {...StateTemplates.Simple,\r\n          conditional_transition: [\r\n            {condition: {...TypeTemplates.Condition.Age, operator: '>=', quantity: 18, unit: 'years'}, transition: 'AdultDose'},\r\n            {transition: 'ChildrensDose'}]},\r\n    AdultDose: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    ChildrensDose: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  MedicationsByYear: {\r\n    VariantsByYear: {...StateTemplates.Simple,\r\n          conditional_transition: [\r\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 2007}, transition: 'Medication1'},\r\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 1992}, transition: 'Medication2'},\r\n            {condition: {...TypeTemplates.Condition.Date, operator: '>=', year: 1978}, transition: 'Medication3'},\r\n            {transition: 'Medication4'}]},\r\n    Medication1: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication2: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication3: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Medication4: {...StateTemplates.MedicationOrder, codes:[{system: 'RxNorm', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  },\r\n\r\n  ProcedureVariation: {\r\n    BeginEncounter: {...StateTemplates.Encounter, codes:[{system: 'SNOMED-CT', code: '', display: ''}],\r\n      distributed_transition:[{distribution: 0.25, transition:'Procedure1'},{distribution: 0.35, transition:'Procedure2'},{distribution: 0.40, transition:'Procedure3'}]},\r\n    Procedure1: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation1'},\r\n    Observation1: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Procedure2: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation2'},\r\n    Observation2: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Procedure3: {...StateTemplates.Procedure, codes:[{system: 'LOINC', code: '', display: ''}], direct_transition: 'Observation3'},\r\n    Observation3: {...StateTemplates.Observation, codes:[{system: 'SNOMED-CT', code: '', display: ''}], direct_transition: 'Join'},\r\n    Join: {...StateTemplates.Simple, direct_transition: 'Terminal'}\r\n  }\r\n}\r\n\r\nconst ModuleTemplates = {\r\n  Blank: {\r\n    name: \"Untitled\",\r\n    remarks: [\"A blank module\"],\r\n    states: {\r\n      Initial: {...StateTemplates.Initial, direct_transition: 'Terminal'},\r\n      Terminal: {...StateTemplates.Terminal}\r\n    }\r\n  },\r\n\r\n  Yearly: {\r\n    name: \"Yearly Check for Condition\",\r\n    remarks: [\"Check yearly for patient to have a condition\"],\r\n    states: {\r\n      ...StructureTemplates.CheckYearly,\r\n      Initial: {...StateTemplates.Initial, direct_transition: 'CheckYearly'},\r\n      Terminal: {...StateTemplates.Terminal}\r\n    }\r\n  },\r\n\r\n  DeadAt40: {\r\n    name: \"Dead At 40\",\r\n    remarks: [\"This module is an example of writing a template\"],\r\n    states: {\r\n      Initial: {...StateTemplates.Initial, direct_transition: 'DelayUntil40'},\r\n      DelayUntil40: {...StateTemplates.Delay, exact: {...TypeTemplates.exact, quantity: 40, unit: 'years'}, direct_transition: 'Death'},\r\n      Death: {...StateTemplates.Death, direct_transition: 'Terminal'},\r\n      Terminal: {...StateTemplates.Terminal}\r\n    }\r\n  }\r\n}\r\n","// Converts strings that contain numbers or booleans into their corresponding type\r\n// because that is what GMF expects\r\n\r\nexport function normalizeType(value){\r\n  if(typeof value !== 'string'){\r\n    return value;\r\n  }\r\n  value = value.trim();\r\n  if(/^-?\\d*[\\.]?\\d+$/.test(value) && (parseFloat(value) || parseFloat(value) === 0)){\r\n    value = parseFloat(value);\r\n  }\r\n  if(/^(true|false)$/i.test(value)){\r\n    value = value.toLowerCase() === 'true';\r\n  }\r\n  return value\r\n}\r\n\r\nexport function cleanString(value, mapObj){\r\n  return Object.keys(mapObj).reduce( (acc, cur) => acc.split(cur).join(mapObj[cur]), value)\r\n}\r\n","import _ from 'lodash';\r\nimport { getTemplate } from '../templates/Templates';\r\nimport { normalizeType, cleanString } from '../utils/stringUtils';\r\n\r\nconst initialState = {\r\n    selectedStateKey: null, \r\n    selectedStateTransition: null, \r\n    selectedModuleKey: null, \r\n    loadModuleVisible: false, \r\n    downloadVisible: false,\r\n    selectedModulePanel: 'info',\r\n    modulePanelVisible: true,\r\n    modules: {},\r\n    history: [],\r\n    clipboard: null,\r\n    historyIndex: -1,\r\n    refreshCodeFlag: false\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n\r\n  let newState = {...state}\r\n\r\n  switch (action.type) {\r\n    case 'SELECT_NODE':\r\n      let selectedModulePanel = state.selectedModulePanel;\r\n      if(action.data.key){\r\n        if(selectedModulePanel === 'info' || state.selectedStateKey === action.data.key){ // if on info or a 'double click'\r\n          selectedModulePanel = 'state';\r\n        }\r\n      } else {\r\n        if(selectedModulePanel === 'state'){\r\n          selectedModulePanel = 'info';\r\n        }\r\n      }\r\n\r\n      newState = { ...newState, selectedModulePanel, selectedStateKey: action.data.key, selectedStateTransition: action.data.transitionIndex};\r\n\r\n      // special case where we just want to reflect the selection change in the current history\r\n      newState.history = [...newState.history]\r\n      newState.history[0] = {...newState.history[0], selectedStateKey: action.data.key, selectedStateTransition: action.data.transitionIndex};\r\n\r\n      return newState;\r\n\r\n    case 'COPY_NODE':\r\n      // let newStateName = action.data.newName;\r\n      // let newModuleState = _.cloneDeep(newModuleCopy.states[action.data.targetNode.name]);\r\n      // newModuleState.name = newStateName;\r\n\r\n      // /* fix loopback transition case */\r\n      // renameLoopbackTransition(newModuleState, newStateName, action.data.targetNode.name);\r\n\r\n      // newModuleCopy.states[newStateName] = newModuleState;\r\n      // newState.modules[action.data.targetModuleKey] = newModuleCopy\r\n      // newState.selectedStateKey = action.data.newName;\r\n      // newState.selectedStateTransition = null;\r\n\r\n      newState.clipboard = _.cloneDeep(state.modules[action.data.targetModuleKey].states[action.data.targetNode.name])\r\n\r\n      // saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'ADD_NODE':\r\n\r\n      newState.modules = {...newState.modules}\r\n\r\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, [action.data.stateKey]:action.data.state};\r\n\r\n      if(action.data.selectedState && typeof action.data.selectedStateTransition === 'number'){\r\n        // We have been instructed to insert into the middle of an existing transition\r\n\r\n        let alteredState = _.cloneDeep(newState.modules[action.data.currentModuleKey].states[action.data.selectedState]);\r\n\r\n        if(alteredState.direct_transition && action.data.selectedStateTransition === 0 ){\r\n          let oldTransitionPoint = alteredState.direct_transition;\r\n          alteredState.direct_transition = action.data.stateKey;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        } else if(alteredState.distributed_transition){\r\n          let oldTransitionPoint = alteredState.distributed_transition[action.data.selectedStateTransition].transition;\r\n          alteredState.distributed_transition = [...alteredState.distributed_transition]\r\n          alteredState.distributed_transition[action.data.selectedStateTransition] = {...alteredState.distributed_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        } else if(alteredState.table_transition){\r\n          let oldTransitionPoint = alteredState.table_transition[action.data.selectedStateTransition].transition;\r\n          alteredState.table_transition = [...alteredState.table_transition]\r\n          alteredState.table_transition[action.data.selectedStateTransition] = {...alteredState.table_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        } else if(alteredState.conditional_transition){\r\n          let oldTransitionPoint = alteredState.conditional_transition[action.data.selectedStateTransition].transition;\r\n          alteredState.conditional_transition = [...alteredState.conditional_transition]\r\n          alteredState.conditional_transition[action.data.selectedStateTransition] = {...alteredState.conditional_transition[action.data.selectedStateTransition], transition: action.data.stateKey}\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n\r\n        } else if(alteredState.complex_transition){\r\n          alteredState = {...alteredState, complex_transition: _.cloneDeep(alteredState.complex_transition)};\r\n          let complexTransitions = {}\r\n          let transitionIndex = 0;\r\n          let rightNode = null;\r\n          alteredState.complex_transition.forEach( (t, i) => {\r\n\r\n            if(t.transition !== undefined){\r\n              let nodes = t.transition;\r\n              if(complexTransitions[nodes] === undefined){\r\n                complexTransitions[nodes] = true;\r\n                if(transitionIndex === action.data.selectedStateTransition || nodes === rightNode){\r\n                  rightNode = nodes;\r\n                  let oldTransitionPoint = t.transition;\r\n                  t.transition = action.data.stateKey;\r\n                  newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n                }\r\n                transitionIndex++;\r\n              } else if(nodes === rightNode){\r\n                let oldTransitionPoint = t.transition;\r\n                t.transition = action.data.stateKey;\r\n                newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n              }\r\n            } else {\r\n              t.distributions.forEach( dist => {\r\n                let nodes = dist.transition;\r\n                if(complexTransitions[nodes] === undefined){\r\n                  complexTransitions[nodes] = true;\r\n                  if(transitionIndex === action.data.selectedStateTransition){\r\n                    rightNode = nodes;\r\n                    let oldTransitionPoint = dist.transition;\r\n                    dist.transition = action.data.stateKey;\r\n                    newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n                  }\r\n                  transitionIndex++;\r\n                } else if(nodes == rightNode){\r\n                  let oldTransitionPoint = dist.transition;\r\n                  dist.transition = action.data.stateKey;\r\n                  newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = oldTransitionPoint;\r\n                }\r\n              })\r\n            }\r\n          })\r\n          newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n        }\r\n        newState.selectedStateTransition = 0;\r\n      } else if(action.data.selectedState){\r\n        // we have selected a state, so we will add it AFTER\r\n        let alteredState = _.cloneDeep(newState.modules[action.data.currentModuleKey].states[action.data.selectedState]);\r\n\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['direct_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['conditional_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['distributed_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['complex_transition']\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.stateKey]['table_transition']\r\n\r\n\r\n        if(alteredState.direct_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].direct_transition = alteredState.direct_transition;\r\n        } else if(alteredState.distributed_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].distributed_transition = _.cloneDeep(alteredState.distributed_transition);\r\n          delete alteredState['distributed_transition']\r\n        } else if(alteredState.table_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].table_transition = _.cloneDeep(alteredState.table_transition);\r\n          delete alteredState['table_transition']\r\n        } else if(alteredState.conditional_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].conditional_transition = _.cloneDeep(alteredState.conditional_transition);\r\n          delete alteredState['conditional_transition']\r\n        } else if(alteredState.complex_transition){\r\n          newState.modules[action.data.currentModuleKey].states[action.data.stateKey].complex_transition = _.cloneDeep(alteredState.complex_transition);\r\n          delete alteredState['complex_transition']\r\n        }\r\n        alteredState.direct_transition = action.data.stateKey;\r\n        newState.modules[action.data.currentModuleKey].states[action.data.selectedState] = alteredState;\r\n\r\n      }\r\n\r\n      newState.selectedStateKey = action.data.stateKey;\r\n      newState.selectedModulePanel= 'state';\r\n      newState.selectedStateTransition = null;\r\n\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState;\r\n\r\n    case 'INSERT_NODE':\r\n\r\n      newState.modules = {...newState.modules}\r\n\r\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, [action.data.stateKey]:action.data.state};\r\n      newState.selectedStateKey = action.data.stateKey;\r\n      newState.selectedModulePanel= 'state';\r\n      newState.selectedStateTransition = null;\r\n\r\n      saveHistory(newState);\r\n\r\n      return {...newState};\r\n\r\n    case 'ADD_STRUCTURE':\r\n      newState.modules[action.data.currentModuleKey].states = {...newState.modules[action.data.currentModuleKey].states, ...getTemplate(`Structure.${action.data.structureName}`)};\r\n      newState.selectedStateTransition = null;\r\n\r\n      saveHistory(newState);\r\n\r\n      return {...newState}\r\n\r\n    case 'OPEN_MODULE':\r\n      let selectedModuleKey = state.selectedModuleKey;\r\n\r\n      selectedModuleKey = action.data.key\r\n      if(action.data.libraryModule){\r\n        delete newState.modules[action.data.key];\r\n        let newModule = {}\r\n        newModule[action.data.key] = _.cloneDeep(action.data.libraryModule);\r\n        newState.modules = {...newModule, ...newState.modules}\r\n      }\r\n\r\n      if(!newState.modules[action.data.key]){\r\n        selectedModuleKey = null;\r\n      }\r\n\r\n      newState.selectedModuleKey = selectedModuleKey;\r\n      newState.selectedStateKey = null;\r\n      newState.selectStateTransition = null;\r\n      newState.loadModuleVisible = false;\r\n      newState.history = [];\r\n      newState.historyIndex = 0;\r\n      newState.selectedModulePanel = 'info';\r\n\r\n      saveHistory(newState);\r\n\r\n      return { ...newState };\r\n\r\n    case 'NEW_MODULE':\r\n      let newModules = {...state.modules}\r\n      delete newModules[action.data.key]\r\n\r\n      let tempModule = {}; // put in the right order in the object for the tabs\r\n      tempModule[action.data.key] = action.data.module;\r\n    \r\n\r\n      newState.history = [];\r\n      newState.historyIndex = 0;\r\n      saveHistory(newState);\r\n\r\n      return {...newState, modules: {...tempModule, ...newModules}, selectedStateKey: null, selectedStateTransition: null, selectedModuleKey: action.data.key}\r\n\r\n    case 'JSON_EDIT':\r\n      newState.modules = {...newState.modules}\r\n      newState.modules[state.selectedModuleKey] = _.cloneDeep(action.data.module);\r\n      saveHistory(newState);\r\n      return {...newState};\r\n\r\n    case 'EDIT_NODE':\r\n      let path = action.data.path.join('.');\r\n      let value = Object.values(action.data.update)[0]\r\n      if(typeof value === 'object') {\r\n        value = value.id;\r\n      }\r\n      if(value !== null && value !== undefined) {\r\n        _.set(newState.modules, path, normalizeType(value));\r\n\r\n        // FIX DEPENDENT THINGS\r\n        let splitPath = []\r\n        if(Array.isArray(path)){\r\n          splitPath = path.join('.').split('.')\r\n        } else {\r\n          splitPath = path.split('.')\r\n        }\r\n\r\n        // If change operator on attribute, clean up value if needed\r\n        if(splitPath[splitPath.length-1] === 'operator'){\r\n          const parent = _.get(newState.modules, splitPath.slice(0,-1).join('.'));\r\n          if((parent.operator === 'is nil' || parent.operator === 'is not nil')){\r\n            _.unset(newState.modules, splitPath.slice(0,-1).join('.') + '.value')\r\n          } else {\r\n            if(parent.operator.value === undefined){\r\n              _.set(newState.modules, splitPath.slice(0,-1).join('.') + '.value', 0)\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else{\r\n        _.unset(newState.modules, path);\r\n        let parent = [...action.data.path].splice(0, action.data.path.length -1).join(\".\");\r\n        if (action.data.path[2] == 'table_transition'){\r\n         parent  += '.transitions'\r\n        }\r\n        let newVal = _.get(newState.modules, parent);\r\n        if(Array.isArray(newVal)) {\r\n          _.set(newState.modules, parent, newVal.filter(x => x));\r\n        }\r\n\r\n        // check to see if it is a node deletion, in which case we need to references\r\n        let splitPath = []\r\n        if(Array.isArray(path)){\r\n          splitPath = path.join('.').split('.')\r\n        } else {\r\n          splitPath = path.split('.')\r\n        }\r\n\r\n        if(splitPath.length === 3 && splitPath[1] === 'states'){\r\n          let stateName = splitPath[2]\r\n          fixStateReferences(newState.modules[splitPath[0]], stateName, null)\r\n\r\n          if(splitPath[2] == newState.selectedStateKey){\r\n            newState.selectedStateKey = null; // deleselect\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'ADD_TRANSITION':\r\n\r\n      let transitionMapping = {\r\n        Conditional: 'conditional_transition',\r\n        Distributed: 'distributed_transition',\r\n        Direct: 'direct_transition',\r\n        Complex: 'complex_transition',\r\n        Table: 'table_transition',\r\n      };\r\n\r\n      let transitionName = transitionMapping[action.data.transitionType];\r\n      let oldTransitionName = null;\r\n      if (action.data.nodeName.transition != null) {\r\n        oldTransitionName = transitionMapping[action.data.nodeName.transition.type];\r\n      }\r\n\r\n      let paths = Object.values(transitionMapping);\r\n      for (var pathIndex in paths) {\r\n        delete newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][paths[pathIndex]];\r\n      }\r\n      newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName] = getTemplate(`Transition.${action.data.transitionType}`);\r\n\r\n      // Get first of previous transition locations if available\r\n      let transitionTo = null;\r\n      switch(oldTransitionName) {\r\n        case 'direct_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.to', null);\r\n          break;\r\n        case 'distributed_transition':\r\n        case 'conditional_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.transition[0].to', null);\r\n          break;\r\n        case 'complex_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.transition[0].distributions[0].to', null);\r\n          break;\r\n        case 'table_transition':\r\n          transitionTo = _.get(action, 'data.nodeName.transition.transitions.transition[0].to', null);\r\n          break;\r\n      }\r\n\r\n      // Provide previous transition location to new if available\r\n      if (transitionTo !== null) {\r\n        switch(transitionName) {\r\n          case 'direct_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName] = transitionTo;\r\n            break;\r\n          case 'distributed_transition':\r\n          case 'conditional_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName][0].transition = transitionTo;\r\n            break;\r\n          case 'complex_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName][0].distributions[0].transition = transitionTo;\r\n            break;\r\n          case 'table_transition':\r\n            newState.modules[action.data.currentModuleKey].states[action.data.nodeName.name][transitionName].transitions[0].transition = transitionTo;\r\n            break;\r\n        }\r\n      }\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'RENAME_NODE':\r\n\r\n      let stateName = action.data.targetNode.name;\r\n      let newName = action.data.newName.name;\r\n      let newModule = _.cloneDeep(state.modules[action.data.targetModuleKey])\r\n      let moduleState = newModule.states[stateName]\r\n\r\n\r\n      if(moduleState === undefined){\r\n        // if we can't find it, then it might be a blank state (Unnamed state)\r\n        // Check in the blank key\r\n        moduleState = newModule.states[\"\"]\r\n        stateName = \"\"\r\n      }\r\n\r\n      if(moduleState === undefined){\r\n        // If we still can't find the state, let's just hop out of here.\r\n        return newState;\r\n      }\r\n\r\n      delete newModule.states[stateName];\r\n\r\n      moduleState.name = newName\r\n      newModule.states[newName] = moduleState\r\n\r\n      fixStateReferences(newModule, stateName, newName);\r\n      newState.modules[action.data.targetModuleKey] = newModule;\r\n      newState.selectedStateKey = action.data.newName.name;\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'EDIT_MODULE_NAME':\r\n      newState.modules[action.data.targetModuleKey].name = action.data.newName;\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState;\r\n\r\n    case 'EDIT_MODULE_REMARKS':\r\n\r\n      newState.modules[action.data.targetModuleKey].remarks = action.data.newRemarks ? action.data.newRemarks.split(\"\\n\") : null;\r\n      if(newState.modules[action.data.targetModuleKey].remarks === null){\r\n        delete newState.modules[action.data.targetModuleKey].remarks;\r\n      }\r\n      saveHistory(newState);\r\n\r\n      return newState;\r\n\r\n    case 'CHANGE_STATE_TYPE':\r\n      let newType = action.data.newType.type.id;\r\n      // This line is weird because we need to add the new fields, overwrite any shared fields, then overwrite the type fields\r\n      // TODO figure out how to remove unused fields\r\n      newState.modules[action.data.targetModuleKey].states[action.data.targetNode.name] =\r\n        { ...getTemplate(`State.${newType}`),\r\n          ..._.pick(newState.modules[action.data.targetModuleKey].states[action.data.targetNode.name], ['direct_transition', 'conditional_transition', 'distributed_transition', 'complex_transition', 'table_transition', 'remarks']),\r\n          type: getTemplate(`State.${newType}`).type\r\n        };\r\n\r\n      saveHistory(newState);\r\n\r\n      return newState\r\n\r\n    case 'LOAD_JSON':\r\n\r\n      newState.history = []\r\n      newState.historyIndex = 0;\r\n      saveHistory(newState);\r\n\r\n      return { ...newState, selectedModuleKey: action.data.selectedModuleKey, selectedStateKey: null, selectedStateTransition: null};\r\n\r\n    case 'CLOSE_MODULE':\r\n\r\n      delete newState.modules[action.data.selectedModuleKey];\r\n\r\n      newState.history = []\r\n      newState.historyIndex = 0;\r\n      saveHistory(newState);\r\n\r\n      return { ...newState};\r\n\r\n    case 'SHOW_LOAD_MODULE':\r\n      return { ...newState, loadModuleVisible: true};\r\n\r\n    case 'HIDE_LOAD_MODULE':\r\n      return { ...newState, loadModuleVisible: false};\r\n          \r\n    case 'SHOW_DOWNLOAD':\r\n      return { ...newState, downloadVisible: true};\r\n\r\n    case 'HIDE_DOWNLOAD':\r\n      return { ...newState, downloadVisible: false};\r\n\r\n    case 'CHANGE_MODULE_PANEL':\r\n      return { ...newState, selectedModulePanel: action.data.targetPanel, modulePanelVisible: action.data.targetPanel !== 'hide'};\r\n\r\n    case 'REFRESH_CODE_FLAG': \r\n      return {...newState, refreshCodeFlag: action.data.flag}\r\n\r\n    case 'UNDO':\r\n      if(newState.history.length > newState.historyIndex + 1){\r\n        newState.historyIndex++;\r\n        newState.modules = {...newState.modules}\r\n        newState.modules[newState.selectedModuleKey] = _.cloneDeep(newState.history[newState.historyIndex].module);\r\n        newState.selectedStateKey = newState.history[newState.historyIndex].selectedStateKey;\r\n        newState.selectedStateTransition = newState.history[newState.historyIndex].selectedStateTransition;\r\n      }\r\n      return {...newState}\r\n\r\n    case 'REDO':\r\n      if(newState.historyIndex > 0){\r\n        newState.historyIndex--;\r\n        newState.modules = {...newState.modules}\r\n        newState.modules[newState.selectedModuleKey] = _.cloneDeep(newState.history[newState.historyIndex].module);\r\n        newState.selectedStateKey = newState.history[newState.historyIndex].selectedStateKey;\r\n        newState.selectedStateTransition = newState.history[newState.historyIndex].selectedStateTransition;\r\n      }\r\n      return {...newState}\r\n\r\n    default:\r\n      return newState;\r\n\r\n  }\r\n}\r\n\r\n// updates the module in-place with fixed state refences\r\n// if newName is null, then delete all references instead\r\nconst fixStateReferences = (module, stateName, newName) => {\r\n\r\n  Object.keys(module.states).map(s => module.states[s]).forEach( state => {\r\n\r\n    if(state.direct_transition === stateName){\r\n      if(newName === null){\r\n        delete state.direct_transition\r\n      } else {\r\n        state.direct_transition = newName\r\n      }\r\n\r\n    } else if (state.distributed_transition){\r\n      state.distributed_transition.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n      })\r\n    } else if (state.table_transition){\r\n      state.table_transition.transitions.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n      })\r\n    }  else if (state.conditional_transition){\r\n      state.conditional_transition.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n        if(transition.condition){\r\n          if(transition.condition.condition_type === 'PriorState' && transition.condition.name === stateName){\r\n            if(newName === null){\r\n              delete transition.condition.name\r\n            } else {\r\n              transition.condition.name = newName\r\n            }\r\n          }\r\n        }\r\n      })\r\n    } else if (state.complex_transition){\r\n      state.complex_transition.forEach( transition => {\r\n        if(transition.transition === stateName){\r\n          if(newName === null){\r\n            delete transition.transition\r\n          } else {\r\n            transition.transition = newName\r\n          }\r\n        }\r\n        if(transition.condition){\r\n          if(transition.condition.condition_type === 'PriorState' && transition.condition.name === stateName){\r\n            if(newName === null) {\r\n              delete transition.condition.name\r\n            } else {\r\n              transition.condition.name = newName\r\n            }\r\n          }\r\n        }\r\n        if(transition.distributions){\r\n          transition.distributions.forEach( distribution => {\r\n            if(distribution.transition === stateName){\r\n              if(newName === null){\r\n                delete distribution.transition\r\n              } else {\r\n                distribution.transition = newName\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n    if(state.reason === stateName){\r\n      if(newName === null){\r\n        delete state.reason\r\n      } else {\r\n        state.reason = newName;\r\n      }\r\n    }\r\n    if(state.target_encounter === stateName){\r\n      if(newName === null){\r\n        state.target_encounter = \"\" // this is a requried field\r\n      } else {\r\n        state.target_encounter = newName;\r\n      }\r\n    }\r\n    if(state.condition_onset === stateName){\r\n      if(newName === null){\r\n        delete state.condition_onset\r\n      } else {\r\n        state.condition_onset = newName;\r\n      }\r\n    }\r\n    if(state.allergy_onset === stateName){\r\n      if(newName === null){\r\n        delete state.allergy_onset\r\n      } else {\r\n        state.allergy_onset = newName;\r\n      }\r\n    }\r\n    if(state.medication_order === stateName){\r\n      if(newName === null){\r\n        delete state.medication_order\r\n      } else {\r\n        state.medication_order = newName;\r\n      }\r\n    }\r\n    if(state.careplan === stateName){\r\n      if(newName === null){\r\n        delete state.careplan;\r\n      } else {\r\n        state.careplan = newName;\r\n      }\r\n    }\r\n    if(state.allow && state.allow.condition_type === 'PriorState' && state.allow.name === stateName){\r\n      if(newName === null){\r\n        delete state.allow.name\r\n      } else {\r\n        state.allow.name = newName;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nconst saveHistory = (state) => {\r\n  let selectedStateKey = state.selectedStateKey;\r\n  let selectedStateTransition = state.selectedStateTransition;\r\n\r\n  if(state.historyIndex > 0){\r\n    while(state.historyIndex > 0 && state.history.length > 0){\r\n      state.historyIndex--;\r\n      state.history.shift()\r\n    }\r\n\r\n    state.historyIndex = 0; // should always be 0 anyhow\r\n\r\n  }\r\n\r\n  state.history = [{selectedStateKey, selectedStateTransition, module: _.cloneDeep(state.modules[state.selectedModuleKey])}].concat(state.history);\r\n\r\n  state.history.splice(20) // only save the last 20 changes\r\n}\r\n\r\n// When nodes are cloned, loopback transitions point to node being cloned, instead of new copy\r\nconst renameLoopbackTransition = (state, newStateName, oldStateName) => {\r\n  if(state.direct_transition === oldStateName){\r\n    state.direct_transition = newStateName;\r\n  } else if (state.distributed_transition){\r\n    state.distributed_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n    })\r\n  } else if (state.table_transition){\r\n    state.table_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n    })\r\n  } else if (state.conditional_transition){\r\n    state.conditional_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n    })\r\n  } else if (state.complex_transition){\r\n    state.complex_transition.forEach( transition => {\r\n      if(transition.transition === oldStateName){\r\n        transition.transition = newStateName\r\n      }\r\n      if(transition.distributions){\r\n        transition.distributions.forEach( distribution => {\r\n          if(distribution.transition === oldStateName){\r\n            distribution.transition = newStateName\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n","import _ from 'lodash'\r\nimport { getTemplate } from '../templates/Templates'\r\nimport Papa from 'papaparse'\r\nimport { isNumber } from 'util';\r\nimport { stat } from 'fs';\r\n\r\nconst initialState = {\r\n  libraryModuleCodes: {}, // list types of nodes\r\n  warnings: [],\r\n  libraryRelatedModules: {},\r\n  relatedModules: [],\r\n  attributes: []\r\n};\r\n\r\nconst attributes = module => {\r\n  const attributes = [];\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n    \r\n     if(state.type === 'SetAttribute'){\r\n       attributes.push({attribute: state.attribute, stateName: state.name, stateType: state.type});\r\n     } else if(state.assign_to_attribute){\r\n       attributes.push({attribute: state.assign_to_attribute, stateName: state.name, stateType: state.type});\r\n     }\r\n  });\r\n\r\n  return attributes.sort(function(a, b){\r\n    var x = a.attribute.toLowerCase();\r\n    var y = b.attribute.toLowerCase();\r\n    if (x < y) {return -1;}\r\n    if (x > y) {return 1;}\r\n    return 0;\r\n  })\r\n}\r\n\r\nconst templateCodes = {};\r\nObject.keys(getTemplate('Type').Code).map(c => getTemplate('Type').Code[c]).forEach(code => {\r\n  templateCodes[`${code.code}-${code.system}-${code.display}`] = true;\r\n});\r\n\r\nconst placeholderCodeWarnings = (module) => {\r\n  const warnings = [];\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n    state.codes && state.codes.forEach(code => {\r\n      if(templateCodes[`${code.code}-${code.system}-${code.display}`]){\r\n        warnings.push({stateName: stateName, message: 'Code uses an invalid template code: ' + code.system + '[' + code.code + ']'});\r\n      }\r\n    });\r\n\r\n    switch(state.type){\r\n      case 'MultiObservation':\r\n      case 'DiagnosticReport':\r\n        if(state.observations){\r\n          state.observations.forEach(o => {\r\n          o.codes && o.codes.forEach(code => {\r\n            if(templateCodes[`${code.code}-${code.system}-${code.display}`]){\r\n              warnings.push({stateName: stateName, message: 'Code in observation uses an invalid template code: ' + code.system + '[' + code.code + ']'});\r\n            }\r\n          })\r\n        })}\r\n\r\n        break; \r\n      case 'ImagingStudy':\r\n        if(state.procedure_code){\r\n            if(templateCodes[`${state.procedure_code.code}-${state.procedure_code.system}-${state.procedure_code.display}`]){\r\n              warnings.push({stateName: stateName, message: 'Code in procedure code uses an invalid template code: ' + state.procedure_code.system + '[' + state.procedure_code.code + ']'});\r\n            }\r\n        }\r\n        if(state.series ){\r\n          state.series.forEach(series => {\r\n            if(series.body_site){\r\n              if(templateCodes[`${series.body_site.code}-${series.body_site.system}-${series.body_site.display}`]){\r\n                warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + series.body_site.system + '[' + series.body_site.code + ']'});\r\n              }\r\n            }\r\n            if(series.modality){\r\n              if(templateCodes[`${series.modality.code}-${series.modality.system}-${series.modality.display}`]){\r\n                warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + series.modality.system + '[' + series.modality.code + ']'});\r\n              }\r\n            }\r\n            if(series.instances){\r\n              series.instances.forEach(instance => {\r\n                if(instance.sop_class){\r\n                  if(templateCodes[`${instance.sop_class.code}-${instance.sop_class.system}-${instance.sop_class.display}`]){\r\n                    warnings.push({stateName: stateName, message: 'Code in imaging series uses an invalid template code: ' + instance.sop_class.system + '[' + instance.sop_class.code + ']'});\r\n                  }\r\n                }\r\n              })\r\n            }\r\n\r\n          })\r\n\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n\r\n\r\n    }\r\n  })\r\n  return warnings;\r\n\r\n}\r\n\r\nconst tableTransitionWarnings = (module) => {\r\n  \r\n  const warnings = [];\r\n\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n\r\n    // find table transitions and check table data\r\n    if (state.table_transition !== undefined){\r\n      let message = '';\r\n      if(state.table_transition.lookup_table_name_ModuleBuilder === \"\"){\r\n        message = 'Invalid filename ';\r\n      }\r\n      if (state.table_transition.lookuptable === \"Enter table\" || tableHasError(state.table_transition.lookuptable) ) { \r\n        if (message === ''){ \r\n          message = 'Invalid data ';\r\n        } else {\r\n          message += 'and invalid data '\r\n        }\r\n      }\r\n      // check the last X columns vs X transitions\r\n      if (!tableHasError(state.table_transition.lookuptable)){\r\n        let tableColumns = [];\r\n        let data = parseLookupTable(state.table_transition.lookuptable);\r\n        if (data.length > 0){ \r\n          tableColumns = Object.keys(data[0]);\r\n        }\r\n\r\n        for (let i = 0; i < state.table_transition.transitions.length; i++)\r\n        {\r\n          let transition = state.table_transition.transitions[state.table_transition.transitions.length - i - 1].transition;\r\n          let column = tableColumns[tableColumns.length-i -1];\r\n          if (transition != column)\r\n          {\r\n            if (message === '')\r\n            {\r\n              message += 'Invalid columns (table data and transitions to state don\\'t match) '\r\n            } else {\r\n              message += ' and invalid columns (table data and transitions to states don\\'t match) '\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (message !== ''){\r\n        message += 'for table in ';\r\n        warnings.push({stateName, message: message + stateName + '. '});\r\n      }        \r\n    }\r\n  });\r\n\r\n  return warnings;\r\n}\r\n\r\nconst parseLookupTable = (data) => {\r\n  let parsed;\r\n  if (isNumber(data))\r\n  {\r\n    data  = data.toString();\r\n  }\r\n  Papa.parse(data, {\r\n  header: true,\r\n  complete: function(results) {\r\n    parsed=results;\r\n  }\r\n  });\r\n      \r\n  return parsed.data;\r\n}    \r\n\r\nconst tableHasError = (lookuptable) =>{    \r\n  let data = parseLookupTable(lookuptable);\r\n  let textOk = !(lookuptable == 'Enter table' || lookuptable == '')\r\n  let parseOk = (data.length > 0 && Object.keys(data[0]).length > 0)\r\n if (textOk && parseOk ){\r\n    return false;\r\n  } else {\r\n    return true;\r\n  } \r\n}\r\n\r\nconst stateCollisionWarnings = (module, globalCodes) => {\r\n  const equivalentStates = [\r\n   ['MedicationOrder', 'MedicationEnd'],\r\n   ['ConditionOnset', 'ConditionEnd'],\r\n   ['CarePlanStart', 'CarePlanEnd'],\r\n   ['AllergyOnset', 'AllergyEnd'],\r\n  ];\r\n\r\n  const isEquivalentStates = (first, second) => {\r\n    return (first === second || equivalentStates.filter(e => (e[0] === first && e[1] === second) || (e[0] === second && e[1] === first)).length > 0)\r\n  }\r\n\r\n  const checkCollision = libraryState =>  (local => !isEquivalentStates(local.state.type, libraryState.type) && local.state.type !== 'Death' && libraryState.type !== 'Death');\r\n\r\n  const warnings = [];\r\n  Object.keys(module.states).forEach(stateName => {\r\n    let state = module.states[stateName];\r\n    state.codes && state.codes.forEach(code => {\r\n\r\n      if(globalCodes[code.code]){\r\n        let collisions = globalCodes[code.code].filter(checkCollision(state));\r\n        if(collisions.length > 0){\r\n          warnings.push({stateName, message: 'Code collision with state ' + collisions[0].stateName + ' in module ' + collisions[0].moduleKey + '. '});\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  return warnings;\r\n\r\n}\r\n\r\nconst orphanStateWarnings = (module) => {\r\n  const warnings = [];\r\n\r\n  const visitedStateCheck = Object.keys(module.states).reduce( (acc, value) => {acc[value] = false; return acc}, {})\r\n\r\n  const visitNext = [];\r\n\r\n  if(module.states['Initial']){\r\n    visitNext.push('Initial');\r\n  };\r\n\r\n  while(visitNext.length > 0){\r\n    let nextStateKey = visitNext.pop();\r\n    let nextState = module.states[nextStateKey];\r\n    visitedStateCheck[nextStateKey] = true;\r\n\r\n    if(nextState.direct_transition){\r\n      if(!module.states[nextState.direct_transition]){\r\n        warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + nextState.direct_transition});\r\n      } else {\r\n        if(!visitedStateCheck[nextState.direct_transition]){\r\n          visitNext.push(nextState.direct_transition);\r\n        }\r\n      }\r\n    } else if(nextState.distributed_transition){\r\n      nextState.distributed_transition.forEach(transition => {\r\n        if(!module.states[transition.transition]){\r\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n        } else {\r\n          if(!visitedStateCheck[transition.transition]){\r\n            visitNext.push(transition.transition);\r\n          }\r\n        }\r\n      });\r\n    } else if(nextState.table_transition){\r\n      nextState.table_transition.transitions.forEach(transition => {\r\n        if(!module.states[transition.transition]){\r\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n        } else {\r\n          if(!visitedStateCheck[transition.transition]){\r\n            visitNext.push(transition.transition);\r\n          }\r\n        }\r\n      });\r\n    } \r\n    else if(nextState.conditional_transition){\r\n      nextState.conditional_transition.forEach(transition => {\r\n        if(!module.states[transition.transition]){\r\n          warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n        } else {\r\n          if(!visitedStateCheck[transition.transition]){\r\n            visitNext.push(transition.transition);\r\n          }\r\n        }\r\n      });\r\n    } else if (nextState.complex_transition){\r\n      nextState.complex_transition.forEach( transition => {\r\n        if(transition.transition){\r\n          if(!module.states[transition.transition]){\r\n            warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + transition.transition});\r\n          } else {\r\n            if(!visitedStateCheck[transition.transition]){\r\n              visitNext.push(transition.transition);\r\n            }\r\n          }\r\n        }\r\n        if(transition.distributions){\r\n          transition.distributions.forEach( distribution => {\r\n            if(!module.states[distribution.transition]){\r\n              warnings.push({stateName: nextStateKey, message: 'Transition to state that does not exist: ' + distribution.transition});\r\n            } else {\r\n              if(!visitedStateCheck[distribution.transition]){\r\n                visitNext.push(distribution.transition);\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  let notVisitedWarnings = Object.keys(visitedStateCheck).map(s => {return {state: s, visited: visitedStateCheck[s]}}).filter(v => !v.visited).map(v => {\r\n    return {\r\n      stateName: v.state,\r\n      message: 'State cannot be reached.'\r\n    };\r\n  });\r\n\r\n  return [...warnings, ...notVisitedWarnings];\r\n\r\n}\r\n\r\nconst libraryModuleCodes = (modules) => {\r\n    const libraryModuleCodes = {};\r\n\r\n    Object.keys(modules).forEach(moduleKey => {\r\n      const module = modules[moduleKey];\r\n      Object.keys(module.states).forEach(stateName => {\r\n        const moduleState = module.states[stateName];\r\n        moduleState.codes && moduleState.codes.forEach(code => {\r\n          if(!libraryModuleCodes[code.code]){\r\n            libraryModuleCodes[code.code] = []\r\n          }\r\n          libraryModuleCodes[code.code].push({...code, moduleKey, stateName, state: moduleState});\r\n        });\r\n      });\r\n    });\r\n    return libraryModuleCodes;\r\n}\r\n\r\nconst libraryRelatedModules = (modules) => {\r\n  const libraryRelatedModules = {};\r\n\r\n  Object.keys(modules).forEach(moduleKey => {\r\n    const module = modules[moduleKey];\r\n    Object.keys(module.states).forEach(stateName => {\r\n      const moduleState = module.states[stateName];\r\n      if(moduleState.type === 'CallSubmodule'){\r\n        libraryRelatedModules[moduleKey] = libraryRelatedModules[stateName] || []\r\n        libraryRelatedModules[moduleKey].push({type: 'submodule', moduleKey: moduleState.submodule, stateName})\r\n\r\n        libraryRelatedModules[moduleState.submodule] = libraryRelatedModules[moduleState.submodule] || []\r\n        libraryRelatedModules[moduleState.submodule].push({type: 'submodule', moduleKey, stateName})\r\n      }\r\n    });\r\n  });\r\n  return libraryRelatedModules;\r\n\r\n}\r\n\r\nconst relatedBySubmodule = (moduleKey, module, relatedMap) => {\r\n  let related = [];\r\n\r\n  if(relatedMap[moduleKey]){\r\n    related = _.cloneDeep(relatedMap[moduleKey]);\r\n  }\r\n  \r\n  Object.keys(module.states).forEach(stateName => {\r\n    const moduleState = module.states[stateName];\r\n     if(moduleState.type === 'CallSubmodule'){\r\n       related.push({type: 'submodule', module: moduleState.submodule, stateName});\r\n     }\r\n  });\r\n\r\n  return related;\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n  let newState = {...state};\r\n  switch (action.type) {\r\n    case 'ANALYZE':\r\n\r\n      newState.warnings = [...stateCollisionWarnings(action.data.module, newState.libraryModuleCodes),\r\n                           ...orphanStateWarnings(action.data.module),\r\n                           ...placeholderCodeWarnings(action.data.module),\r\n                           ...tableTransitionWarnings(action.data.module)];\r\n\r\n      newState.relatedModules = [...relatedBySubmodule(action.data.moduleKey, action.data.module, newState.libraryRelatedModules)];\r\n\r\n      newState.attributes = attributes(action.data.module);\r\n\r\n      return newState;\r\n\r\n    case 'LOAD_LIBRARY':\r\n\r\n      newState.libraryModuleCodes = libraryModuleCodes(action.data);\r\n      newState.libraryRelatedModules = libraryRelatedModules(action.data);\r\n\r\n      return newState\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createBrowserHistory } from 'history';\r\nimport { applyMiddleware, compose, createStore } from 'redux';\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport createRootReducer from './reducers';\r\n\r\nconst initialState = {}\r\nconst enhancers = [];\r\nconst middleware = [];\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  const devToolsExtension = window.devToolsExtension\r\n\r\n  if (typeof devToolsExtension === 'function') {\r\n    enhancers.push(devToolsExtension())\r\n  }\r\n}\r\n\r\nexport const history = createBrowserHistory({basename: '/module-builder'})\r\n\r\nconst createAppStore = (history) => {\r\n  middleware.push(routerMiddleware(history))\r\n  middleware.push(thunk)\r\n  const composedEnhancers = compose(\r\n    applyMiddleware(...middleware),\r\n    ...enhancers\r\n  )\r\n\r\n  const store = createStore(\r\n    createRootReducer(history), // root reducer with router state\r\n    initialState,\r\n    composedEnhancers\r\n  )\r\n  return store;\r\n}\r\n\r\nexport default createAppStore;\r\n","import { combineReducers } from 'redux';\r\nimport { connectRouter } from 'connected-react-router'\r\n\r\nimport library from './library';\r\nimport editor from './editor';\r\nimport analysis from './analysis';\r\n\r\nexport default (history) => combineReducers({\r\n  router : connectRouter(history),\r\n  library,\r\n  editor,\r\n  analysis\r\n});\r\n","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { RIEInput } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { Code as CodeType } from '../../types/Code';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype Props = {\r\n  code: CodeType,\r\n  system: string,\r\n  onChange: any\r\n}\r\n\r\nexport class Code extends Component<Props> {\r\n\r\n  render() {\r\n    let code = this.props.code;\r\n    let system = this.props.system;\r\n    return (\r\n      <div>\r\n        System: {system}\r\n        <br />\r\n        Code: <RIEInput className='editable-text' value={code.code} propName=\"code\" change={this.props.onChange('code')} />\r\n        <br />\r\n        Display: <RIEInput className='editable-text' value={code.display} propName=\"display\" change={this.props.onChange('display')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\ntype CodesProps = {\r\n  codes: CodeType[],\r\n  system: string,\r\n  onChange: any\r\n}\r\nexport class Codes extends Component<CodesProps> {\r\n  render() {\r\n\r\n    if(!this.props.codes){\r\n      return null;\r\n    }\r\n    let system = this.props.system;\r\n    let templates = {\r\n      \"SNOMED-CT\": getTemplate('Type.Code.Snomed'),\r\n      \"LOINC\": getTemplate('Type.Code.Loinc'),\r\n      \"RxNorm\": getTemplate('Type.Code.RxNorm'),\r\n      \"NUBC\": getTemplate('Type.Code.Nubc'),\r\n      \"DICOM-DCM\": getTemplate('Type.Code.DicomDCM'),\r\n      \"DICOM-SOP\": getTemplate('Type.Code.DicomSOP')\r\n    };\r\n    return (\r\n      <div>\r\n        {this.props.codes.map((code, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <Code onChange={this.props.onChange(i)} code={code} system={system}/>\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.codes.length}]`)({val: {id: _.cloneDeep(templates[system])}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIEInput } from 'riek';\r\n\r\ntype Props = {\r\n  label: string,\r\n  value: string,\r\n  onChange: any\r\n};\r\n\r\nexport class StringEditor extends Component<Props> {\r\n  render() {\r\n    let value = this.props.value;\r\n    return (\r\n      <div>\r\n        {this.props.label}: <RIEInput className='editable-text' value={value} propName=\"value\" change={this.props.onChange} />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\ntype StringsProps = {\r\n  label: string,\r\n  values: string[],\r\n  onChange: any\r\n};\r\nexport class StringsEditor extends Component<StringsProps> {\r\n  render() {\r\n    if(!this.props.values){\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.values.map((value, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <StringEditor onChange={this.props.onChange(i)} value={value} label={this.props.label} />\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.values.length}]`)({val: {id: \"text\"}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { Goal as GoalType } from '../../types/Attributes';\r\nimport { Codes } from './Code';\r\nimport { StringsEditor } from './String';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype Props = {\r\n  goal: GoalType,\r\n  onChange: any\r\n}\r\n\r\nexport class Goal extends Component<Props> {\r\n\r\n  render() {\r\n    let goal = this.props.goal;\r\n    return (\r\n      <div>\r\n        {this.renderObservation()}\r\n        {this.renderText()}\r\n        <div className='section'>\r\n          Addresses\r\n          <br />\r\n          <StringsEditor values={goal.addresses} label={\"Address\"} onChange={this.props.onChange('addresses')} />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderObservation() {\r\n    let goal = this.props.goal;\r\n    let options = [\r\n      {id: '==' , text: '==' },\r\n      {id: '!=' , text: '!=' },\r\n      {id: \"<\" , text: \"<\" },\r\n      {id: \"<=\" , text: \"<=\" },\r\n      {id: \">\" , text: \">\" },\r\n      {id: \">=\", text: \">=\"},\r\n      {id: \"is nil\", text: \"is nil\"},\r\n      {id: \"is not nil\", text: \"is not nil\"}\r\n    ];\r\n    if (!goal.observation) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('observation')({val: {id: getTemplate('Attribute.Observation')}})}>Add Observation</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let goalObservationValue = (\r\n        <div>\r\n          Goal Observation Value: <RIENumber className='editable-text' value={goal.observation.value} propName={'value'} change={this.props.onChange('observation.value')} />\r\n        </div>\r\n      );\r\n\r\n      if(goal.observation.operator === 'is nil' || goal.observation.operator === 'is not nil'){\r\n        goalObservationValue = <div/>\r\n      }\r\n      \r\n      return (\r\n        <div className='section'>\r\n          Observation\r\n          <br />\r\n          <div className='section'>\r\n            Codes\r\n            <br />\r\n            <Codes codes={goal.observation.codes} system={\"LOINC\"} onChange={this.props.onChange('observation.codes')} />\r\n            <br />\r\n          </div>\r\n          Goal Observation Operator: <RIESelect className='editable-text' value={{id: goal.observation.operator, text: goal.observation.operator}} propName={'operator'} change={this.props.onChange('observation.operator')} options={options} />\r\n          {goalObservationValue}\r\n          <br/>\r\n          <a className='editable-text' onClick={() => this.props.onChange('observation')({val: {id: null}})}>Remove Observation</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderText() {\r\n    let goal = this.props.goal;\r\n    if (!goal.text) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('text')({val: {id: \"text\"}})}>Add Text</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Goal Text: <RIEInput className='editable-text' value={goal.text} propName={'text'}  change={this.props.onChange('text')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('text')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\ntype GoalsProps = {\r\n  goals: GoalType[],\r\n  onChange: any\r\n}\r\nexport class Goals extends Component<GoalsProps> {\r\n  render() {\r\n\r\n    if(!this.props.goals){\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.goals.map((goal, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <Goal onChange={this.props.onChange(i)} goal={goal} />\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.goals.length}]`)({val: {id: getTemplate('Attribute.Goal')}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport React, { Component } from 'react';\r\nimport { RIEInput } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { Instance as InstanceType, Series as SeriesType } from '../../types/Attributes';\r\n\r\nimport { Code } from './Code';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype InstanceProps = {\r\n  title: string,\r\n  sop_class: CodeType,\r\n  onChange: any\r\n}\r\n\r\nexport class Instance extends Component<InstanceProps> {\r\n\r\n  render() {\r\n    let title = this.props.title;\r\n    let sop_class = this.props.sop_class;\r\n    return (\r\n      <div>\r\n        Title: <RIEInput className='editable-text' value={title} propName=\"title\" change={this.props.onChange('title')} />\r\n        <br />\r\n        <br />\r\n        <b>SOP Class:</b>\r\n        <br />\r\n        <Code code={sop_class} system={\"DICOM-SOP\"} onChange={this.props.onChange('sop_class')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\ntype InstanceListProps = {\r\n  instances: InstanceType[],\r\n  onChange: any\r\n}\r\n\r\nexport class InstanceList extends Component<InstanceListProps> {\r\n\r\n  render() {\r\n    if (!this.props.instances) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.instances.map((instance, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n              <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n              <Instance onChange={this.props.onChange(i)} title={instance.title} sop_class={instance.sop_class}/>\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.instances.length}]`)({val: {id: getTemplate('Attribute.ImagingStudy.Instance')}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\ntype SeriesProps = {\r\n  body_site: CodeType,\r\n  modality: CodeType,\r\n  instances: InstanceType[],\r\n  onChange: any\r\n}\r\n\r\nexport class Series extends Component<SeriesProps> {\r\n\r\n  render() {\r\n    let body_site = this.props.body_site;\r\n    let modality = this.props.modality;\r\n    let instances = this.props.instances;\r\n    return (\r\n      <div className='section'>\r\n        <b>Body Site:</b>\r\n        <br />\r\n        <Code code={body_site} system={\"SNOMED-CT\"} onChange={this.props.onChange('body_site')} />\r\n        <br/>\r\n        <b>Modality:</b>\r\n        <br />\r\n        <Code code={modality} system={\"DICOM-DCM\"} onChange={this.props.onChange('modality')} />\r\n        <br />\r\n        <b>Instances:</b>\r\n        <InstanceList instances={instances} onChange={this.props.onChange('instances')} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\ntype SeriesListProps = {\r\n  series: SeriesType[],\r\n  onChange: any\r\n}\r\n\r\nexport class SeriesList extends Component<SeriesListProps> {\r\n\r\n  render() {\r\n    if (!this.props.series) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.series.map((series, i) => {\r\n          return (\r\n            <div className='section' key={i}>\r\n                <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n                <br />\r\n                <Series onChange={this.props.onChange(i)} body_site={series.body_site} modality={series.modality} instances={series.instances} />\r\n            </div>\r\n          )\r\n        })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`[${this.props.series.length}]`)({val: {id: getTemplate('Attribute.ImagingStudy.Series')}})}>+</a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\r\nimport _ from 'lodash';\r\nimport type { Conditional, GenderConditional , AgeConditional , DateConditional , SocioeconomicStatusConditional , RaceConditional , SymptomConditional , ObservationConditional , VitalSignConditional , ActiveConditionConditional , ActiveMedicationConditional , ActiveCarePlanConditional , PriorStateConditional , AttributeConditional , AndConditional , OrConditional , AtLeastConditional , AtMostConditional , NotConditional } from '../../types/Conditional';\r\nimport type { State } from '../../types/State';\r\nimport { Codes } from './Code';\r\nimport { Code } from './Code';\r\nimport { getTemplate } from '../../templates/Templates';\r\n\r\ntype Props = {\r\n  conditional: Conditional,\r\n  options: State[],\r\n  onChange: any\r\n}\r\n\r\nconst unitOfTimeOptions = [\r\n  {id: 'years', text: 'years'},\r\n  {id: 'months', text: 'months'},\r\n  {id: 'weeks', text: 'weeks'},\r\n  {id: 'days', text: 'days'},\r\n  {id: 'hours', text: 'hours'},\r\n  {id: 'minutes', text: 'minutes'},\r\n  {id: 'seconds', text: 'seconds'}\r\n];\r\n\r\nconst unitOfAgeOptions = [\r\n  {id: 'years', text: 'years'},\r\n  {id: 'months', text: 'months'},\r\n  {id: 'weeks', text: 'weeks'},\r\n  {id: 'days', text: 'days'},\r\n  {id: 'hours', text: 'hours'},\r\n  {id: 'minutes', text: 'minutes'},\r\n  {id: 'seconds', text: 'seconds'}\r\n];\r\n\r\nclass ConditionalEditor extends Component<Props> {\r\n\r\n  renderConditionalType() {\r\n    switch (this.props.conditional.condition_type) {\r\n      case \"Gender\":\r\n        return <Gender {...this.props} />\r\n      case \"Age\":\r\n        return <Age {...this.props} />\r\n      case \"Date\":\r\n        return <Date {...this.props} />\r\n      case \"Socioeconomic Status\":\r\n        return <SocioeconomicStatus {...this.props} />\r\n      case \"Race\":\r\n        return <Race {...this.props} />\r\n      case \"Symptom\":\r\n        return <Symptom {...this.props} />\r\n      case \"Observation\":\r\n        return <Observation {...this.props} />\r\n      case \"Vital Sign\":\r\n        return <VitalSign {...this.props} />\r\n      case \"Active Condition\":\r\n        return <ActiveCondition {...this.props} />\r\n      case \"Active Medication\":\r\n        return <ActiveMedication {...this.props} />\r\n      case \"Active CarePlan\":\r\n        return <ActiveCarePlan {...this.props} />\r\n      case \"PriorState\":\r\n        return <PriorState {...this.props} />\r\n      case \"Attribute\":\r\n        return <Attribute {...this.props} />\r\n      case \"And\":\r\n        return <And {...this.props} />\r\n      case \"Or\":\r\n        return <Or {...this.props} />\r\n      case \"At Least\":\r\n        return <AtLeast {...this.props} />\r\n      case \"At Most\":\r\n        return <AtMost {...this.props} />\r\n      case \"Not\":\r\n        return <Not {...this.props} />\r\n      default:\r\n        return this.props.conditional.condition_type\r\n\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.conditional) {\r\n      return null;\r\n    }\r\n    let template = getTemplate('Type.Condition');\r\n    let options = Object.keys(template).sort().map((k) => {return {id: k, text: k}});\r\n    return (\r\n      <div>\r\n        Condition Type: <RIESelect className='editable-text' propName='condition' value={{id: this.props.conditional.condition_type, text: this.props.conditional.condition_type}} change={(val) => this.props.onChange({condition:{id: template[val.condition.id]}})} options={options} />\r\n        <br/>\r\n        {this.renderConditionalType()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Gender extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): GenderConditional);\r\n    return (\r\n      <label> Gender:\r\n        <RIESelect className='editable-text'\r\n          propName='gender'\r\n          value={{id: conditional.gender, text: conditional.gender}}\r\n          change={this.props.onChange('gender')}\r\n          options={[{id:'M', text: 'M'}, {id:'F', text: 'F'}]}\r\n        />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Age extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AgeConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n    return (\r\n      <label> Age:\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      <RIENumber className='editable-text' value={conditional.quantity} propName='quantity' change={this.props.onChange('quantity')} />\r\n      <RIESelect className='editable-text' value={{id: conditional.unit, text: conditional.unit}} propName=\"unit\" change={this.props.onChange('unit')} options={unitOfAgeOptions} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Date extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): DateConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n    return (\r\n      <label>\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      {this.renderType()}\r\n      {this.renderWarning()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderType() {\r\n    let conditional = ((this.props.conditional: any): DateConditional);\r\n    \r\n    if(conditional.month) {\r\n      let month = <RIENumber className='editable-text' value={conditional.month} propName='month' change={this.props.onChange('month')} />\r\n      return (\r\n        <div>\r\n          Month: \r\n          {month}\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Year</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('date.year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('date.month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date.day')({val: {id: getTemplate('Type.Date.Day')}}); this.props.onChange('date.hour')({val: {id: getTemplate('Type.Date.Hour')}}); this.props.onChange('date.minute')({val: {id: getTemplate('Type.Date.Minute')}}); this.props.onChange('date.second')({val: {id: getTemplate('Type.Date.Second')}}); this.props.onChange('date.millisecond')({val: {id: getTemplate('Type.Date.Millisecond')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('year')({val: {id: null}})}}>Change to Date</a>\r\n        </div>  \r\n      );\r\n    } else if (conditional.date) {\r\n      let yearInput = <RIENumber className='editable-text' value={conditional.date.year} propName='date.year' change={this.props.onChange('date.year')} />\r\n      let monthInput = <RIENumber className='editable-text' value={conditional.date.month} propName='date.month' change={this.props.onChange('date.month')} />\r\n      let dayInput = <RIENumber className='editable-text' value={conditional.date.day} propName='date.day' change={this.props.onChange('date.day')} />\r\n      let hourInput = <RIENumber className='editable-text' value={conditional.date.hour} propName='date.hour' change={this.props.onChange('date.hour')} />\r\n      let minuteInput = <RIENumber className='editable-text' value={conditional.date.minute} propName='date.minute' change={this.props.onChange('date.minute')} />\r\n      let secondInput = <RIENumber className='editable-text' value={conditional.date.second} propName='date.second' change={this.props.onChange('date.second')} />\r\n      let millisecondInput = <RIENumber className='editable-text' value={conditional.date.millisecond} propName='date.millisecond' change={this.props.onChange('date.millisecond')} />\r\n      \r\n      return (\r\n        <div>\r\n          Date:\r\n          <br />\r\n          {yearInput}/{monthInput}/{dayInput} {hourInput}:{minuteInput}:{secondInput}.{millisecondInput}\r\n          <br /> \r\n          (yyyy/MM/dd HH:mm:ss.SSS)\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('month')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Year</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date')({val: {id: null}}); this.props.onChange('year')({val: {id: null}})}}>Change to Month</a>\r\n        </div>  \r\n      );\r\n      \r\n    } else { //year\r\n      let year = <RIENumber className='editable-text' value={conditional.year} propName='year' change={this.props.onChange('year')} />\r\n      return (\r\n        <div>\r\n          Year: \r\n          {year}\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('year')({val: {id: null}}); this.props.onChange('date')({val: {id: null}})}}>Change to Month</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('date.year')({val: {id: getTemplate('Type.Date.Year')}}); this.props.onChange('date.month')({val: {id: getTemplate('Type.Date.Month')}}); this.props.onChange('date.day')({val: {id: getTemplate('Type.Date.Day')}}); this.props.onChange('date.hour')({val: {id: getTemplate('Type.Date.Hour')}}); this.props.onChange('date.minute')({val: {id: getTemplate('Type.Date.Minute')}}); this.props.onChange('date.second')({val: {id: getTemplate('Type.Date.Second')}}); this.props.onChange('date.millisecond')({val: {id: getTemplate('Type.Date.Millisecond')}}); this.props.onChange('year')({val: {id: null}}); this.props.onChange('month')({val: {id: null}})}}>Change to Date</a>\r\n        </div>  \r\n      );\r\n    }\r\n  }\r\n\r\n  renderWarning(){\r\n    if (this.props.conditional.year < 1) {\r\n      return (\r\n        <label className='warning'>Invalid Year.</label>\r\n      );\r\n    } else if (this.props.conditional.month < 1 || this.props.conditional.month > 12) {\r\n      return (\r\n        <label className='warning'>Invalid Month. Must be between 1 and 12.</label>\r\n      );\r\n    } else if (this.props.conditional.date) {\r\n      if (this.props.conditional.date.year < 1) {\r\n        return (\r\n          <label className='warning'>Invalid Year</label>\r\n        );\r\n      } else if (this.props.conditional.date.month < 1 || this.props.conditional.date.month > 12) {\r\n        return (\r\n          <label className='warning'>Invalid Month. Must be between 1 and 12.</label>\r\n        );\r\n      } else if (this.props.conditional.date.day < 1 || this.props.conditional.date.day > 31) {\r\n        return (\r\n          <label className='warning'>Invalid Day. Must at least 1 and never greater than 31.</label>\r\n        );\r\n      } else if (this.props.conditional.date.hour < 0 || this.props.conditional.date.hour > 24) {\r\n        return (\r\n          <label className='warning'>Invalid Hour. Must be between 0 and 24.</label>\r\n        );\r\n      } else if (this.props.conditional.date.minute < 0 || this.props.conditional.date.minute > 60) {\r\n        return (\r\n          <label className='warning'>Invalid Minute. Must be between 0 and 60.</label>\r\n        );\r\n      } else if (this.props.conditional.date.second < 0 || this.props.conditional.date.second > 60) {\r\n        return (\r\n          <label className='warning'>Invalid Second. Must be between 0 and 60.</label>\r\n        );\r\n      } else if (this.props.conditional.date.millisecond < 0 || this.props.conditional.date.millisecond > 999) {\r\n        return (\r\n          <label className='warning'>Invalid Millisecond. Must be between 0 and 999.</label>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nclass SocioeconomicStatus extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): SocioeconomicStatusConditional);\r\n    let options = [\r\n      {id: 'Low', text: 'Low'},\r\n      {id: 'Middle', text: 'Middle'},\r\n      {id: 'High', text: 'High'}\r\n    ];\r\n    return (\r\n      <label> Socioeconomic Status:\r\n        <RIESelect className='editable-text' value={{id: conditional.category, text: conditional.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\r\n      </label>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nclass Race extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): RaceConditional);\r\n    let options = [\r\n      {id: \"White\", text: \"White\"},\r\n      {id: \"Native\", text: \"Native\"},\r\n      {id: \"Hispanic\", text: \"Hispanic\"},\r\n      {id: \"Black\", text: \"Black\"},\r\n      {id: \"Asian\", text: \"Asian\"},\r\n      {id: \"Other\", text: \"Other\"}\r\n    ];\r\n    return (\r\n      <label> Race:\r\n        <RIESelect className='editable-text' value={{id: conditional.race, text: conditional.race}} propName=\"race\" change={this.props.onChange('race')} options={options} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Symptom extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): SymptomConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n\r\n    return (\r\n      <label> Symptom:\r\n      <RIEInput className='editable-text' value={conditional.symptom} propName=\"symptom\" change={this.props.onChange('symptom')} />\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      <RIENumber className='editable-text' value={conditional.value} propName='value' change={this.props.onChange('value')} />\r\n\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Observation extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ObservationConditional);\r\n    let options = [];\r\n    if (conditional.value_code) {\r\n      options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\r\n    } else {\r\n      options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\r\n    }\r\n\r\n    return (\r\n      <label> Observation:\r\n        <Codes system={getTemplate('Type.Code.Loinc.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n        <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n        {this.renderValueOrCodeValue()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderValueOrCodeValue() { // renders numerical or code value\r\n    let conditional = ((this.props.conditional: any): ObservationConditional);\r\n    let value_code = <Code className='editable-text' system={getTemplate('Type.Code.Snomed.display')} code={conditional.value_code} onChange={this.props.onChange('value_code')} />\r\n    let value = conditional.value;\r\n    if(typeof value === 'boolean'){\r\n      value = String(value);\r\n    }\r\n    let valueInput = <RIEInput className='editable-text' value={value} propName='value' change={this.props.onChange('value')} />\r\n    if (conditional.operator !== 'is nil' && conditional.operator !== 'is not nil' && conditional.operator.id !== 'is nil' && conditional.operator.id !== 'is not nil'){\r\n      if (conditional.value_code) { \r\n        return (\r\n          <div>\r\n            Value Code:\r\n            <div className='section'>\r\n            {value_code}\r\n            </div>\r\n            <a className='editable-text' onClick={() => {this.props.onChange('value')({val: {id: \"0\"}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Numeric Value</a>\r\n          </div>\r\n        );  \r\n      } else { \r\n        return (\r\n          <div>\r\n            Value:\r\n            {valueInput}\r\n            <br />\r\n            <a className='editable-text' onClick={() => {this.props.onChange('value_code')({val: {id: getTemplate('Type.Code.Snomed')}}); this.props.onChange('value')({val: {id: null}})}}>Change to Value Code</a>\r\n            <br />\r\n          </div>\r\n        );\r\n      }  \r\n    } else {\r\n      return (\r\n        <div>\r\n          No value needed for '{conditional.operator}'\r\n        </div>\r\n      )\r\n    }\r\n  }  \r\n}\r\n\r\nclass VitalSign extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): VitalSignConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}];\r\n\r\n    return (\r\n      <label> Vital Sign:\r\n      <RIEInput className='editable-text' value={conditional.vital_sign} propName=\"vital_sign\" change={this.props.onChange('vital_sign')} />\r\n      <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n      <RIENumber className='editable-text' value={conditional.value} propName='value' change={this.props.onChange('value')} />\r\n\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ActiveCondition extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ActiveConditionConditional);\r\n\r\n    return (\r\n      <label> Active Condition:\r\n        <Codes system={getTemplate('Type.Code.Snomed.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ActiveMedication extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ActiveMedicationConditional);\r\n    return (\r\n      <label> ActiveMedication:\r\n      <Codes system={getTemplate('Type.Code.RxNorm.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ActiveCarePlan extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): ActiveCarePlanConditional);\r\n    return (\r\n      <label> ActiveCarePlan:\r\n      <Codes system={getTemplate('Type.Code.Snomed.system')} codes={conditional.codes} onChange={this.props.onChange('codes')} />\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass PriorState extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n    let name = conditional.name;\r\n    return (\r\n      <label>\r\n        Prior State Name: <RIESelect className='editable-text' value={{id: name, text: name}} propName=\"name\" change={this.props.onChange('name')} options={options} />\r\n        <br />\r\n        {this.renderSince()}\r\n        <br />\r\n        {this.renderWithin()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderSince() {\r\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\r\n    if (conditional.since == null) {\r\n      return (\r\n        <label>\r\n          <a className='editable-text' onClick={() => this.props.onChange('since')({val: {id: getTemplate('Attribute.Since')}})}>Add Since</a>\r\n        </label>\r\n      );\r\n    } else {\r\n      let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n      let since = conditional.since;\r\n      return (\r\n        <label>\r\n          Prior State Since: <RIESelect className='editable-text' value={{id: since, text: since}} propName=\"since\" change={this.props.onChange('since')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('since')({val: {id: null}})}> (remove)</a>\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderWithin() {\r\n    let conditional = ((this.props.conditional: any): PriorStateConditional);\r\n    if (conditional.within == null) {\r\n      return (\r\n        <label>\r\n          <a className='editable-text' onClick={() => this.props.onChange('within')({val: {id: getTemplate('Attribute.Within')}})}>Add Within</a>\r\n          <br />\r\n        </label>\r\n      );\r\n    } else {\r\n      return (\r\n        <label>\r\n          Prior State Within Quantity: <RIENumber className='editable-text' value={conditional.within.quantity} propName=\"quantity\" change={this.props.onChange('within.quantity')} />\r\n          <br />\r\n          Prior State Within Unit: <RIESelect className='editable-text' value={{id: conditional.within.unit, text: conditional.within.unit}} propName=\"unit\" change={this.props.onChange('within.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange('within')({val: {id: null}})}>Remove Within</a>\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Attribute extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AttributeConditional);\r\n    let options = [{id: '==' , text:'==' }, {id: '!=' , text:'!=' }, {id: \"<\" , text:\"<\" }, {id: \"<=\" , text:\"<=\" }, {id: \">\" , text:\">\" }, {id: \">=\", text:\">=\"}, {id: \"is nil\", text: \"is nil\"}, {id: \"is not nil\", text: \"is not nil\"}];\r\n\r\n    let val = conditional.value;\r\n    if(typeof val === 'boolean'){\r\n      val = String(val);\r\n    }\r\n\r\n    let valueInput = <div/>\r\n\r\n    // It appears that conditional is inconsistent, sometimes values are in ids\r\n    // This should be tracked down\r\n    if(conditional.operator !== 'is nil' && conditional.operator !== 'is not nil' && conditional.operator.id !== 'is nil' && conditional.operator.id !== 'is not nil'){ \r\n      valueInput = <RIEInput className='editable-text' value={val||0} propName='value' change={this.props.onChange('value')} />\r\n    }\r\n\r\n    return (\r\n      <label>\r\n        <RIEInput className='editable-text' value={conditional.attribute} propName=\"attribute\" change={this.props.onChange('attribute')} />\r\n        <RIESelect className='editable-text' value={{id: conditional.operator, text: conditional.operator}} propName=\"operator\" change={this.props.onChange('operator')} options={options} />\r\n        {valueInput}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass And extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AndConditional);\r\n    return (\r\n      <label> And:\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n            <div className=\"section\"  key={i}>\r\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n            </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Or extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): OrConditional);\r\n    return (\r\n      <label> Or:\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n              <div className=\"section\" key={i}>\r\n                <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n              </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass AtLeast extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AtLeastConditional);\r\n    return (\r\n      <label> At Least\r\n        <RIENumber className='editable-text' value={conditional.minimum||0} propName='minimum' change={this.props.onChange('minimum')} />:\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n            <div className=\"section\" key={i}>\r\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n            </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass AtMost extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): AtMostConditional);\r\n    return (\r\n      <label> At Most\r\n        <RIENumber className='editable-text' value={conditional.maximum||0} propName='maximum' change={this.props.onChange('maximum')} />:\r\n\r\n        {conditional.conditions.map((cond, i) => {\r\n          return (\r\n            <div className=\"section\" key={i}>\r\n              <ConditionalEditor {...this.props} conditional={cond} onChange={this.props.onChange(`conditions.${i}`)} />\r\n            </div>\r\n          )\r\n        })}\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Not extends Component<Props> {\r\n\r\n  render() {\r\n    let conditional = ((this.props.conditional: any): NotConditional);\r\n    return (\r\n      <label> Not:\r\n        <div className=\"section\">\r\n          <ConditionalEditor {...this.props} conditional={conditional.condition} onChange={this.props.onChange('condition')} />\r\n        </div>\r\n      </label>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default ConditionalEditor;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect } from 'riek';\r\n\r\nimport type { DirectTransition } from '../../types/Transition';\r\nimport type { State } from '../../types/State';\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: DirectTransition,\r\n  onChange: any\r\n}\r\n\r\nclass DirectTransitionEditor extends Component<Props> {\r\n  render() {\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n\r\n    return (\r\n      <label>\r\n        Transition To:\r\n        <RIESelect className='editable-text' propName='to' value={{id:this.props.transition.to, text:this.props.transition.to}} change={this.props.onChange} options={options} />\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DirectTransitionEditor;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber } from 'riek';\r\nimport _ from 'lodash';\r\n\r\n\r\nimport type { DistributedTransition as DistributedTransitionType } from '../../types/Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport type { State } from '../../types/State';\r\nimport './Transition.css';\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: DistributedTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass DistributedTransition extends Component<Props> {\r\n  render() {\r\n    let currentValue = [];\r\n    if (this.props.transition) {\r\n      currentValue = this.props.transition.transition;\r\n    }\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n\r\n    return (\r\n      <label>\r\n        Distributed Transition:\r\n        {currentValue.map((t, i) => {\r\n          return <div key={i} className=\"transition-option\">\r\n            <label>To:\r\n              <RIESelect className='editable-text' propName='transition' value={{id:t.to, text:t.to}} change={this.props.onChange(`[${i}].transition`)} options={options} />\r\n            </label>\r\n            <br/>\r\n            {this.renderDistribution(t.distribution, i)}\r\n            <br/>\r\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n          </div>\r\n        })}\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Distributed[0]')}})}>+</a>\r\n        <br/>\r\n        {this.renderWarning()}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  renderDistribution(distribution: mixed, index: number) {\r\n    let sum = this.props.transition.transition.reduce( (acc, val) => acc + (typeof val.distribution === 'object' ? val.distribution.default : val.distribution),0);\r\n    let remainder = 0;\r\n    if(typeof distribution === 'object') {\r\n      remainder = 1 - (sum - distribution.default);\r\n      let remainderOption = null\r\n      if (sum != 1) {\r\n        remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution.default`)({val: remainder})}>(Change to Remainder)</a>\r\n      }\r\n      return (\r\n        <label>\r\n          Attribute: <RIEInput className='editable-text' value={distribution.attribute} propName='attribute' change={this.props.onChange(`[${index}].distribution.attribute`)} />\r\n          <br />\r\n          Default Weight: <RIENumber className='editable-text' value={distribution.default} propName='default' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`[${index}].distribution.default`)} />\r\n          {remainderOption}\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: {id: getTemplate('Attribute.UnnamedDistribution')}})}>Change to Unnamed Distribution</a>\r\n        </label>\r\n      );\r\n    } else {\r\n      remainder = 1 - (sum - distribution);\r\n      let remainderOption = null\r\n      if (sum != 1) {\r\n        remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: remainder})}>(Change to Remainder)</a>\r\n      }\r\n      return (\r\n        <label> Weight:\r\n          <RIENumber className='editable-text' value={distribution} propName='distribution' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`[${index}].distribution`)} />\r\n          {remainderOption}\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange(`[${index}].distribution`)({val: {id: getTemplate('Attribute.NamedDistribution')}})}>Change to Named Distribution</a>\r\n        </label>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderWarning() {\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    let warn = (this.props.transition.transition.reduce((acc, val) => acc + (typeof val.distribution === 'object' ? val.distribution.default : val.distribution), 0) !== 1);\r\n    if (warn) {\r\n      return (\r\n        <label className='warning'>Weights do not add up to 100%.</label>\r\n      );\r\n    }\r\n  }\r\n\r\n  formatAsPercentage(num: number) {\r\n    return (num * 100) + \"%\";\r\n  }\r\n\r\n  checkInRange(num: number) {\r\n    return ((num >= 0) && (num <= 1));\r\n  }\r\n}\r\n\r\nexport default DistributedTransition;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { ConditionalTransition as ConditionalTransitionType } from '../../types/Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport ConditionalEditor from './Conditional';\r\nimport type { State } from '../../types/State';\r\nimport './Transition.css';\r\n\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: ConditionalTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass ConditionalTransition extends Component<Props> {\r\n\r\n  swapItems(indexTo,indexFrom) {\r\n    if(indexTo >= 0 && indexTo < this.props.transition.transition.length){\r\n\r\n      let oldEntry = {\r\n        transition: this.props.transition.transition[indexTo].to,\r\n        condition: _.clone(this.props.transition.transition[indexTo].condition)\r\n      };\r\n\r\n      let newEntry = {\r\n        transition: this.props.transition.transition[indexFrom].to,\r\n        condition: _.clone(this.props.transition.transition[indexFrom].condition)\r\n      }\r\n          \r\n      return () => {\r\n        this.props.onChange(indexTo)({val: {id: newEntry}});\r\n        this.props.onChange(indexFrom)({val: {id: oldEntry}});\r\n      }\r\n    }\r\n\r\n    return () => {};\r\n  }\r\n\r\n  renderUpDown(index: number) {\r\n  \r\n    if(this.props.transition && this.props.transition.transition){\r\n      if(index < this.props.transition.transition.length - 1 && index > 0){\r\n        return <span>\r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a> | \r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n          </span>\r\n      } else if(index < this.props.transition.transition.length - 1){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n      } else if(index > 0){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a>\r\n      }\r\n    }\r\n  }\r\n  renderIf(index, isLast){\r\n    if(!this.props.transition.transition[index].condition && isLast && index !== 0){\r\n      return <span>\r\n                Else: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n    } else if(!this.props.transition.transition[index].condition){\r\n      return <span>\r\n                <a className=\"editable-text delete-button editable-error\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        Add Condition\r\n                      </a>\r\n            </span>\r\n    } else if(index === 0 && !this.props.transition.transition[index].condition){\r\n      return <span>\r\n                If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n\r\n    } else if(index === 0){\r\n      return <span>If:</span>\r\n\r\n    } else if(!isLast){\r\n      return <span>\r\n              Else If:\r\n            </span>\r\n\r\n    }else{\r\n      return <span>\r\n            Else If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: null}})}}>\r\n                (remove condition)\r\n              </a>\r\n            </span>\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let currentValue = [];\r\n    if (this.props.transition) {\r\n      currentValue = this.props.transition.transition;\r\n    }\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <label>\r\n        Conditional Transition To:\r\n        {currentValue.map((t, i) => {\r\n          let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n          return <div key={i} className='transition-option'>\r\n            <label>\r\n              {this.renderIf(i, i === currentValue.length-1)} \r\n              <ConditionalEditor {...this.props} conditional={t.condition} onChange={this.props.onChange(`${i}.condition`)}/>\r\n            </label>\r\n            <br/>\r\n            <label>\r\n              Transition To: <RIESelect className='editable-text' propName='to' value={{id:t.to, text:t.to}} change={this.props.onChange(`${i}.transition`)} options={options} />\r\n            </label>\r\n            <br/>\r\n            {this.renderUpDown(i)}\r\n            <br/>\r\n            <a className=\"editable-text delete-button\" onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n\r\n          </div>\r\n        })}\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Conditional[0]')}})}>+</a>\r\n\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ConditionalTransition;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { ConditionalTransition as ConditionalTransitionType } from '../../types/Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport ConditionalEditor from './Conditional';\r\nimport DistributedTransitionEditor from './DistributedTransition';\r\nimport DirectTransitionEditor from './DirectTransition';\r\nimport type { State } from '../../types/State';\r\n\r\nimport './Transition.css';\r\n\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: ConditionalTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass ComplexTransition extends Component<Props> {\r\n\r\n  swapItems(indexTo,indexFrom) {\r\n    if(indexTo >= 0 && indexTo < this.props.transition.transition.length){\r\n      let oldEntry = {};\r\n      let newEntry = {};\r\n\r\n      if(this.props.transition.transition[indexTo].condition){\r\n        oldEntry.condition = _.clone(this.props.transition.transition[indexTo].condition)\r\n      }\r\n      if(this.props.transition.transition[indexTo].distributions){\r\n        oldEntry.distributions = _.clone(this.props.transition.transition[indexTo].distributions.map((d) => ({distribution: d.distribution, transition: d.to})))\r\n      }\r\n      if(this.props.transition.transition[indexTo].transition.to){\r\n        oldEntry.transition = this.props.transition.transition[indexTo].transition.to\r\n      }\r\n\r\n      if(this.props.transition.transition[indexFrom].condition){\r\n        newEntry.condition = _.clone(this.props.transition.transition[indexFrom].condition)\r\n      }\r\n      if(this.props.transition.transition[indexFrom].distributions){\r\n        newEntry.distributions = _.clone(this.props.transition.transition[indexFrom].distributions.map((d) => ({distribution: d.distribution, transition: d.to})))\r\n      }\r\n      if(this.props.transition.transition[indexFrom].transition.to){\r\n        newEntry.transition = this.props.transition.transition[indexFrom].transition.to\r\n      }\r\n\r\n      return () => {\r\n        this.props.onChange(indexTo)({val: {id: newEntry}});\r\n        this.props.onChange(indexFrom)({val: {id: oldEntry}});\r\n      }\r\n    }\r\n\r\n    return () => {};\r\n  }\r\n\r\n  renderUpDown(index: number) {\r\n  \r\n    if(this.props.transition && this.props.transition.transition){\r\n      if(index < this.props.transition.transition.length - 1 && index > 0){\r\n        return <span>\r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a> | \r\n            <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n          </span>\r\n      } else if(index < this.props.transition.transition.length - 1){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index, index+1)}>move down</a>\r\n      } else if(index > 0){\r\n        return <a className=\"editable-text delete-button\" onClick={this.swapItems(index-1, index)}>move up</a>\r\n      }\r\n    }\r\n  }\r\n\r\n  renderIf(index, isLast){\r\n    if(!this.props.transition.transition[index].condition && isLast && index !==0){\r\n      return <span>\r\n                Else: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n    } else if(!this.props.transition.transition[index].condition){\r\n      return <span>\r\n                <a className=\"editable-text delete-button editable-error\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        Add Condition\r\n                      </a>\r\n            </span>\r\n    } else if(index === 0 && !this.props.transition.transition[index].condition){\r\n      return <span>\r\n                If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: getTemplate('Type.Condition.Age')}})}}>\r\n                        (add condition)\r\n                      </a>\r\n            </span>\r\n\r\n    } else if(index === 0){\r\n      return <span>If:</span>\r\n\r\n    } else if(!isLast){\r\n      return <span>\r\n              Else If:\r\n            </span>\r\n\r\n    }else{\r\n      return <span>\r\n            Else If: <a className=\"editable-text delete-button\" onClick={()=>{this.props.onChange(`[${index}].condition`)({val: {id: null}})}}>\r\n                (remove condition)\r\n              </a>\r\n            </span>\r\n    }\r\n  }\r\n\r\n  renderTransition(t, i, isLast){\r\n\r\n    let transitionEditor = null;\r\n\r\n    if(t.transition.to !== undefined){\r\n      const newDistributedTransition = {...t, distributions: [{distribution: 1, transition: t.transition.to}]};\r\n      delete newDistributedTransition.transition;\r\n      transitionEditor = <div>\r\n                           <DirectTransitionEditor \r\n                             transition={t.transition}\r\n                             options={this.props.options} \r\n                             onChange={this.props.onChange(`[${i}].transition`)} />\r\n                           <br/>\r\n                           <a className=\"editable-text delete-button\" \r\n                              onClick={()=>{this.props.onChange(`[${i}]`)({val: {id: newDistributedTransition}})}}>Change to Distributed Transition</a>\r\n                          </div>\r\n    } else {\r\n      let nextTransition = 'Initial';\r\n      if(t.distributions.length > 0){\r\n        nextTransition = t.distributions[0].to\r\n      }\r\n\r\n      const newDirectTransition = {...t, distributions: [], transition: nextTransition};\r\n\r\n      transitionEditor = <div>\r\n                          <DistributedTransitionEditor \r\n                             transition={{transition: t.distributions}} \r\n                             options={this.props.options} \r\n                             onChange={this.props.onChange(`[${i}].distributions`)} />\r\n                           <br/>\r\n                           <a className=\"editable-text delete-button\" \r\n                              onClick={()=>{this.props.onChange(`[${i}]`)({val: {id: newDirectTransition}})}}>Change to Direct Transition</a>\r\n                          </div>\r\n    }\r\n\r\n    return <div className='transition-option' key={i}>\r\n            <label>\r\n            {this.renderIf(i, isLast)} <ConditionalEditor {...this.props} conditional={t.condition} onChange={this.props.onChange(`${i}.condition`)}/>\r\n            </label>\r\n            <br/>\r\n            <label>\r\n            {transitionEditor}\r\n            </label>\r\n            <br/>\r\n            {this.renderUpDown(i)}\r\n            <br/>\r\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`[${i}]`)({val: {id: null}})}>remove</a>\r\n          </div>\r\n  }\r\n\r\n  render() {\r\n    let currentValue = [];\r\n    if (this.props.transition) {\r\n      currentValue = this.props.transition.transition;\r\n    }\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    const states = this.props.options;\r\n    const options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n\r\n    return (\r\n      <label>\r\n        Complex Transition:\r\n\r\n        {currentValue.map((t, i) => {\r\n          return this.renderTransition(t, i, i === currentValue.length-1);\r\n        })}\r\n\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`[${currentValue.length}]`)({val: {id: getTemplate('Transition.Complex[0]')}})}>+</a>\r\n\r\n      </label>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ComplexTransition;\r\n","import React from \"react\";\r\nimport ReactDataGrid from \"react-data-grid\";\r\n    \r\n    function Table({columnHeaders, rows }) {\r\n        const columns = [];\r\n        \r\n        columnHeaders.forEach(function(item){\r\n            let str = item.replace(/\\s/g, '')\r\n            let a = {                    \r\n                key: str,\r\n                name: str,\r\n                width: 180,\r\n            }\r\n            columns.push(a);\r\n        })   \r\n        \r\n        return (\r\n        <ReactDataGrid \r\n            columns={columns}\r\n            rowGetter={i => rows[i]}\r\n            rowsCount={rows.length}\r\n            minHeight={300}\r\n            />\r\n        );\r\n    }\r\n\r\nexport default Table;","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber, RIETextArea } from 'riek';\r\nimport Papa from 'papaparse'\r\n\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport './Transition.css';\r\nimport Table from './Table'\r\nimport './TableTransition.css';\r\nimport { isNumber } from 'util';\r\n\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: TableTransitionType,\r\n  onChange: any\r\n}\r\n\r\nclass TableTransition extends Component<Props> {\r\n\r\n  render() {\r\n    let currentValue = [];\r\n    let lookupTableName;\r\n    if (this.props.transition) {\r\n      this.fixMissingValues();\r\n      currentValue = this.props.transition.transition;\r\n      lookupTableName = this.props.transition.lookup_table_name_ModuleBuilder;\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n    let buttonText;\r\n    let displayTable;\r\n    let displayTableError;\r\n    \r\n    if (this.props.transition.viewTable && !this.doesDataHaveInputError()){\r\n      buttonText = 'Display Editable Text Area';\r\n      let data = this.parseTextArea(this.props.transition.lookuptable);\r\n      displayTable = \r\n        <div className=\"TableTransition-table\">\r\n          <Table columnHeaders={Object.keys(data[0])} rows={data} />\r\n        </div>\r\n    }else{\r\n      buttonText = 'Display Read Only Table';\r\n      if (this.props.transition.lookuptable === ''){\r\n        this.props.onChange(`lookuptable`)({val: 'Enter table'});\r\n      }else if (isNumber(this.props.transition.lookuptable)){\r\n        this.props.transition.lookuptable = this.props.transition.lookuptable.toString();\r\n      }\r\n      displayTable = \r\n        <div className='TableTransition-remarks'>\r\n          <RIETextArea value={this.props.transition.lookuptable} propName='lookuptable' change={this.props.onChange(`lookuptable`)}/>\r\n        </div>\r\n    }\r\n    if (this.doesDataHaveInputError()){\r\n      displayTableError= <label className='warning'>Invalid table data. The table must have a header row and be separated by commas.</label>\r\n    }else {\r\n      let msg = this.checkTable();\r\n      displayTableError = <label className='warning'>{msg}</label>\r\n    }\r\n\r\n    let options = this.props.options.map((s) => {return {id: s.name, text: s.name}});\r\n    return (\r\n      <div>\r\n      <label>\r\n        Table Transition:\r\n        {\r\n          currentValue.map((t, i) => {\r\n          return <div key={i} className=\"transition-option\">\r\n            <label>To:\r\n              <RIESelect className='editable-text' propName='transition' value={{id:t.transition, text:t.transition}} change={this.props.onChange(`transitions[${i}].transition`)} options={options} />\r\n            </label>\r\n            <br/>\r\n            {this.renderDistribution(t.default_probability, i)}\r\n            <br />\r\n            <a className='editable-text delete-button' onClick={() => this.props.onChange(`transitions.[${i}]`)({val: {id: null}})}>remove</a>\r\n          </div>\r\n        })}\r\n        <a className='editable-text add-button' onClick={() => this.props.onChange(`transitions[${currentValue.length}]`)({val: {id: getTemplate('Transition.Table.transitions[0]')}})}>+</a>\r\n        <br/>\r\n        {this.renderWarning()}\r\n        <br/>\r\n        </label>\r\n        <div>\r\n          <label>Lookup Table: \r\n            <RIEInput className='editable-text' value={lookupTableName} propName='lookup_table_name_ModuleBuilder' change={this.props.onChange(`lookup_table_name_ModuleBuilder`)} />\r\n          </label>\r\n          <br/>\r\n          {displayTableError}\r\n          <br/>\r\n         <button onClick={() => this.displayTableView()}>{buttonText}</button>\r\n        <br/> \r\n        {displayTable}\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDistribution(distribution: mixed, index: number) {    \r\n    let sum = this.props.transition.transition.reduce( (acc, val) => acc + val.default_probability, 0);\r\n    let remainder = 1 - (sum - distribution);\r\n    let remainderOption = null\r\n    if (sum !== 1) {\r\n      remainderOption = <a className='editable-text' onClick={() => this.props.onChange(`transitions[${index}].default_probability`)({val: remainder})}>(Change to Remainder)</a>\r\n    }\r\n    return (\r\n      <label> Default Weight:\r\n        <RIENumber className='editable-text' value={distribution} propName='default_probability' editProps={{step: .01, min: 0, max: 1}} format={this.formatAsPercentage} validate={this.checkInRange} change={this.props.onChange(`transitions[${index}].default_probability`)} />\r\n        {remainderOption}\r\n        </label>\r\n    );\r\n  }\r\n\r\n  renderWarning() {\r\n    if(!this.props.transition) {\r\n      return null;\r\n    }\r\n    let warn = (this.props.transition.transition.reduce((acc, val) => acc + (typeof val.default_probability === 'object' ? val.default_probability.default : val.default_probability), 0) !== 1);\r\n    if (warn) {\r\n      return (\r\n        <label className='warning'>Weights do not add up to 100%.</label>\r\n      );\r\n    }\r\n  }\r\n\r\n  formatAsPercentage(num: number) {\r\n    return (num * 100) + \"%\";\r\n  }\r\n\r\n  checkInRange(num: number) {\r\n    return ((num >= 0) && (num <= 1));\r\n  }\r\n\r\n  parseTextArea(data) {\r\n    let parsed;\r\n    if (isNumber(data))\r\n    {\r\n      data  = data.toString();\r\n    }\r\n    Papa.parse(data, {\r\n    header: true,\r\n    complete: function(results) {\r\n      parsed=results;\r\n    }\r\n    });\r\n\r\n    return parsed.data;\r\n  }    \r\n\r\n  displayTableView() {        \r\n    // need to check if the table is correct and that it will be ok being displayed as a table before changing this to true\r\n    // otherwise the undo take an extra click\r\n    if (!this.doesDataHaveInputError())\r\n    {\r\n      this.props.onChange('viewTable')({val: !this.props.transition.viewTable})\r\n    }\r\n  }\r\n\r\n  fixMissingValues(){\r\n    if (this.props.transition.lookuptable === undefined)\r\n    {\r\n      this.props.transition.lookuptable = '';\r\n    }\r\n    if (this.props.transition.viewTable === undefined)\r\n    {\r\n      this.props.transition.viewTable = false;\r\n    }\r\n    if (this.props.transition.lookup_table_name_ModuleBuilder === undefined)\r\n    {\r\n      if (this.props.transition.transition[0].lookup_table_name !== ''){\r\n        this.props.transition.lookup_table_name_ModuleBuilder = this.props.transition.transition[0].lookup_table_name;\r\n      }else{\r\n        this.props.transition.lookup_table_name_ModuleBuilder = '';\r\n      }\r\n    }\r\n  }\r\n\r\n  doesDataHaveInputError(){    \r\n    let data = this.parseTextArea(this.props.transition.lookuptable);\r\n    let textOk = !(this.props.transition.lookuptable === 'Enter table' || this.props.transition.lookuptable === '')\r\n    let parseOk = (data.length > 0 && Object.keys(data[0]).length > 0)\r\n    if (textOk && parseOk ){\r\n        return false;\r\n      } else {\r\n        return true;\r\n      } \r\n  }\r\n\r\n  checkTable(){\r\n    let message = ''\r\n    // check the last X columns vs X transitions\r\n    if (this.doesDataHaveInputError()){\r\n      return message;\r\n    }\r\n    let tableColumns = [];\r\n    let data = this.parseTextArea(this.props.transition.lookuptable);\r\n    if (data.length > 0){ \r\n      tableColumns = Object.keys(data[0]);\r\n    }\r\n\r\n    for (let i = 0; i < this.props.transition.transition.length; i++)\r\n    {\r\n      let transition = this.props.transition.transition[this.props.transition.transition.length - i - 1].transition;\r\n      let column = tableColumns[tableColumns.length-i -1];\r\n      if (transition !== column)\r\n      {\r\n        message += 'Invalid columns (table data and transitions to state don\\'t match) '\r\n        break;\r\n      }\r\n    }\r\n\r\n    return message;    \r\n  }\r\n}\r\n\r\nexport default TableTransition;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport type { Transition as TransitionType } from '../../types/Transition';\r\nimport type { State } from '../../types/State';\r\nimport DirectTransition from './DirectTransition';\r\nimport DistributedTransition from './DistributedTransition';\r\nimport ConditionalTransition from './ConditionalTransition';\r\nimport ComplexTransition from './ComplexTransition';\r\nimport TableTransition from './TableTransition';\r\n\r\ntype Props = {\r\n  options: State[],\r\n  transition?: Transition,\r\n  onChange: any\r\n}\r\n\r\nclass Transition extends Component<Props> {\r\n  render() {\r\n    if(this.props.transition){\r\n      switch (this.props.transition.type) {\r\n        case \"Direct\":\r\n          return <DirectTransition {...this.props} onChange={this.props.onChange('direct_transition')} />\r\n        case \"Distributed\":\r\n          return <DistributedTransition {...this.props} onChange={this.props.onChange('distributed_transition')} />\r\n        case \"Conditional\":\r\n          return <ConditionalTransition {...this.props} onChange={this.props.onChange('conditional_transition')} />\r\n        case \"Complex\":\r\n          return <ComplexTransition {...this.props} onChange={this.props.onChange('complex_transition')} />\r\n        case \"Table\":\r\n          return <TableTransition {...this.props} onChange={this.props.onChange('table_transition')} />\r\n        case \"None\":\r\n          return <div> No transition </div>\r\n        default:\r\n          return <div> {this.props.transition.type} Transition is not supported at this time </div>\r\n      }\r\n    }\r\n    return <div> No Transition </div>\r\n  }\r\n}\r\n\r\nexport default Transition;\r\n","export const BasicTutorial = [\r\n  {title: \"Create Module\", selector: \".Editor-top-open :nth-child(1)\", text: \"Create a new module\"},\r\n  {title: \"Open Module\", selector: \".Editor-top-open :nth-child(2)\", text: \"Open a module by selecting Open Module\"},\r\n  {title: \"Download Module\", selector: \".Editor-top-open :nth-child(3)\", text: \"Download module by selecting Download\"},\r\n  {title: \"Edit Node\", selector: \"#node_Initial\", text: \"To edit a node you can click on it in the graph\"},\r\n  {title: \"Module Remarks\", selector: \".ModuleProperties-remarks\", text: \"This is a place to put any remarks or citations for this module.\"},\r\n  {title: \"Adding a State\", selector: \".navbar-nav :nth-child(4)\", text: \"This will add a new state to the module, it can then be edited like any other state.\"},\r\n  {title: \"Adding a Structure\", selector: \".navbar-nav :nth-child(5)\", text: \"We have a few commonly used structures, this will allow you to add them to your module. This feature is not yet available.\"},\r\n]\r\n\r\nexport const EditTutorial = [\r\n  {title: \"Change State Name\", selector: \".State h3\", text: \"This text is editable, you can change the name of this state here.\"},\r\n  {title: \"Change State Type\", selector: \".State :nth-child(2)\", text: \"You can change the type of this state here, you can find a listing of state types at <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-States' target='_blank'> the wiki </a>.\"},\r\n  {title: \"State Editor\", selector: \".State-Editor\", text: \"Here is a context aware editor, depending on what your state has it will list the various attributes.\"},\r\n  {title: \"Delete State\", selector: \"div.State > a.delete-button\", text: \"This will remove the currently selected state from the editor.\"},\r\n  {title: \"Transition Type\", selector: \".Transition-Type\", text: \"You can change the type of the transition the module has here, <a href='https://github.com/synthetichealth/synthea/wiki/Generic-Module-Framework%3A-Transitions' target='_blank'> here </a> is a list of transition types.\"},\r\n\r\n\r\n]\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIESelect, RIEInput, RIENumber, RIEToggle, RIETextArea } from 'riek';\r\nimport _ from 'lodash';\r\n\r\nimport type { State, InitialState, TerminalState, SimpleState, GuardState, DelayState, SetAttributeState, CounterState, CallSubmoduleState, EncounterState, EncounterEndState, ConditionOnsetState, ConditionEndState, AllergyOnsetState, AllergyEndState, MedicationOrderState, MedicationEndState, CarePlanStartState, CarePlanEndState, ProcedureState, VitalSignState, ObservationState, MultiObservationState, DiagnosticReportState, ImagingStudyState, SymptomState, DeathState } from '../../types/State';\r\n\r\nimport { Code, Codes } from './Code';\r\nimport { Goals } from './Goal';\r\nimport { SeriesList } from './ImagingStudyAttributes';\r\nimport ConditionalEditor from './Conditional';\r\nimport Transition from './Transition';\r\nimport { getTemplate } from '../../templates/Templates';\r\nimport { BasicTutorial, EditTutorial } from '../../templates/Tutorial';\r\n\r\n\r\nimport './State.css';\r\n\r\ntype Props = {\r\n  moduleName: string,\r\n  state: State,\r\n  otherStates: State[],\r\n  onChange: any,\r\n  renameNode: any,\r\n  copyNode: any,\r\n  changeType: any,\r\n  addTransition: any,\r\n  helpFunction: any\r\n}\r\n\r\nconst unitOfTimeOptions = [\r\n  {id: 'years', text: 'years'},\r\n  {id: 'months', text: 'months'},\r\n  {id: 'weeks', text: 'weeks'},\r\n  {id: 'days', text: 'days'},\r\n  {id: 'hours', text: 'hours'},\r\n  {id: 'minutes', text: 'minutes'},\r\n  {id: 'seconds', text: 'seconds'}\r\n];\r\n\r\nclass StateEditor extends Component<Props> {\r\n\r\n  renderStateType() {\r\n    let props = {...this.props};\r\n    props.state.name = props.state.name || 'Unnamed_State';\r\n    props.onChange = this.props.onChange(`states.${props.state.name}`);\r\n    switch (this.props.state.type) {\r\n      case \"Initial\":\r\n        return <Initial {...props} />\r\n      case \"Terminal\":\r\n        return <Terminal {...props} />\r\n      case \"Simple\":\r\n        return <Simple {...props} />\r\n      case \"Guard\":\r\n        return <Guard {...props} />\r\n      case \"Delay\":\r\n        return <Delay {...props} />\r\n      case \"SetAttribute\":\r\n        return <SetAttribute {...props} />\r\n      case \"Counter\":\r\n        return <Counter {...props} />\r\n      case \"CallSubmodule\":\r\n        return <CallSubmodule {...props} />\r\n      case \"Encounter\":\r\n        return <Encounter {...props} />\r\n      case \"EncounterEnd\":\r\n        return <EncounterEnd {...props} />\r\n      case \"ConditionOnset\":\r\n        return <ConditionOnset {...props} />\r\n      case \"ConditionEnd\":\r\n        return <ConditionEnd {...props} />\r\n      case \"AllergyOnset\":\r\n        return <AllergyOnset {...props} />\r\n      case \"AllergyEnd\":\r\n        return <AllergyEnd {...props} />\r\n      case \"MedicationOrder\":\r\n        return <MedicationOrder {...props} />\r\n      case \"MedicationEnd\":\r\n        return <MedicationEnd {...props} />\r\n      case \"CarePlanStart\":\r\n        return <CarePlanStart {...props} />\r\n      case \"CarePlanEnd\":\r\n        return <CarePlanEnd {...props} />\r\n      case \"Procedure\":\r\n        return <Procedure {...props} />\r\n      case \"VitalSign\":\r\n        return <VitalSign {...props} />\r\n      case \"Observation\":\r\n        return <Observation {...props} />\r\n      case \"MultiObservation\":\r\n        return <MultiObservation {...props} />\r\n      case \"DiagnosticReport\":\r\n        return <DiagnosticReport {...props} />\r\n      case \"ImagingStudy\":\r\n        return <ImagingStudy {...props} />\r\n      case \"Symptom\":\r\n        return <Symptom {...props} />\r\n      case \"Death\":\r\n        return <Death {...props} />\r\n      default:\r\n        return this.props.state.type\r\n    }\r\n  }\r\n\r\n  updateRemarks = (el:any) => {\r\n    const remarks = el.remarks? el.remarks.split(\"\\n\") : null;\r\n    this.props.onChange(`states.${this.props.state.name}.remarks`)({remarks:{id:remarks}});\r\n  }\r\n\r\n  render() {\r\n    if(!this.props.state) {\r\n      return null;\r\n    }\r\n\r\n    let typeOptions = Object.keys(getTemplate('State')).sort().map((k) => {return {id: k, text: k}});\r\n    const transitionOptions = [\r\n      {id:\"None\" ,text:\"None\"},\r\n      {id:\"Direct\" ,text:\"Direct\"},\r\n      {id:\"Distributed\" ,text:\"Distributed\"},\r\n      {id:\"Conditional\" ,text:\"Conditional\"},\r\n      {id:\"Complex\" ,text:\"Complex\"},\r\n      {id:\"Table\" ,text:\"Table\"}\r\n    ]\r\n\r\n    let remarks = this.props.state.remarks ||\"\";\r\n    remarks = Array.isArray(remarks)? remarks.join(\"\\n\"): remarks;\r\n\r\n    const transitionType = (this.props.state.transition||{}).type;\r\n    return (\r\n        <div className=\"State\">\r\n          <div className='Editor-panel-title'>\r\n            State Editor\r\n          </div>\r\n          <h3><RIEInput className='editable-text' className='editable-text' propName={'name'} value={this.props.state.name} change={this.props.renameNode} /></h3>\r\n          State Type: <RIESelect className='editable-text' className='editable-text' value={{id: this.props.state.type, text: this.props.state.type}} propName='type'change={this.props.changeType} options={typeOptions}/>\r\n          <hr/>\r\n          <RIETextArea className='editable-text' value={remarks} propName=\"remarks\" change={this.updateRemarks} />\r\n          <br/>\r\n          <hr/>\r\n          <div className=\"State-Editor\">\r\n            {this.renderStateType()}\r\n          </div>\r\n          <br />\r\n          <hr />\r\n          <div>\r\n            <div className=\"Transition-Type\">Transition Type:\r\n              <RIESelect className='editable-text' className='editable-text' value={{id: transitionType, text: transitionType}} propName='transition' change={(e) => this.props.addTransition(e.transition.id)} options={transitionOptions}/>\r\n            </div>\r\n          </div>\r\n          <div className=\"Transition\">\r\n            <Transition\r\n              options={this.props.otherStates.sort((a,b) => a.name > b.name? 1 : -1)}\r\n              transition={this.props.state.transition}\r\n              onChange={this.props.onChange(`states.${this.props.state.name}`)} />\r\n          </div>\r\n          <br/>\r\n          <a onClick={this.props.helpFunction(EditTutorial)}>Help</a>\r\n\r\n\r\n        </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nclass Initial extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): InitialState);\r\n    return (\r\n      null\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Terminal extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): TerminalState);\r\n    return (\r\n      null\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Simple extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): SimpleState);\r\n    return (\r\n      null\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Guard extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): GuardState);\r\n    return (\r\n      <div>\r\n        <ConditionalEditor {...this.props} conditional={state.allow} options={this.props.otherStates} onChange={this.props.onChange('allow')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Delay extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): DelayState);\r\n    return (\r\n      <div>\r\n        {this.renderExactOrRange()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): DelayState);\r\n    if (state.exact) {\r\n      return (\r\n        <div>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          Exact Unit: <RIESelect className='editable-text' value={{id: state.exact.unit, text: state.exact.unit}} propName=\"unit\" change={this.props.onChange('exact.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.RangeWithUnit')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          Range Unit: <RIESelect className='editable-text' value={{id: state.range.unit, text: state.range.unit}} propName=\"unit\" change={this.props.onChange('range.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass SetAttribute extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): SetAttributeState);\r\n    return (\r\n      <div>\r\n        Attribute: <RIEInput className='editable-text' value={state.attribute} propName={'attribute'} change={this.props.onChange('attribute')} />\r\n        <br/>\r\n        {this.renderValue()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderValue() {\r\n    let state = ((this.props.state: any): SetAttributeState);\r\n\r\n    if (state.value == null) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: \"text\"}})}>Add Value</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let val = state.value;\r\n      if(typeof val === 'boolean'){\r\n        val = String(val);\r\n      }\r\n      return (\r\n        <div>\r\n          Value: <RIEInput className='editable-text' value={val} propName={'value'} change={this.props.onChange('value')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('value')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Counter extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): CounterState);\r\n    let options = [\r\n      {id: 'increment', text: 'increment'},\r\n      {id: 'decrement', text: 'decrement'}\r\n    ];\r\n    return (\r\n      <div>\r\n        Attribute: <RIEInput className='editable-text' value={state.attribute} propName={'attribute'} change={this.props.onChange('attribute')} />\r\n        <br/>\r\n        Action: <RIESelect className='editable-text' value={{id: state.action, text: state.action}} propName=\"action\" change={this.props.onChange('action')} options={options} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass CallSubmodule extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): CallSubmoduleState);\r\n    return (\r\n      <div>\r\n        Submodule: <RIEInput className='editable-text' value={state.submodule} propName={'submodule'} change={this.props.onChange('submodule')} />\r\n        <br/>\r\n        <a href={`${window.location.href.replace(window.location.hash,\"\")}#${state.submodule}`} target=\"_blank\">View Submodule</a>\r\n\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Encounter extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): EncounterState);\r\n    let options = [\r\n      {id: 'emergency', text: 'emergency'},\r\n      {id: 'inpatient', text: 'inpatient'},\r\n      {id: 'ambulatory', text: 'ambulatory'}\r\n    ];\r\n    if (state.wellness == null) {\r\n      return (\r\n        <div>\r\n          {this.renderWellness()}\r\n          Encounter Class: <RIESelect className='editable-text' value={{id: state.encounter_class, text: state.encounter_class}} propName=\"encounter_class\" change={this.props.onChange('encounter_class')} options={options} />\r\n          <br />\r\n          {this.renderReason()}\r\n          <div className='section'>\r\n            Codes\r\n            <br />\r\n            <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          {this.renderWellness()}\r\n          {this.renderReason()}\r\n        </div>\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n  renderWellness() {\r\n    let state = ((this.props.state: any): EncounterState);\r\n    if (state.wellness == null) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => {this.props.onChange('wellness')({val: {id: true}}); this.props.onChange('codes')({val: {id: null}}); this.props.onChange('encounter_class')({val: {id: null}})}}>Add Wellness</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Wellness\r\n          <a className='editable-text' onClick={() => {this.props.onChange('wellness')({val: {id: null}}); this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): EncounterState);\r\n    if (!state.reason) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let attribute = <RIEInput className='editable-text' value={state.reason} propName={'reason'}  change={this.props.onChange('reason')} />\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {attribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass EncounterEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): EncounterEndState);\r\n    return (\r\n      <div>\r\n        {this.renderDischargeDisposition()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDischargeDisposition() {\r\n    let state = ((this.props.state: any): EncounterEndState);\r\n    if (!state.discharge_disposition) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('discharge_disposition')({val: {id: getTemplate('Type.Code.Nubc')}})}>Add Discharge Disposition</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <Code code={state.discharge_disposition} system={\"NUBC\"} onChange={this.props.onChange('discharge_disposition')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('discharge_disposition')({val: {id: null}})}>Remove Discharge Disposition</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass ConditionOnset extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    return (\r\n      <div>\r\n        {this.renderTargetEncounter()}\r\n        {this.renderAssignToAttribute()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTargetEncounter() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    let encounters = this.props.otherStates.filter((s) => {return s.type === \"Encounter\"});\r\n    let options = encounters.map((e) => {return {id: e.name, text: e.name}});\r\n    let targetEncounter = <RIESelect className='editable-text' value={{id: state.target_encounter, text: state.target_encounter}} propName={'target_encounter'}  change={this.props.onChange('target_encounter')} options={options} />\r\n    if (state.target_encounter) {\r\n      return (\r\n        <div>\r\n          Target Encounter: {targetEncounter}\r\n          <br/>\r\n          <a className='editable-text' onClick={() => this.props.onChange('target_encounter')({val: {id: null}})}>(remove to diagnose immediately)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('target_encounter')({val: {id: \"text\"}})}>Add Target Encounter</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: <RIEInput className='editable-text' value={state.assign_to_attribute} propName={'assign_to_attribute'}  change={this.props.onChange('assign_to_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass ConditionEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    return (\r\n      <div>\r\n        {this.renderConditionOnset()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderConditionOnset() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n    let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.condition_onset) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: \"text\"}})}>Add Condition Onset</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Condition Onset: <RIESelect className='editable-text' value={{id: state.condition_onset, text: state.condition_onset}} propName={'condition_onset'}  change={this.props.onChange('condition_onset')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): ConditionEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass AllergyOnset extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): AllergyOnsetState);\r\n    let encounters = this.props.otherStates.filter((s) => {return s.type === \"Encounter\"});\r\n    let options = encounters.map((e) => {return {id: e.name, text: e.name}});\r\n    return (\r\n      <div>\r\n        Target Encounter: <RIESelect className='editable-text' value={{id: state.target_encounter, text: state.target_encounter}} propName={'target_encounter'} change={this.props.onChange('target_encounter')} options={options} />\r\n        <br />\r\n        {this.renderAssignToAttribute()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): AllergyOnsetState);\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: <RIEInput className='editable-text' value={state.assign_to_attribute} propName={'assign_to_attribute'}  change={this.props.onChange('assign_to_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass AllergyEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    return (\r\n      <div>\r\n        {this.renderAllergyOnset()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAllergyOnset() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    let allergyOnset = this.props.otherStates.filter((s) => {return s.type === \"AllergyOnset\"});\r\n    let options = allergyOnset.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.allergy_onset) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('allergy_onset')({val: {id: \"text\"}})}>Add Allergy Onset</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Allergy Onset: <RIESelect className='editable-text' value={{id: state.allergy_onset, text: state.allergy_onset}} propName={'allergy_onset'}  change={this.props.onChange('allergy_onset')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('allergy_onset')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): AllergyEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass MedicationOrder extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    return (\r\n      <div>\r\n        {this.renderAssignToAttribute()}\r\n        {this.renderReason()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"RxNorm\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        {this.renderPrescription()}\r\n        {this.renderChronicMed()}\r\n        {this.renderCreateAdministration()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderChronicMed() {\r\n    let state = ((this.props.state: any): MedicationOrder);\r\n    return (\r\n      <div>\r\n        <input type=\"checkbox\" checked={state.chronic} onChange={() => this.props.onChange('chronic')({ val: { id: !state.chronic } })} /> Chronic Medication.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCreateAdministration() {\r\n    let state = ((this.props.state: any): MedicationOrder);\r\n    return (\r\n      <div>\r\n        <input type=\"checkbox\" checked={state.administration} onChange={() => this.props.onChange('administration')({ val: { id: !state.administration } })} /> Administration of the medication.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): ConditionOnsetState);\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: <RIEInput className='editable-text' value={state.assign_to_attribute} propName={'assign_to_attribute'}  change={this.props.onChange('assign_to_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): MedicationOrder);\r\n    if (!state.reason) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let attribute = <RIEInput className='editable-text' value={state.reason} propName={'reason'}  change={this.props.onChange('reason')} />\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {attribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  renderPrescription() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription')({val: {id: getTemplate('Attribute.Prescription')}})}>Add Prescription</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Prescription\r\n          {this.renderRefills()}\r\n          {this.renderAsNeeded()}\r\n          {this.renderDosage()}\r\n          {this.renderDuration()}\r\n          {this.renderInstructions()}\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription')({val: {id: null}})}> Remove Prescription</a>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderRefills() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.refills) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.refills')({val: {id: 1}})}>Add Prescription Refills</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Prescription Refills: <RIENumber className='editable-text' value={state.prescription.refills} propName={'refills'}  change={this.props.onChange('prescription.refills')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.refills')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderAsNeeded() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (state.prescription.as_needed == null) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.as_needed')({val: {id: true}})}>Add Prescription As Needed</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Prescription As Needed\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.as_needed')({val: {id: null}})}>(remove)</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderDosage() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.dosage) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className='section'>\r\n        Dosage Amount: <RIENumber className='editable-text' value={state.prescription.dosage.amount} propName={'amount'}  change={this.props.onChange('prescription.dosage.amount')} />\r\n        <br />\r\n        Dosage Frequency: <RIENumber className='editable-text' value={state.prescription.dosage.frequency} propName={'frequency'}  change={this.props.onChange('prescription.dosage.frequency')} />\r\n        <br />\r\n        Dosage Period: <RIENumber className='editable-text' value={state.prescription.dosage.period} propName={'period'}  change={this.props.onChange('prescription.dosage.period')} />\r\n        <br />\r\n        Dosage Unit: <RIESelect className='editable-text' value={{id: state.prescription.dosage.unit, text: state.prescription.dosage.unit}} propName=\"unit\" change={this.props.onChange('prescription.dosage.unit')} options={unitOfTimeOptions} />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDuration() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.duration) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className='section'>\r\n        Duration Quantity: <RIENumber className='editable-text' value={state.prescription.duration.quantity} propName={'quantity'}  change={this.props.onChange('prescription.duration.quantity')} />\r\n        <br />\r\n        Duration Unit: <RIESelect className='editable-text' value={{id: state.prescription.duration.unit, text: state.prescription.duration.unit}} propName=\"unit\" change={this.props.onChange('prescription.duration.unit')} options={unitOfTimeOptions} />\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderInstructions() {\r\n    let state = ((this.props.state: any): MedicationOrderState);\r\n    if (!state.prescription.instructions) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.instructions')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Instructions</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Instructions\r\n          <br />\r\n          <Codes codes={state.prescription.instructions} system={\"SNOMED-CT\"} onChange={this.props.onChange('prescription.instructions')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('prescription.instructions')({val: {id: null}})}>Remove Instructions</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass MedicationEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    return (\r\n      <div>\r\n        {this.renderMedicationOrder()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMedicationOrder() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    let medicationOrder = this.props.otherStates.filter((s) => {return s.type === \"MedicationOrder\"});\r\n    let options = medicationOrder.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.medication_order) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('medication_order')({val: {id: \"text\"}})}>Add Medication Order</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Medication Order: <RIESelect className='editable-text' value={{id: state.medication_order, text: state.medication_order}} propName={'medication_order'}  change={this.props.onChange('medication_order')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('medication_order')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): MedicationEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.RxNorm')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass CarePlanStart extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    return (\r\n      <div>\r\n        {this.renderAssignToAttribute()}\r\n        {this.renderReason()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        {this.renderActivities()}\r\n        {this.renderGoals()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderAssignToAttribute() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    if (!state.assign_to_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: \"text\"}})}>Add Assign to Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Assign to Attribute: <RIEInput className='editable-text' value={state.assign_to_attribute} propName={'assign_to_attribute'}  change={this.props.onChange('assign_to_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('assign_to_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): CarePlanStart);\r\n    if (!state.reason) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let attribute = <RIEInput className='editable-text' value={state.reason} propName={'reason'}  change={this.props.onChange('reason')} />\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {attribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  renderActivities() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    if (!state.activities) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('activities')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Activities</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Activities\r\n          <br />\r\n          <Codes codes={state.activities} system={\"SNOMED-CT\"} onChange={this.props.onChange('activities')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('activities')({val: {id: null}})}>Remove Activities</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderGoals() {\r\n    let state = ((this.props.state: any): CarePlanStartState);\r\n    if (!state.goals) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('goals')({val: {id: [getTemplate('Attribute.Goal')]}})}>Add Goals</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Goals\r\n          <br />\r\n          <Goals goals={state.goals} onChange={this.props.onChange('goals')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('goals')({val: {id: null}})}>Remove Goals</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass CarePlanEnd extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    return (\r\n      <div>\r\n        {this.renderCarePlan()}\r\n        {this.renderReferencedByAttribute()}\r\n        {this.renderCodes()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderCarePlan() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    let careplans = this.props.otherStates.filter((s) => {return s.type === \"CarePlanStart\"});\r\n    let options = careplans.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.careplan) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('careplan')({val: {id: \"text\"}})}>Add Care Plan</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Care Plan: <RIESelect className='editable-text' value={{id: state.careplan, text: state.careplan}} propName={'careplan'}  change={this.props.onChange('careplan')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('careplan')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): CarePlanEndState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Procedure extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ProcedureState);\r\n    return (\r\n      <div>\r\n        {this.renderReason()}\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        {this.renderDuration()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderReason() {\r\n    let state = ((this.props.state: any): Procedure);\r\n    if (!state.reason) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: \"Select Condition/Enter Attribute\"}})}>Add Reason</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n      let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n      let inputAttribute = [{id: \"*Input Attribute*\", text: \"*Input Attribute*\"}];\r\n      let allOptions = options.concat(inputAttribute);\r\n      let reason = <RIESelect className='editable-text' value={{id: state.reason, text: state.reason}} propName={'reason'}  change={this.props.onChange('reason')} options={allOptions} />\r\n      if (state.reason === \"*Input Attribute*\") {\r\n        let attribute = <RIEInput className='editable-text' value={state.reason} propName={'reason'}  change={this.props.onChange('reason')} />\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n            Attribute: {attribute}\r\n            <br/>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            Reason: {reason}\r\n            <a className='editable-text' onClick={() => this.props.onChange('reason')({val: {id: null}})}>(remove)</a>\r\n            <br/>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  renderDuration() {\r\n    let state = ((this.props.state: any): ProcedureState);\r\n    if (!state.duration) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('duration')({val: {id: {low: 10, high: 20, unit: 'days'}}})}>Add Duration</a>\r\n          <br />\r\n        </div>\r\n      );\r\n      return null;\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Duration Low: <RIENumber className='editable-text' value={state.duration.low} propName={'low'}  change={this.props.onChange('duration.low')} />\r\n          <br />\r\n          Duration High: <RIENumber className='editable-text' value={state.duration.high} propName={'high'}  change={this.props.onChange('duration.high')} />\r\n          <br />\r\n          Duration Unit: <RIESelect className='editable-text' value={{id: state.duration.unit, text: state.duration.unit}} propName=\"unit\" change={this.props.onChange('duration.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => this.props.onChange('duration')({val: {id: null}})}>(remove)</a>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass VitalSign extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): VitalSignState);\r\n    return (\r\n      <div>\r\n        Vital Sign: <RIEInput className='editable-text' value={state.vital_sign} propName={'vital_sign'} change={this.props.onChange('vital_sign')} />\r\n        <br/>\r\n        Unit: <RIEInput className='editable-text' value={state.unit} propName={'unit'} change={this.props.onChange('unit')} />\r\n        <br/>\r\n        {this.renderExactOrRange()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): VitalSignState);\r\n    if (state.exact) {\r\n      return (\r\n        <div className='section'>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Observation extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ObservationState);\r\n    let options = [\r\n      {id: 'social-history', text: 'social-history'},\r\n      {id: 'vital-signs', text: 'vital-signs'},\r\n      {id: 'imaging', text: 'imaging'},\r\n      {id: 'laboratory', text: 'laboratory'},\r\n      {id: 'procedure', text: 'procedure'},\r\n      {id: 'survey', text: 'survey'},\r\n      {id: 'exam', text: 'exam'},\r\n      {id: 'therapy', text: 'therapy'}\r\n    ];\r\n    return (\r\n      <div>\r\n        Category: <RIESelect className='editable-text' value={{id: state.category, text: state.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\r\n        <br/>\r\n        Unit: <RIEInput className='editable-text' value={state.unit} propName={'unit'} change={this.props.onChange('unit')} />\r\n        <br/>\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\r\n          <br/>\r\n        </div>\r\n        {this.renderValueContainer()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderValueContainer() { // renders exact, range, attribute, or vital_sign\r\n    let state = ((this.props.state: any): ObservationState);\r\n    if (state.exact) {\r\n      let value = state.exact.quantity;\r\n      if(typeof value === 'boolean'){\r\n        value = String(value);\r\n      }\r\n      return (\r\n        <div className='section'>\r\n          Exact Value: <RIEInput className='editable-text' value={value} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          { this.renderToggles('exact') }\r\n        </div>\r\n      );\r\n    } else if (state.range) {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          { this.renderToggles('range') }\r\n        </div>\r\n      );\r\n    } else if (state.attribute) {\r\n      return (\r\n        <div className='section'>\r\n          Attribute: <RIEInput className='editable-text' value={state.attribute} propName={'attribute'}  change={this.props.onChange('attribute')} />\r\n          <br/>\r\n          { this.renderToggles('attribute') }\r\n        </div>\r\n      );\r\n    } else if (state.value_code) {\r\n      return (\r\n        <div className='section'>\r\n          <Code code={state.value_code} system={\"SNOMED-CT\"} onChange={this.props.onChange('value_code')} />\r\n          { this.renderToggles('value_code') }\r\n        </div>\r\n      );\r\n    } else { // vital_sign\r\n      return (\r\n        <div className='section'>\r\n          Vital Sign: <RIEInput className='editable-text' value={state.vital_sign} propName={'vital_sign'}  change={this.props.onChange('vital_sign')} />\r\n          { this.renderToggles('vital_sign') }\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderToggles(currentItem) {\r\n    console.log(currentItem);\r\n\r\n    let toggles = [];\r\n\r\n    if (currentItem !== 'exact') {\r\n      toggles.push(\r\n                <div key='exact'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Exact</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'range') {\r\n      toggles.push(\r\n                <div key='range'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Range</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'attribute') {\r\n      toggles.push(\r\n                <div key='attribute'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('attribute')({val: {id: \"text\"}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Attribute</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'vital_sign') {\r\n      toggles.push(\r\n                <div key='vital_sign'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('vital_sign')({val: {id: \"text\"}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('value_code')({val: {id: null}})}}>Change to Vital Sign</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    if (currentItem !== 'value_code') {\r\n      toggles.push(\r\n                <div key='value_code'>\r\n                  <a className='editable-text' onClick={() => {this.props.onChange('value_code')({val: {id:  getTemplate('Type.Code.Snomed')}}); this.props.onChange('exact')({val: {id: null}}); this.props.onChange('range')({val: {id: null}}); this.props.onChange('attribute')({val: {id: null}}); this.props.onChange('vital_sign')({val: {id: null}})}}>Change to Value Code</a>\r\n                  <br />\r\n                </div>\r\n        );\r\n    }\r\n\r\n    return toggles;\r\n  }\r\n\r\n}\r\n\r\nclass MultiObservation extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): MultiObservationState);\r\n    let observationCount = (state.observations && state.observations.length) || 0;\r\n    let options = [\r\n      {id: 'social-history', text: 'social-history'},\r\n      {id: 'vital-signs', text: 'vital-signs'},\r\n      {id: 'imaging', text: 'imaging'},\r\n      {id: 'laboratory', text: 'laboratory'},\r\n      {id: 'procedure', text: 'procedure'},\r\n      {id: 'survey', text: 'survey'},\r\n      {id: 'exam', text: 'exam'},\r\n      {id: 'therapy', text: 'therapy'}\r\n    ];\r\n    return (\r\n      <div>\r\n        Category: <RIESelect className='editable-text' value={{id: state.category, text: state.category}} propName=\"category\" change={this.props.onChange('category')} options={options} />\r\n        <br />\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\r\n          <br />\r\n        </div>\r\n        <div className='section'>\r\n          <b>Observations</b>\r\n          <br />\r\n          {state.observations && state.observations.map((observation, i) => {\r\n            return (\r\n              <div className='section' key={i}>\r\n                Observation #{i+1} (<a className='editable-text delete-button' onClick={() => this.props.onChange(`observations.[${i}]`)({val: {id: null}})}>remove</a>)\r\n                <Observation state={observation} onChange={this.props.onChange(`observations.[${i}]`)} />\r\n              </div>\r\n            )\r\n          })}\r\n          <a className='editable-text' onClick={() => this.props.onChange(`observations.[${observationCount}]`)({val: {id: _.cloneDeep(getTemplate('Contained.Observation'))}})}>+</a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass DiagnosticReport extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): DiagnosticReportState);\r\n    let observationCount = (state.observations && state.observations.length) || 0;\r\n    return (\r\n      <div>\r\n        <div className='section'>\r\n          <b>Codes</b>\r\n          <br />\r\n          <Codes codes={state.codes} system={\"LOINC\"} onChange={this.props.onChange('codes')} />\r\n        </div>\r\n        <div className='section'>\r\n          <b>Observations</b>\r\n          <br />\r\n          {state.observations && state.observations.map((observation, i) => {\r\n            return (\r\n              <div className='section' key={i}>\r\n                Observation #{i+1} (<a className='editable-text delete-button' onClick={() => this.props.onChange(`observations.[${i}]`)({val: {id: null}})}>remove</a>)\r\n                <Observation state={observation} onChange={this.props.onChange(`observations.[${i}]`)} />\r\n              </div>\r\n            )\r\n          })}\r\n        <a className='editable-text' onClick={() => this.props.onChange(`observations.[${observationCount}]`)({val: {id: _.cloneDeep(getTemplate('Contained.Observation'))}})}>+</a>\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass ImagingStudy extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): ImagingStudyState);\r\n    return (\r\n      <div>\r\n        <div className='section'>\r\n          <b>Procedure Code:</b>\r\n          <Code code={state.procedure_code} system={\"SNOMED-CT\"} onChange={this.props.onChange('procedure_code')} />\r\n          <br />\r\n        </div>\r\n        <div className='section'>\r\n          <b>Series:</b>\r\n          <br />\r\n          <SeriesList series={state.series} onChange={this.props.onChange('series')} />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nclass Symptom extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    return (\r\n      <div>\r\n        Symptom: <RIEInput className='editable-text' value={state.symptom} propName={'symptom'} change={this.props.onChange('symptom')} />\r\n        <br/>\r\n        {this.renderProbability()}\r\n        {this.renderCause()}\r\n        {this.renderExactOrRange()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderProbability() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    if (!state.probability) {\r\n      return (\r\n        <div>\r\n          Probability: <RIENumber className='editable-text' value={1} propName={'probability'} editProps={{step: .01, min: 0, max: 1}} change={this.props.onChange('probability')} format={this.formatAsPercentage} validate={this.checkInRange} classInvalid=\"invalid\" />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Probability: <RIENumber className='editable-text' value={state.probability} propName={'probability'} editProps={{step: .01, min: 0, max: 1}} change={this.props.onChange('probability')} format={this.formatAsPercentage} validate={this.checkInRange} classInvalid=\"invalid\"/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  checkInRange(num: number) {\r\n    return ((num >= 0) && (num <= 1));\r\n  }\r\n\r\n  formatAsPercentage(num: number) {\r\n    return (num * 100) + \"%\";\r\n  }\r\n\r\n  renderCause() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    if (!state.cause) {\r\n      return (\r\n        <div>\r\n          Cause: <RIEInput className='editable-text' value={this.props.moduleName} propName={'cause'} change={this.props.onChange('cause')} />\r\n          <br/>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Cause: <RIEInput className='editable-text' value={state.cause} propName={'cause'} change={this.props.onChange('cause')} />\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): SymptomState);\r\n    if (state.exact) {\r\n      return (\r\n        <div className='section'>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.Range')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.Exact')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass Death extends Component<Props> {\r\n\r\n  render() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    return (\r\n      <div>\r\n        {this.renderExactOrRange()}\r\n        {this.renderCodes()}\r\n        {this.renderConditionOnset()}\r\n        {this.renderReferencedByAttribute()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderExactOrRange() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    if (state.exact) {\r\n      return (\r\n        <div className='section'>\r\n          Exact Quantity: <RIENumber className='editable-text' value={state.exact.quantity} propName='quantity' change={this.props.onChange('exact.quantity')} />\r\n          <br />\r\n          Exact Unit: <RIESelect className='editable-text' value={{id: state.exact.unit, text: state.exact.unit}} propName=\"unit\" change={this.props.onChange('exact.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: getTemplate('Attribute.RangeWithUnit')}}); this.props.onChange('exact')({val: {id: null}})}}>Change to Range</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: null}}); this.props.onChange('exact')({val: {id: null}})}}>Remove Exact/Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n    else if (state.range) {\r\n      return (\r\n        <div className='section'>\r\n          Range Low: <RIENumber className='editable-text' value={state.range.low} propName='low' change={this.props.onChange('range.low')} />\r\n          <br />\r\n          Range High: <RIENumber className='editable-text' value={state.range.high} propName='high' change={this.props.onChange('range.high')} />\r\n          <br />\r\n          Range Unit: <RIESelect className='editable-text' value={{id: state.range.unit, text: state.range.unit}} propName=\"unit\" change={this.props.onChange('range.unit')} options={unitOfTimeOptions} />\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Change to Exact</a>\r\n          <br />\r\n          <a className='editable-text' onClick={() => {this.props.onChange('range')({val: {id: null}}); this.props.onChange('exact')({val: {id: null}})}}>Remove Exact/Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => {this.props.onChange('exact')({val: {id: getTemplate('Attribute.ExactWithUnit')}}); this.props.onChange('range')({val: {id: null}})}}>Add Exact/Range</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderCodes() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    if (!state.codes) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: [getTemplate('Type.Code.Snomed')]}})}>Add Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className='section'>\r\n          Codes\r\n          <br />\r\n          <Codes codes={state.codes} system={\"SNOMED-CT\"} onChange={this.props.onChange('codes')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('codes')({val: {id: null}})}>Remove Codes</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderConditionOnset() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    let conditionOnset = this.props.otherStates.filter((s) => {return s.type === \"ConditionOnset\"});\r\n    let options = conditionOnset.map((e) => {return {id: e.name, text: e.name}});\r\n    if (!state.condition_onset) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: \"text\"}})}>Add Condition Onset</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Condition Onset: <RIESelect className='editable-text' value={{id: state.condition_onset, text: state.condition_onset}} propName={'condition_onset'}  change={this.props.onChange('condition_onset')} options={options} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('condition_onset')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReferencedByAttribute() {\r\n    let state = ((this.props.state: any): DeathState);\r\n    if (!state.referenced_by_attribute) {\r\n      return (\r\n        <div>\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: \"text\"}})}>Add Referenced by Attribute</a>\r\n          <br />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          Referenced by Attribute: <RIEInput className='editable-text' value={state.referenced_by_attribute} propName={'referenced_by_attribute'}  change={this.props.onChange('referenced_by_attribute')} />\r\n          <a className='editable-text' onClick={() => this.props.onChange('referenced_by_attribute')({val: {id: null}})}>(remove)</a>\r\n          <br/>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default StateEditor;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport { RIEInput, RIETextArea } from 'riek';\r\n\r\nimport './ModuleProperties.css';\r\n\r\nimport type { Module } from './types/Module';\r\n\r\ntype Props = {\r\n  module: Module,\r\n  onRemarksChange: (selectedModuleIndex: number, newName: string) => mixed\r\n}\r\n\r\nclass ModulePropertiesEditor extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onRemarksChange = this.onRemarksChange.bind(this);\r\n  }\r\n\r\n  onRemarksChange(remarks) {\r\n    this.props.onRemarksChange(remarks)\r\n  }\r\n\r\n  render() {\r\n    let remarks = \"No remarks.\" \r\n    if(Array.isArray(this.props.module.remarks)){ \r\n      remarks = this.props.module.remarks.join(\"\\n\");\r\n    }\r\n\r\n    // NOTE: WHAT IF REMARKS SET TO BLANK?\r\n\r\n    return (\r\n      <div className='ModuleProperties'>\r\n        <div className='Editor-panel-title'> \r\n           Module Remarks\r\n        </div>\r\n        <div className='ModuleProperties-remarks'>\r\n          <RIETextArea value={remarks} propName=\"remarks\" change={(newval) => this.onRemarksChange(newval.remarks)} />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ModulePropertiesEditor;\r\n","// @flow\r\nimport type { Module } from './types/Module';\r\nimport type { State } from './types/State';\r\n\r\nimport { cleanString } from '../utils/stringUtils';\r\n\r\nconst STANDARD_COLOR = 'Black';\r\n/*\r\nconst HIGHLIGHT_COLOR = '#007bff';\r\nconst MUTED_COLOR = '#CCCCCC'\r\n*/\r\n\r\nexport function generateDOT(module: Module, selectedState: State, selectedStateTransition: Number) {\r\n\r\n  let relatedStates = {};\r\n\r\n  if(selectedState) {\r\n    Object.keys(module.states).forEach( key => {\r\n      let state = module.states[key];\r\n\r\n      let allTransitions = findTransitions(module.states[key])\r\n\r\n      if(allTransitions[selectedState.name]){\r\n        relatedStates[state.name] = true;\r\n      }\r\n\r\n    });\r\n\r\n    relatedStates = Object.assign({}, relatedStates, findTransitions(module.states[selectedState.name]))\r\n\r\n  }\r\n\r\n  let output =  ['digraph G {',\r\n          nodesAsDOT(module, selectedState, relatedStates),\r\n          transitionsAsDOT(module, selectedState, selectedStateTransition),\r\n         '}'\r\n         ].join('\\n');\r\n\r\n  return output;\r\n\r\n}\r\n\r\nconst nodesAsDOT = (module: Module, selectedState: State, relatedStates: mixed) => {\r\n\r\n  return Object.keys(module.states).filter(name => typeof module.states[name] === 'object').map( name => {\r\n\r\n    let state = module.states[name]\r\n    state['name'] = name\r\n\r\n    let node = {\r\n      id: 'node_' + escapeId(name),\r\n      shape: 'record',\r\n      style: 'rounded,filled',\r\n      fillcolor: 'White',\r\n      fontcolor: STANDARD_COLOR\r\n    }\r\n\r\n    if(state['type'] === 'Initial' || state['type'] === 'Terminal'){\r\n        node['fillcolor'] = 'Grey'\r\n        node['style'] = 'rounded,filled'\r\n        node['fontcolor'] = 'White'\r\n    }\r\n\r\n    if(selectedState && state.name === selectedState.name){\r\n      node['fillcolor'] = 'White'\r\n      node['class'] = 'node-highlighted'\r\n    } else if (selectedState && !relatedStates[state.name]){\r\n      node['class'] = 'node-muted'\r\n    }\r\n\r\n    let details = stateDescription(state)\r\n    if(details.length === 0){\r\n      node['label'] = (name === state['type']) ? state['name'] : `{ ${name} | ${state['type']} }`\r\n    } else {\r\n      node['label'] = `{ ${name} | { ${state['type']} | ${details} } }`\r\n    }\r\n\r\n    node['label'] = escapeLabel(node['label']);\r\n\r\n    let params = Object.keys(node).map((key) => `${key} = \"${node[key]}\"`).join(\", \");\r\n\r\n    return `\"${escapeName(name)}\" [${params};]`\r\n\r\n  }).join(\"\\n\");\r\n\r\n}\r\n\r\nconst transitionsAsDOT = (module: Module, selectedState: State, selectedStateTransition: Number) => {\r\n\r\n  return Object.keys(module.states).map( name => {\r\n\r\n    let state = module.states[name]\r\n    let escapedName = escapeName(name);\r\n\r\n    let className='';\r\n\r\n    if(!!selectedState){\r\n      className = 'transition-muted'\r\n    }\r\n\r\n    if(selectedState && selectedState.name === name){\r\n      className='transition-highlighted'\r\n    }\r\n\r\n    if(state.direct_transition !== undefined){\r\n      if(selectedState && state.direct_transition === selectedState.name && selectedState.name !== name){\r\n        className='';\r\n      }\r\n\r\n      if(selectedStateTransition === 0 ){\r\n        className += ' transition-selected';\r\n      }\r\n\r\n      if(module.states[state.direct_transition]){\r\n        return `  \"${escapedName}\" -> \"${escapeName(module.states[state.direct_transition].name)}\" [class = \"transition transition-index_0 ${className}\"];\\n`\r\n      } else {\r\n        console.log(`NO SUCH NODE TO TRANSITION TO: ${state.direct_transition} FROM ${name}`);\r\n      }\r\n    } else if(state.distributed_transition !== undefined){\r\n      let out_transitions = ''\r\n      state.distributed_transition.forEach( (t, i) => {\r\n        let transitionClassName = className\r\n        let distLabel = ''\r\n        if(typeof t.distribution === 'object'){\r\n          distLabel = `p(${t.distribution.attribute})`\r\n          if(t.distribution.default){\r\n            let pct = t.distribution.default * 100\r\n            distLabel += `, default ${pct}%`\r\n          }\r\n        } else {\r\n          let pct = t.distribution * 100\r\n          distLabel = `${pct}%`\r\n        }\r\n        if(module.states[t.transition]){\r\n          if(selectedState && t.transition === selectedState.name && selectedState.name !== name){\r\n            transitionClassName = '';\r\n          }\r\n\r\n          if(selectedStateTransition === i){\r\n            transitionClassName += ' transition-selected';\r\n          }\r\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"${distLabel}\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\r\n        } else {\r\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\r\n        }\r\n      })\r\n      return out_transitions\r\n    } else if(state.table_transition !== undefined){\r\n        let out_transitions = ''\r\n        state.table_transition.transitions.forEach( (t, i) => {\r\n        let transitionClassName = className\r\n        let pct = t.default_probability * 100\r\n        let distLabel = `${pct}%`\r\n        if(module.states[t.transition]){\r\n          if(selectedState && t.transition === selectedState.name && selectedState.name !== name){\r\n            transitionClassName = '';\r\n          }\r\n\r\n          if(selectedStateTransition === i){\r\n            transitionClassName += ' transition-selected';\r\n          }\r\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"See Table\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\r\n          } else {\r\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\r\n        }\r\n      })\r\n      return out_transitions\r\n    } else if (state.conditional_transition !== undefined){\r\n      let out_transitions = ''\r\n      state.conditional_transition.forEach( (t, i ) => {\r\n        let transitionClassName = className\r\n        let cnd = t.condition !== undefined ? logicDetails(t.condition) : 'else';\r\n        if(module.states[t.transition]){\r\n          if(selectedState && t.transition === selectedState.name){\r\n            transitionClassName = ''\r\n          }\r\n          if(selectedStateTransition === i){\r\n            transitionClassName += ' transition-selected';\r\n          }\r\n          out_transitions += `  \"${escapedName}\" -> \"${escapeName(module.states[t.transition].name)}\" [label = \"${i+1}. ${cnd}\", class = \"transition transition-index_${i} ${transitionClassName}\"];\\n`\r\n        } else {\r\n          console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}\\n`);\r\n        }\r\n      })\r\n     return out_transitions\r\n\r\n    } else if (state.complex_transition !== undefined){\r\n      let transitions = {}\r\n      let nodeHighlighted = {}\r\n      state.complex_transition.forEach( (t, i) => {\r\n        let cnd = t.condition !== undefined ? logicDetails(t['condition']) : 'else'\r\n        if(t.transition !== undefined){\r\n          if(module.states[t.transition]){\r\n            let nodes = `  \"${escapedName}\" -> \"${t.transition}\"`\r\n            if(selectedState && t.transition === selectedState.name){\r\n              nodeHighlighted[nodes] = 'standard'\r\n            }\r\n            if(selectedState && name === selectedState.name){\r\n              nodeHighlighted[nodes] = 'highlighted'\r\n            }\r\n            if(transitions[nodes] === undefined){\r\n              transitions[nodes] = [];\r\n            }\r\n            transitions[nodes].push(cnd)\r\n          } else {\r\n            console.log(`NO SUCH NODE TO TRANSITION TO: ${t.transition} FROM ${name}`);\r\n          }\r\n        } else {\r\n          t.distributions.forEach( dist => {\r\n            if(module.states[dist.transition]){\r\n              let pct = dist.distribution * 100\r\n              let nodes = `  \"${escapedName}\" -> \"${dist.transition}\"`\r\n              if(selectedState && dist.transition === selectedState.name){\r\n                nodeHighlighted[nodes] = 'standard'\r\n              }\r\n              if(selectedState && name === selectedState.name){\r\n                nodeHighlighted[nodes] = 'highlighted'\r\n              }\r\n              if(transitions[nodes] === undefined){\r\n                transitions[nodes] = [];\r\n              }\r\n              transitions[nodes].push(`${cnd}: ${pct}%`)\r\n            } else {\r\n              console.log(`NO SUCH NODE TO TRANSITION TO: ${dist.transition} FROM ${name}`);\r\n            }\r\n          })\r\n        }\r\n      })\r\n\r\n      let out_transitions = ''\r\n      Object.keys(transitions).forEach( (trans, index) => {\r\n        let transitionClassName = className\r\n        if(nodeHighlighted[trans] === 'standard'){\r\n          transitionClassName = ''\r\n        } else if(nodeHighlighted[trans] === 'highlighted'){\r\n          transitionClassName='transition-highlighted'\r\n        }\r\n        if(selectedStateTransition === index){\r\n          transitionClassName += ' transition-selected';\r\n        }\r\n        out_transitions += `${trans} [label = \"${transitions[trans].join(',\\\\n')}\", class = \"transition transition-index_${index} ${transitionClassName}\"]\\n`\r\n      })\r\n\r\n      return out_transitions;\r\n\r\n    }\r\n\r\n    return ''\r\n\r\n  }).join('')\r\n\r\n}\r\n\r\nconst stateDescription = (state) =>{\r\n\r\n  let details = ''\r\n\r\n  switch(state['type']){\r\n    case 'Initial':\r\n    case 'Terminal':\r\n      details = ''\r\n      break;\r\n    case 'Guard':\r\n      details = \"Allow if \" + logicDetails(state['allow'])\r\n      break;\r\n\r\n    case 'Delay':\r\n    case 'Death':\r\n      if(state['range'] !== undefined){\r\n        let r = state['range']\r\n        details = `${r['low']} - ${r['high']} ${r['unit']}`\r\n      } else if (state['exact'] !== undefined) {\r\n        let e = state['exact']\r\n        details = `${e['quantity']} ${e['unit']}`\r\n      }\r\n      break;\r\n    case 'Encounter':\r\n      if(state['wellness']){\r\n        details = 'Wait for regularly scheduled wellness encounter\\\\n'\r\n      }\r\n      break;\r\n    case 'EncounterEnd':\r\n      details = 'End the current encounter'\r\n      if(state['discharge_disposition']){\r\n       let code = state['discharge_disposition']\r\n       details += `\\\\lDischarge Disposition: [${code['code']}] ${code['display']}`\r\n      }\r\n      break;\r\n    case 'SetAttribute':\r\n      let v = state['value']\r\n      details = `Set '${state[\"attribute\"]}' = ${(v === undefined || v === null || v === \"\") ? 'nil' : v}`\r\n      break;\r\n    case 'Symptom':\r\n     let s = state['symptom']\r\n     let p = state['probability']\r\n      if(state.range !== undefined){\r\n        let r = state['range']\r\n        details = `${s}: ${r['low']} - ${r['high']}`\r\n      } else if (state.exact !== undefined) {\r\n        let e = state['exact']\r\n        details = `${s}: ${e['quantity']}`\r\n      }\r\n      if (p && p < 1.0 && p > 0) {\r\n        let pct = p*100;\r\n        details += ` (${pct}%)`\r\n      }\r\n      break;\r\n    case 'Observation':\r\n      let unit = state['unit']\r\n      if(unit){\r\n        unit = \"in \" + unit.replace('{','(').replace('}',')')\r\n      }\r\n\r\n      if(state.vital_sign !== undefined) {\r\n        details = `Record value from Vital Sign '${state[\"vital_sign\"]}' ${unit}\\\\l`\r\n      } else if (state.attribute !== undefined) {\r\n        details = `Record value from Attribute '${state[\"attribute\"]}' ${unit}\\\\l`\r\n      } else if(state.range !== undefined){\r\n        let r = state['range']\r\n        details = `Record value between: ${r['low']} - ${r['high']} ${unit}\\\\l`\r\n      } else if (state.exact !== undefined) {\r\n        let e = state['exact']\r\n        details = `Record value ${e['quantity']} ${unit}\\\\l`\r\n      } else if (state.value_code !== undefined) {\r\n        let v = state['value_code']\r\n        details = `Record value ${v['system']}[${v['code']}]: ${v['display']}\\\\l`\r\n      }\r\n      break;\r\n\r\n    case 'ImagingStudy':\r\n      let series = state['series'];\r\n      if (series.length > 0) {\r\n        let primarySeries = series[0];\r\n        let primaryModality = primarySeries['modality'];\r\n        let primaryBodySite = primarySeries['body_site'];\r\n\r\n        details = `DICOM-DCM[${primaryModality['code']}]: ${primaryModality['display']}\\\\l`\r\n        details += `SNOMED-CT[${primaryBodySite['code']}]: Body Site: ${primaryBodySite['display']}\\\\l`\r\n      }\r\n      break;\r\n\r\n    case 'Counter':\r\n      details = `${state['action']} value of attribute '${state[\"attribute\"]}' by 1`\r\n      break;\r\n    case 'VitalSign':\r\n      let vs = state['vital_sign']\r\n      let unitv = state['unit']\r\n      if(state.range !== undefined){\r\n        let r = state['range']\r\n        details = `Set ${vs}: ${r['low']} - ${r['high']} ${unitv}`\r\n      } else if (state.exact !== undefined) {\r\n        let e = state['exact']\r\n        details = `Set ${vs}: ${e['quantity']} ${unitv}`\r\n      }\r\n      break;\r\n    case 'CallSubmodule':\r\n      details = `Call submodule '${state['submodule']}'`\r\n      break;\r\n    case 'MultiObservation':\r\n    case 'DiagnosticReport':\r\n      if(state.observations && state.observations.length > 0){\r\n        let diagType = ['Type']\r\n        let diagValue = ['Value']\r\n        let diagUnits = ['Unit'];\r\n        state.observations.forEach( (s,i) => {\r\n          let unit = s['unit']\r\n          if(unit){\r\n            unit = unit.replace('{','(').replace('}',')')\r\n          }\r\n          diagType.push(s.codes.map(c => c.display).join('\\\\l'))\r\n          diagUnits.push(unit)\r\n\r\n          if(s.vital_sign !== undefined) {\r\n            diagValue.push(`Vital Sign: '${s[\"vital_sign\"]}'`)\r\n          } else if (s.attribute !== undefined) {\r\n            diagValue.push(`Attribute: '${s[\"attribute\"]}'`)\r\n          } else if(s.range !== undefined){\r\n            let r = s['range']\r\n            diagValue.push(`${r['low']} - ${r['high']}`)\r\n          } else if (s.exact !== undefined) {\r\n            let e = s['exact']\r\n            diagValue.push(`${e['quantity']}`);\r\n          } else if (s.value_code !== undefined) {\r\n            let v = s['value_code']\r\n            diagValue.push(`${v['system']}[${v['code']}]: ${v['display']}`);\r\n          }\r\n        });\r\n        details += `{${diagType.map(t => t).join('|')}}|`;\r\n        details += `{${diagValue.map(t => t).join('|')}}|`;\r\n        details += `{${diagUnits.map(t => t).join('|')}}|`;\r\n      } else {\r\n        details = `No Observations\\\\l`;\r\n      }\r\n\r\n      break;\r\n    default:\r\n      break;\r\n\r\n  }\r\n\r\n  if(state.codes !== undefined){\r\n    state['codes'].forEach( code => {\r\n      details = details + code['system'] + \"[\" + code['code'] + \"]: \" + code['display'] + \"\\\\l\"\r\n    })\r\n  }\r\n\r\n  if(state.target_encounter !== undefined){\r\n   let verb = 'Perform'\r\n\r\n    switch(state['type']){\r\n      case 'ConditionOnset':\r\n      case 'AllergyOnset':\r\n        verb = 'Diagnose'\r\n        break;\r\n      case 'MedicationOrder':\r\n        verb = 'Prescribe'\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    details = details + verb + \" at \" + state['target_encounter'] + \"\\\\l\"\r\n  }\r\n\r\n  if(state.reason){\r\n    details = details + `Reason: ${state['reason']}\\\\l`\r\n  }\r\n  if(state.medication_order){\r\n    details = details + `Prescribed at: ${state['medication_order']}\\\\l`\r\n  }\r\n  if(state.condition_onset){\r\n    details = details + `Onset at: ${state['condition_onset']}\\\\l`\r\n  }\r\n  if(state.allergy_onset){\r\n    details = details + `Onset at: ${state['allergy_onset']}\\\\l`\r\n  }\r\n  if(state.careplan){\r\n    details = details + `Prescribed at: ${state['careplan']}\\\\l`\r\n  }\r\n  if(state.assign_to_attribute){\r\n    details = details + `Assign to Attribute: '${state['assign_to_attribute']}'\\\\l`\r\n  }\r\n  if(state.administration){\r\n    details = details + `Medication is administered\\\\l`\r\n  }\r\n  if(state.referenced_by_attribute){\r\n    details = details + `Referenced By Attribute: '${state['referenced_by_attribute']}'\\\\l`\r\n  }\r\n  if(state.activities){\r\n    details = details + \"\\\\lActivities:\\\\l\"\r\n    state['activities'].forEach( activity => {\r\n      details = details + activity['system'] + \"[\" + activity['code'] + \"]: \" + activity['display'] + \"\\\\l\"\r\n    })\r\n  }\r\n  if(state.goals){\r\n    details = details + \"\\\\lGoals:\\\\l\"\r\n    state['goals'].forEach( goal => {\r\n      if(goal['text']){\r\n        details = details + goal['text'] + \"\\\\l\"\r\n      } else if(goal['codes']) {\r\n        let code = goal['codes'][0]\r\n        details = details + code['system'] + \"[\" + code['code'] + \"]: \" + code['display'] + \"\\\\l\"\r\n      } else if(goal['observation']) {\r\n        let logic = goal['observation']\r\n        let obs = findReferencedType(logic)\r\n        details = details + `Observation ${obs} \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\r\n      }\r\n    })\r\n  }\r\n  if(state.duration){\r\n    let d = state['duration']\r\n    details = `${details}\\\\lDuration: ${d['low']} - ${d['high']} ${d['unit']}\\\\l`\r\n  }\r\n  if(state.category){\r\n    details = `${details}Category: ${state['category']}\\\\l`\r\n  }\r\n\r\n  return details;\r\n}\r\n\r\nconst logicDetails = logic => {\r\n\r\n  switch(logic['condition_type']){\r\n    case 'And':\r\n    case 'Or':\r\n      let subsWhen =logic['conditions'].map( c => {\r\n        if(c['condition_type'] === 'and' || c['condition_type'] === 'or'){\r\n          return \"(\\\\l\" + logicDetails(c) + \")\\\\l\"\r\n        } else {\r\n          return logicDetails(c)\r\n        }\r\n      })\r\n      return subsWhen.join(logic['condition_type'].toLowerCase() + ' ')\r\n    case 'At Least':\r\n    case 'At Most':\r\n      let threshold = logic['minimum'] || logic['maximum']\r\n      let subsOr = logic['conditions'].map( c => {\r\n        if(c['condition_type'] === 'and' || c['condition_type'] === 'or'){\r\n          return \"(\\\\l\" + logicDetails(c) + \")\\\\l\"\r\n        } else {\r\n          return logicDetails(c)\r\n        }\r\n      });\r\n      return `${logic['condition_type']} ${threshold} of:\\\\l- ${subsOr.join('- ')}`\r\n    case 'Not':\r\n      let condition = logicDetails(logic['condition'])\r\n      return `not ${condition}`\r\n    case 'Gender':\r\n      return `gender is '${logic['gender']}'\\\\l`\r\n    case 'Age':\r\n      return `age \\\\${logic['operator']} ${logic['quantity']} ${logic['unit']}\\\\l`\r\n    case 'Socioeconomic Status':\r\n      return `${logic['category']} Socioeconomic Status\\\\l`\r\n    case 'Race':\r\n      return `race is '${logic['race']}'\\\\l`\r\n    case 'Date':\r\n      if (logic.year !== undefined) {\r\n        return `Year is \\\\${logic['operator']} ${logic['year']}\\\\l`\r\n      } else if (logic.month !== undefined) {\r\n        return `Month is \\\\${logic['operator']} ${logic['month']}\\\\l`\r\n      } else if (logic.date !== undefined) {\r\n        let d = logic['date']\r\n        return `Date is \\\\${logic['operator']} ${d['year']}-${d['month']}-${d['day']} ${d['hour']}:${d['minute']}:${d['second']}.${d['millisecond']}\\\\l`\r\n      }\r\n    case 'Symptom':\r\n      return `Symptom: '${logic['symptom']}' \\\\${logic['operator']} ${logic['value']}\\\\l`\r\n    case 'PriorState':\r\n      let prior_description = `state '${logic['name']}' has been processed`\r\n      if(logic.since !== undefined){\r\n        prior_description = `${prior_description} since ${logic.since}`\r\n      }\r\n      if(logic.within !== undefined){\r\n        prior_description = `${prior_description} within ${logic.within['quantity']} ${logic.within['unit']}`\r\n      }\r\n      return `${prior_description} \\\\l`\r\n    case 'Attribute':\r\n      return `Attribute: '${logic['attribute']}' \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\r\n    case 'Observation':\r\n      let obs = findReferencedType(logic)\r\n      if (logic.operator !== 'is nil' && logic.operator !== 'is not nil' && logic.operator.id !== 'is nil' && logic.operator.id !== 'is not nil'){\r\n        if(logic.value !== undefined){\r\n          return `Observation ${obs} \\\\${logic['operator']}${leaveUndefinedBlank(logic['value'])}\\\\l`\r\n        } else if (logic.value_code !== undefined) {\r\n          return `Observation ${obs} \\\\${logic['operator']} ${logic.value_code['system']}[${logic.value_code['code']}]: ${logic.value_code['display']}\\\\l`\r\n        }\r\n      } else {\r\n        return `Observation ${obs} \\\\${logic['operator']}\\\\l`\r\n      }\r\n\r\n    case 'Vital Sign':\r\n      return `Vital Sign ${logic['vital_sign']} \\\\${logic['operator']} ${logic['value']}\\\\l`\r\n    case 'Active Condition':\r\n      let cond = findReferencedType(logic)\r\n      return `Condition ${cond} is active\\\\l`\r\n    case 'Active CarePlan':\r\n      let plan = findReferencedType(logic)\r\n      return `CarePlan ${plan} is active\\\\l`\r\n    case 'Active Medication':\r\n      let med = findReferencedType(logic)\r\n      return `Medication ${med} is active\\\\l`\r\n    case 'Active Allergy':\r\n      let alg = findReferencedType(logic)\r\n      return `Allergy ${alg} is active\\\\l`\r\n    case 'True':\r\n    case 'False':\r\n      return logic['condition_type']\r\n    default:\r\n      return `Unknown Condition: ${logic['condition_type']}`\r\n\r\n  }\r\n}\r\n\r\nconst findReferencedType = (logic) => {\r\n  if(logic['codes']){\r\n    let code = logic['codes'][0]\r\n    return `'${code['system']} [${code['code']}]: ${code['display']}'`\r\n  } else if (logic['referenced_by_attribute']) {\r\n    return `Referenced By Attribute: '${logic['referenced_by_attribute']}'`\r\n  }\r\n  return `Error with referenced types: ${logic['condition_type']} condition must be specified by code or attribute`\r\n}\r\n\r\nconst findTransitions = (obj, ret) => {\r\n\r\n  if(!ret) ret = {};\r\n  if (!obj) return ret;\r\n  if (obj instanceof Array) {\r\n    for (let i in obj) {\r\n        ret = Object.assign({}, ret, findTransitions(obj[i], {}))\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  if (obj['direct_transition']) ret[obj['direct_transition']] = true\r\n  if (obj['transition']) ret[obj['transition']] = true;\r\n\r\n  if ((typeof obj === \"object\") && (obj !== null) ){\r\n    let children = Object.keys(obj);\r\n    if (children.length > 0){\r\n      for (let i = 0; i < children.length; i++ ){\r\n        ret = Object.assign({}, ret,findTransitions(obj[children[i]], {}));\r\n      }\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\nconst leaveUndefinedBlank = (value) => {\r\n  if(value === undefined){\r\n    return '';\r\n  } else {\r\n    return ' ' + value;\r\n  }\r\n}\r\n\r\nconst escapeId = (name) => {\r\n  return cleanString(name, {'?': '', '\"': \"\"});\r\n};\r\n\r\nconst escapeName = (name) => {\r\n  return  cleanString(name, {'\"': '\\\\'});\r\n};\r\n\r\nconst escapeLabel = (label) => {\r\n\r\n  // note: order matters; in practice order is retained in browsers but we may want to make an array\r\n  const mapObj = {\r\n        \"&\" : \"&amp;\",\r\n        \"<\" : \"&lt;\",\r\n        \">\" : \"&gt;\",\r\n        '\"' : '\\\\\"',\r\n        };\r\n\r\n  return cleanString(label, mapObj);\r\n\r\n}\r\n\r\nexport const svgDefs = `<defs>\r\n\r\n  <filter id=\"outershadow\" height=\"200%\" width=\"200%\" x=\"-75%\" y=\"-75%\" color-interpolation-filters=\"sRGB\">\r\n    <feMorphology operator=\"dilate\" radius=\"3\" in=\"SourceAlpha\" result=\"thicken\" />\r\n    <feGaussianBlur in=\"thicken\" stdDeviation=\"4\" result=\"blurred\" />\r\n    <feFlood flood-color=\"#336699\" result=\"glowColor\" />\r\n    <feComposite in=\"glowColor\" in2=\"blurred\" operator=\"in\" result=\"glowComposite\" />\r\n    <feMerge>\r\n      <feMergeNode in=\"glowComposite\"/>\r\n      <feMergeNode in=\"SourceGraphic\"/>\r\n    </feMerge>\r\n  </filter>\r\n</defs>`;\r\n\r\n","// @flow\r\nimport React, { Component } from 'react';\r\n\r\nimport svgPanZoom from  'svg-pan-zoom';\r\n\r\nimport Viz from 'viz.js';\r\nimport {generateDOT,svgDefs} from '../../utils/graphviz';\r\n\r\nimport './ModuleGraph.css';\r\n\r\nimport type { Module } from './types/Module';\r\nimport type { State } from './types/State';\r\n\r\ntype Props = {\r\n  module: Module,\r\n  onClick: (id:string) => mixed,\r\n  selectedState: State\r\n}\r\n\r\nclass ModuleGraph extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onPanZoom = this.onPanZoom.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n    this.onMouseDown = this.onMouseDown.bind(this);\r\n    this.bold = false;\r\n    this.lastDOT = '';\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.writeSVG(this.props.module)\r\n    this.mount.addEventListener('mouseup', this.onMouseUp);\r\n    this.mount.addEventListener('mousedown', this.onMouseDown);\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps: Props){\r\n\r\n    if(nextProps.module.name !== this.props.module.name){\r\n      this.panZoomSettings = null\r\n    }\r\n\r\n    this.writeSVG(nextProps.module, nextProps.selectedState, nextProps.selectedStateTransition);\r\n\r\n    if(nextProps.fullscreen !== this.props.fullscreen){\r\n      if(nextProps.fullscreen){\r\n        this.svgPanZoom.panBy({x: 250, y: 0});\r\n        this.customPanBy({x: -100, y: 0})\r\n      }else{\r\n        this.svgPanZoom.panBy({x: -250, y: 0});\r\n        this.customPanBy({x: 100, y: 0})\r\n      }\r\n    }\r\n\r\n    if(this.panZoomSettings){\r\n      this.blockPanZoomEvent = true\r\n      this.svgPanZoom.zoom(this.panZoomSettings.zoom, true);\r\n      this.svgPanZoom.pan(this.panZoomSettings.pan, true);\r\n      this.blockPanZoomEvent = false\r\n    }\r\n\r\n  }\r\n\r\n  customPanBy(amount) { // {x: 1, y: 2}\r\n    var animationTime = 300 // ms\r\n      , animationStepTime = 15 // one frame per 30 ms\r\n      , animationSteps = animationTime / animationStepTime\r\n      , animationStep = 0\r\n      , intervalID = null\r\n      , stepX = amount.x / animationSteps\r\n      , stepY = amount.y / animationSteps\r\n\r\n    intervalID = setInterval(() => {\r\n      if (animationStep++ < animationSteps) {\r\n        if(this.svgPanZoom){\r\n        this.svgPanZoom.panBy({x: stepX, y: stepY})\r\n        }\r\n      } else {\r\n        // Cancel interval\r\n        clearInterval(intervalID)\r\n      }\r\n    }, animationStepTime)\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n        <div ref={mount => this.mount = mount } className={'Module ' + (this.props.fullscreen ? \"Module-fullscreen\" : 'Module-standard-screen')}>\r\n         <svg width=\"50000px\" height=\"50000px\" xmlns=\"http://www.w3.org/2000/svg\" style={{opacity: .3}}>\r\n           <defs>\r\n            <pattern id=\"smallGrid\" width=\"10\" height=\"10\" patternUnits=\"userSpaceOnUse\">\r\n              <path d=\"M 10 0 L 0 0 0 10\" fill=\"none\" stroke=\"#95b4cf\" strokeWidth=\"0.5\"/>\r\n            </pattern>\r\n            <pattern id=\"grid\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\">\r\n              <rect width=\"100\" height=\"100\" fill=\"url(#smallGrid)\"/>\r\n              <path d=\"M 100 0 L 0 0 0 100\" fill=\"none\" stroke=\"#95b4cf\" strokeWidth=\"1\"/>\r\n            </pattern>\r\n          </defs>\r\n          <g>\r\n            <rect width=\"100%\" height=\"100%\" style={{\"transform\": \"translate(-50%, -50%)\"}} fill=\"url(#grid)\" />\r\n          </g>\r\n        </svg>\r\n        <div style={{\"position\":\"absolute\", \"top\": 0, \"left\": 0, \"width\": \"100%\", \"height\": '100%'}} className=\"Module-graph\">\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  onMouseUp(e) {\r\n    if(this.fireClickOnMouseUp){\r\n      this.props.onClick();\r\n    }\r\n  }\r\n  onMouseDown() {\r\n    this.fireClickOnMouseUp = true;\r\n  }\r\n\r\n  onPanZoom() {\r\n    if(this.blockPanZoomEvent) return;\r\n\r\n    this.fireClickOnMouseUp = false;\r\n    this.panZoomSettings = {pan: this.svgPanZoom.getPan(), zoom: this.svgPanZoom.getZoom()};\r\n\r\n    this.mount.children[0].children[1].setAttribute('transform', this.mount.children[1].children[0].children[1].attributes['transform'].value)\r\n\r\n    let linesShouldBold = Math.max(this.originalWidth, this.originalHeight) / this.svgPanZoom.getZoom() > 1500\r\n\r\n    if(linesShouldBold && !this.bold){\r\n      this.bold = true\r\n      this.mount.children[1].className = 'Module bold-lines'\r\n    } else if(!linesShouldBold && this.bold){\r\n      this.bold = false\r\n      this.mount.children[1].className = 'Module'\r\n    }\r\n\r\n  }\r\n\r\n  writeSVG(module: Module, selectedState: State, selectedStateTransition: Number){\r\n\r\n    const dot = generateDOT(module, selectedState, (selectedStateTransition: Number));\r\n    if(dot === this.lastDOT){\r\n      return;\r\n    }\r\n\r\n    this.lastDOT = dot;\r\n\r\n    /* write SVG */\r\n    try {\r\n      this.mount.children[1].innerHTML= Viz(dot).replace('</svg>', svgDefs + '</svg>');\r\n    } catch (ex) {\r\n      alert('Invalid module: ' + ex.message)\r\n      this.mount.children[1].innerHTML = `<svg width=\"10px\" height=\"10px\"/>`;\r\n    }\r\n\r\n    let svg = this.mount.children[1].children[0]\r\n\r\n    /* Add event handlers for states */\r\n    Object.keys(module.states).forEach( s => {\r\n      let el = document.getElementById(`node_${s.replace('?','')}`);     \r\n\r\n      if(el){\r\n        // force rerender because of a pan bug\r\n        el.addEventListener('mouseup', (e) => {this.lastDOT = null;e.stopPropagation(); this.props.onClick(s)});\r\n\r\n        if(selectedState && s === selectedState.name){\r\n          // assume path is at index 1 to speed things up.  bad assumption?\r\n          el.children[1].setAttribute('filter', 'url(#outershadow)')\r\n        } else {\r\n          el.children[1].removeAttribute('filter')\r\n        }\r\n      }\r\n\r\n    })\r\n\r\n    // Removes the title elmeent generated by graph viz that causes a \"G\" to always show on mouse hover\r\n    const unnecessaryGTitle = document.querySelector('svg > g > title');\r\n    if(unnecessaryGTitle){\r\n      unnecessaryGTitle.remove();\r\n    }\r\n\r\n    const unnecessaryFill = document.querySelector('svg > g > polygon');\r\n    if(unnecessaryFill){\r\n      unnecessaryFill.remove();\r\n    }\r\n\r\n    /* Add event handlers for transitions, and increase their 'hit box' size */\r\n    document.querySelectorAll('.edge.transition').forEach( group => {\r\n      let originator = group.querySelector('title').innerHTML.split('-&gt;')[0]\r\n      let hitLine = group.querySelector('path').cloneNode(true)\r\n      let transitionIndex = null;\r\n      let transitionIndexClass = group.className.baseVal.split(' ').find(t => t.startsWith('transition-index'));\r\n      if(transitionIndexClass){\r\n        try{\r\n          transitionIndex = parseInt(transitionIndexClass.split('_')[1])\r\n        } catch(e){\r\n          // just ignore if not a number\r\n        }\r\n\r\n      }\r\n      hitLine.setAttribute('class', 'transition-hitbox');\r\n      hitLine.setAttribute('stroke-width', 20)\r\n      hitLine.setAttribute('opacity', 0)\r\n      group.appendChild(hitLine)\r\n\r\n      group.querySelectorAll('path,text').forEach( path => {\r\n        // force rerender because of a pan bug\r\n        path.addEventListener('mouseup', (e) => {this.lastDOT = null;e.stopPropagation(); this.props.onClick(originator, transitionIndex)});\r\n      })\r\n    })\r\n\r\n    /* Bump the transition labels to the right because it is too crowded */\r\n    document.querySelectorAll('svg .edge text').forEach(t => t.setAttribute('x', parseFloat(t.getAttribute('x'))+5))\r\n\r\n    /* add pan/zoom if available */\r\n    if(typeof svgPanZoom === \"function\"){\r\n\r\n      this.originalWidth = svg.attributes.width.value.match(/\\d+/g).map(Number)[0];\r\n      this.originalHeight = svg.attributes.height.value.match(/\\d+/g).map(Number)[0];\r\n\r\n      let offsetLeft = this.mount.children[1].getBoundingClientRect().x\r\n      let offsetTop = this.mount.children[1].getBoundingClientRect().y\r\n      let visibleWidth = this.mount.children[1].getBoundingClientRect().width - offsetLeft;\r\n      let visibleHeight = this.mount.children[1].getBoundingClientRect().height - offsetTop;\r\n\r\n      this.mount.children[1].children[0].setAttribute('width', '100%')\r\n      this.mount.children[1].children[0].setAttribute('height', '100%')\r\n\r\n      let zoomFactor = 1\r\n\r\n      if(this.originalWidth / this.originalHeight > visibleWidth / visibleHeight){\r\n        //width constrained\r\n        zoomFactor = visibleWidth / this.originalWidth;\r\n      } else {\r\n        //height constrained\r\n        zoomFactor = visibleHeight / this.originalHeight;\r\n      }\r\n\r\n      this.svgPanZoom = svgPanZoom(this.mount.children[1].children[0],{\r\n          controlIconsEnabled: false, // BUGGY BECAUSE OF EVENT HANDLERS \r\n          minZoom: .1,\r\n          onPan: this.onPanZoom,\r\n          onZoom: this.onPanZoom,\r\n        });\r\n\r\n      let panZoomControlsElement = document.getElementById('svg-pan-zoom-controls');\r\n\r\n      if(panZoomControlsElement){\r\n        /* DISABLED BECAUSE BUGGY WITH OTHER EVENT HANDLERS */\r\n        panZoomControlsElement.setAttribute(\"transform\", `translate(${visibleWidth-100} ${visibleHeight-150}) scale(.75)`)\r\n        document.getElementById('svg-pan-zoom-zoom-in').addEventListener('mouseup', (e) => {this.svgPanZoom.zoomIn()});\r\n        document.getElementById('svg-pan-zoom-zoom-out').addEventListener('mouseup', (e) => {this.svgPanZoom.zoomOut()});\r\n        document.getElementById('svg-pan-zoom-reset-pan-zoom').addEventListener('mouseup', (e) => {\r\n          e.stopPropagation();\r\n          this.svgPanZoom.pan({x: this.svgPanZoom.getPan().x - offsetLeft/2 , y: 50}, true)\r\n          this.svgPanZoom.zoom(Math.pow(.8,zoomFactor), true);\r\n        });\r\n      }\r\n\r\n      if(!this.panZoomSettings){\r\n        /* first time load of module */\r\n        /* center and bump down a bit */\r\n        this.svgPanZoom.pan({x: this.svgPanZoom.getPan().x - offsetLeft/2 , y: 50}, true)\r\n        this.svgPanZoom.zoom(Math.pow(.8,zoomFactor), true);\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default ModuleGraph;\r\n","import React, {useMemo} from 'react';\r\nimport {useDropzone} from 'react-dropzone';\r\n\r\nconst baseStyle = {\r\n  flex: 1,\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  alignItems: 'center',\r\n  padding: '25px',\r\n  borderWidth: 2,\r\n  borderRadius: '5px',\r\n  marginBottom: '15px',\r\n  borderColor: '#666666',\r\n  borderStyle: 'dashed',\r\n  backgroundColor: '#ffffff',\r\n  outline: 'none',\r\n  transition: 'border .15s ease-in-out'\r\n};\r\n\r\nconst activeStyle = {\r\n  borderColor: '#336699',\r\n  backgroundColor: '#dceaef',\r\n  color: '#336699'\r\n};\r\n\r\nconst acceptStyle = {\r\n  borderColor: '#339999',\r\n  cursor: 'hand'\r\n};\r\n\r\nconst rejectStyle = {\r\n  borderColor: '#ff1744',\r\n  backgroundColor: '#ffeeee',\r\n  cursor: 'no-drop'\r\n};\r\n\r\nfunction StyledDropzone(props) {\r\n  const {\r\n    getRootProps,\r\n    getInputProps,\r\n    isDragActive,\r\n    isDragAccept,\r\n    isDragReject\r\n  } = useDropzone({accept: 'application/json',onDrop:props.onDrop});\r\n\r\n  const style = useMemo(() => ({\r\n    ...baseStyle,\r\n    ...(isDragActive ? activeStyle : {}),\r\n    ...(isDragAccept ? acceptStyle : {}),\r\n    ...(isDragReject ? rejectStyle : {})\r\n  }), [\r\n    isDragActive,\r\n    isDragReject\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"LoadModule-dropzone\">\r\n      <div {...getRootProps({style})}>\r\n        <input {...getInputProps()} />\r\n        <p>Drop files here or click to open saved modules.</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StyledDropzone;\r\n","import React, { Component } from 'react';\r\nimport './LoadModule.css';\r\nimport {generateDOT} from '../../utils/graphviz';\r\nimport StyledDropzone from './StyledDropZone';\r\n\r\nclass LoadModule extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {json: '', selectedOption: 'core'}\r\n  }\r\n\r\n  loadModule = (json) => {\r\n    try {\r\n      let module = JSON.parse(json)\r\n\r\n      if(module.name === undefined){\r\n        throw new Error('Module must have a name.')\r\n      }\r\n\r\n      if(module.states === undefined || Object.keys(module.states).length === 0){\r\n        throw new Error('Module must have at least one state.')\r\n      }\r\n\r\n      let tableMessage =  ''\r\n\r\n      // need to get the tables for any table transition\r\n      for (var key in module.states)\r\n      {\r\n        if (module.states[key].table_transition != null)\r\n        { \r\n          tableMessage += key.toString() + ' & '\r\n          \r\n          // put default data in for state of the table transition\r\n          module.states[key].table_transition.lookup_table_name_ModuleBuilder = module.states[key].table_transition.transitions[0].lookup_table_name;\r\n          module.states[key].table_transition.viewTable = false;    \r\n          module.states[key].table_transition.lookuptable = '';\r\n        }\r\n      }\r\n\r\n      if (tableMessage.length > 0)\r\n      {\r\n        tableMessage = tableMessage.substr(0, tableMessage.length - 2);\r\n        // make a pop-up to tell the user to enter the table data\r\n        alert('Table Transition must be filled out in Module Builder for ' + tableMessage)\r\n      }\r\n      // this will throw an error if the module is incomprehensible\r\n      let dot = generateDOT(module);\r\n\r\n      this.props.newModule(module)\r\n      this.setState({...this.state, json: '', selectedOption: 'core'})\r\n\r\n    } catch (ex) {\r\n      alert('Error creating module: ' + ex.message);\r\n    }\r\n\r\n  }\r\n\r\n  onClick = (key) => {\r\n    return () => {\r\n      this.setState({...this.state, json: '', selectedOption: 'core'})\r\n      this.props.push('#' + key);   \r\n    }\r\n  }\r\n\r\n  onDrop = (files) => {\r\n    files.forEach(file => {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = () => {\r\n        this.loadModule(reader.result);\r\n      };\r\n      reader.readAsText(file);\r\n    });\r\n  }\r\n\r\n  onLoadJSON = () => {\r\n    this.loadModule(this.state.json);\r\n  };\r\n\r\n  onOptionClick = (key) =>{\r\n    return () => {\r\n      this.setState({...this.state, selectedOption: key});\r\n    }\r\n  }\r\n\r\n  updateJson = (event) => {\r\n    this.setState({...this.state, json: event.target.value})\r\n  }\r\n\r\n  renderFooter = () => {\r\n    let loadButton = <span/>\r\n    if(this.state.selectedOption === 'json'){\r\n        loadButton = <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.onLoadJSON}>Load</button>\r\n    }\r\n    let closeButton = <span/>\r\n    if(!this.props.welcome){\r\n      closeButton = <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.props.onHide}>Close</button>\r\n    }\r\n\r\n    return <div className=\"modal-footer\" style={{height: 69}}>\r\n      {loadButton}\r\n      {closeButton}\r\n    </div>\r\n\r\n  }\r\n\r\n  renderDetails = () => {\r\n\r\n    switch(this.state.selectedOption){\r\n      case 'core':\r\n        return (\r\n          <ul className='LoadModule-list'>\r\n            { Object.keys(this.props.library).filter(n => (n.indexOf('/') === -1)).map( (key, index) => {\r\n              let module = this.props.library[key]\r\n              return (\r\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{module.name}</button></li>\r\n              )\r\n            })}\r\n          </ul>\r\n        )\r\n\r\n      case 'submodules':\r\n        return (\r\n          <ul className='LoadModule-list'>\r\n            { Object.keys(this.props.library).filter(n => (n.indexOf('/') > -1)).map( (key, index) => {\r\n              let module = this.props.library[key]\r\n              return (\r\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{key.split('/')[0] + ': ' + module.name}</button></li>\r\n              )\r\n            })}\r\n          </ul>\r\n        )\r\n\r\n      case 'my':\r\n        return (\r\n          <ul className='LoadModule-list'>\r\n            { Object.keys(this.props.modules).map( (key, index) => {\r\n              let module = this.props.modules[key]\r\n              return (\r\n                <li key={key}><button className='btn btn-link' onClick={this.onClick(key)}>{module.name} ({key})</button></li>\r\n              )\r\n            })}\r\n          </ul>\r\n        )\r\n\r\n\r\n      case 'json':\r\n        return (\r\n          <textarea id='loadJSON' value={this.state.json} onChange={this.updateJson}></textarea>\r\n        )\r\n\r\n      case 'git':\r\n        let moduleList = null;\r\n        let submoduleList = null;\r\n        if (this.state.Modules) {\r\n          moduleList = (\r\n          <div className='col-4 nopadding'>\r\n            <ul className='LoadModule-list'>\r\n              {this.state.Folders}\r\n              {this.state.Modules}\r\n            </ul>\r\n          </div>\r\n          )\r\n          if (this.state.Submodules) {\r\n            submoduleList = (\r\n              <div className='col-4 nopadding'>\r\n                <ul className='LoadModule-list'>\r\n                  {this.state.Submodules}\r\n                </ul>\r\n              </div>\r\n            )\r\n          }\r\n        }\r\n        return(\r\n        <div className='row'>  \r\n          <ul className='LoadModule-list'>\r\n            {this.state.Branches}  \r\n          </ul>\r\n          {moduleList}\r\n          {submoduleList}\r\n        </div>  \r\n        )\r\n\r\n    default:\r\n      return;\r\n\r\n    }\r\n  }\r\n\r\n  changeColor(ID, type) {\r\n    document.getElementById(ID).style.backgroundColor = \"#ddd\";\r\n    let list = null\r\n    switch(type) {\r\n      case 'branch':\r\n        list = this.state.Branches\r\n        break;\r\n      case 'module':\r\n        list = this.state.Modules\r\n        break;\r\n      case 'folder':\r\n        list = this.state.Folders\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    list.forEach((i) => {\r\n      if (i.props.id !== ID) {\r\n        document.getElementById(i.props.id).style.backgroundColor = \"#eee\";\r\n      }\r\n    }) \r\n  }\r\n  \r\n  fetchBranchList() {\r\n    fetch(`https://api.github.com/repos/synthetichealth/synthea/branches`)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      this.setState({\r\n        Branches: data.map((branch, i) => (\r\n          <li key={i} id={branch.name}><button className='btn btn-link' onClick={() => {this.changeColor(branch.name, 'branch');this.fetchModuleList(branch.name)}}>{branch.name}</button></li>\r\n        ))\r\n      })\r\n    })  \r\n    .catch(error => console.log('error: ', error)); \r\n  }\r\n\r\n  fetchModuleList(branch) {\r\n    this.setState({\r\n      currentBranch: branch\r\n    })\r\n    fetch(`https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules?ref=` + branch)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        let folders = data.filter(name => !name.name.includes(\".json\"))\r\n        let modules = data.filter(name => name.name.includes(\".json\"))\r\n        this.setState({\r\n        Folders: folders.map((name, i) => (\r\n          <li key={i} id={name.name}><button className='btn btn-link' onClick={() => {this.changeColor(name.name, 'folder');this.fetchModule(name.name)}}>{name.name}/</button></li>\r\n        )),\r\n        Modules: modules.map((name, i) => (\r\n          <li key={i} id={name.name}><button className='btn btn-link' onClick={() => {this.changeColor(name.name, 'module');this.fetchModule(name.name)}}>{name.name}</button></li>\r\n        ))\r\n        })\r\n      })  \r\n      .catch(error => console.log('error: ', error));\r\n  }\r\n\r\n  fetchModule(name) {\r\n    this.setState({\r\n      currentModule: name\r\n    })\r\n    if (name.includes(\".json\")) {\r\n      fetch(`https://raw.githubusercontent.com/synthetichealth/synthea/` + this.state.currentBranch + `/src/main/resources/modules/` + name)  \r\n        .then(response => response.text())\r\n        .then(data => this.loadModule(data))\r\n        .then(this.setState ({\r\n          Modules: null\r\n        }))\r\n        .catch(error => console.log('error: ', error));\r\n    } else {\r\n      fetch(`https://api.github.com/repos/synthetichealth/synthea/contents/src/main/resources/modules/` + name + `?ref=` + this.state.currentBranch)  \r\n      .then(response => response.json())\r\n      .then(data => this.setState({\r\n        Submodules: data.map((name, i) => (\r\n          <li key={i} id={name.name}><button className='btn btn-link' onClick={() => {this.fetchSubmodule(name.name)}}>{name.name}</button></li>\r\n        ))\r\n      }))\r\n      .catch(error => console.log('error: ', error));\r\n    }\r\n  }\r\n\r\n  fetchSubmodule(name) {\r\n    fetch(`https://raw.githubusercontent.com/synthetichealth/synthea/` + this.state.currentBranch + `/src/main/resources/modules/` + this.state.currentModule + `/` + name)  \r\n      .then(response => response.text())\r\n      .then(data => this.loadModule(data))\r\n      .then(this.setState ({\r\n        Submodules: null,\r\n        Modules: null\r\n      }))\r\n      .catch(error => console.log('error: ', error));\r\n  }    \r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.selectedOption === 'git' && prevState.selectedOption !== 'git') {\r\n      this.fetchBranchList()\r\n    }\r\n  }\r\n\r\n  renderWelcomeMessage = () => {\r\n    if(this.props.welcome){\r\n      return (<div>\r\n        Welcome to Synthea Module Builder.  Please visit the documentation first.\r\n        </div>)\r\n    }\r\n\r\n    return <div />\r\n  }\r\n\r\n  render() {\r\n\r\n    let classDetails = \" hide\", style = {display: 'none'}\r\n\r\n    if(this.props.visible){\r\n      classDetails = \" show\";\r\n      style = {display: 'block'}\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div className={'modal ' +  classDetails} style={style}>\r\n            <div className=\"modal-content\" style={{width:\"900px\", marginLeft: '15%', marginRight: '15%', marginTop: 50}}>\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">{(!this.props.welcome ? 'Load Module' : 'Synthea Module Builder')}</h5>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={this.props.onHide} style={{display: (this.props.welcome ? 'none' : '')}}>\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div className=\"modal-body LoadModule-body\">\r\n                <StyledDropzone onDrop={this.onDrop.bind(this)}/>\r\n                <div className='container'>\r\n                  <div className='row'>\r\n                    <div className='col-3 nopadding'>\r\n                      <ul className='LoadModule-options'>\r\n                         <li className={(this.state.selectedOption === 'core') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('core')}>Core Modules</button></li>\r\n                         <li className={(this.state.selectedOption === 'submodules') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('submodules')}>Submodules</button></li>\r\n                         {Object.keys(this.props.modules).length > 0 ? <li className={(this.state.selectedOption === 'my') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('my')}>My Modules</button></li> : ''}\r\n                         <li className={(this.state.selectedOption === 'json') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('json')}>Paste JSON</button></li>\r\n                         <li className={(this.state.selectedOption === 'git') ? 'selected' : ''}><button className='btn btn-link' onClick={this.onOptionClick('git')}>GitHub Modules</button></li>\r\n                      </ul>\r\n                    </div>\r\n                    <div className='col-9 nopadding'>\r\n                      {this.renderDetails()}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {this.renderFooter()}\r\n          </div>\r\n        </div>\r\n        <div className={`modal-backdrop ${classDetails}`} style={style}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LoadModule;\r\n","import React, { Component } from 'react';\r\nimport FileSaver from 'file-saver';\r\nimport _ from 'lodash'\r\n\r\nimport './Download.css';\r\n\r\nclass Download extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.onDownload = this.onDownload.bind(this)\r\n  }\r\n  \r\n  onDownload(){\r\n    let blob = new Blob([this.refs.codeInput.value], {\r\n       type: \"text/plain;charset=utf-8\"\r\n    });\r\n\r\n    this.downloadCsvs();\r\n\r\n    let filename = this.props.module.name.replace(/[^a-z0-9]/gi, '_').toLowerCase();\r\n\r\n    FileSaver.saveAs(blob, `${filename}.json`, true); // true = no BOM, see https://github.com/eligrey/FileSaver.js/issues/160\r\n  }\r\n\r\n  downloadCsvs(){\r\n    \r\n    let module = _.cloneDeep(this.props.module);\r\n\r\n    // Go through the states\r\n    Object.keys(module.states).map(k => module.states[k]).forEach( s => {\r\n\r\n      // find table transitions and download the tables\r\n      if (s.table_transition !== undefined){\r\n        this.downloadCsv(s.table_transition.lookup_table_name_ModuleBuilder, s.table_transition.lookuptable);\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  downloadCsv(filename, data){\r\n      // the \\n are getting encoded to \\ + n. replace that with a line break\r\n      data = encodeURIComponent(data);\r\n      data = data.replace(/%5Cn/g, \"%0D%0A\"); \r\n\r\n      \r\n      var element = document.createElement('a');   \r\n      element.style.display = 'none';   \r\n      element.setAttribute('href', 'data:text/csv;charset=utf-8,' + data);\r\n      element.setAttribute('download', filename);\r\n      document.body.appendChild(element);\r\n      element.click();\r\n      document.body.removeChild(element);\r\n  }\r\n\r\n  prepareJSON(){\r\n    let module = _.cloneDeep(this.props.module);\r\n\r\n    // We currently save name in the state for convenience\r\n    // In lieu of a better solution, we will just remove it here\r\n    Object.keys(module.states).map(k => module.states[k]).forEach( s => {\r\n      if(s['name'] !== undefined){\r\n        delete s.name;\r\n      }\r\n\r\n      // find table transitions and delete state data\r\n      if (s.table_transition !== undefined){\r\n        let name = s.table_transition.lookup_table_name_ModuleBuilder;\r\n        s.table_transition.transitions.forEach( t => \r\n          {\r\n            t.lookup_table_name = name;\r\n          })\r\n        delete s.table_transition.lookup_table_name_ModuleBuilder;\r\n        delete s.table_transition.lookuptable;\r\n        delete s.table_transition.viewTable;\r\n      }\r\n\r\n    })\r\n\r\n    return JSON.stringify(module, null, 2)\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    let classDetails = \"hide\", style = {display: 'none'}\r\n\r\n    if(this.props.visible){\r\n      classDetails = \"show\";\r\n      style = {display: 'block'}\r\n    }\r\n\r\n    return (\r\n      <div className='Download'>\r\n        <div className={`modal ${classDetails}`} style={style}>\r\n          <div className=\"modal-dialog modal-lg\" role=\"document\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Download Module</h5>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={this.props.onHide}>\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div className=\"modal-body Download-body\">\r\n              <textarea ref=\"codeInput\" disabled value={this.prepareJSON()} />\r\n              </div>\r\n              <div className=\"modal-footer\">\r\n                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.onDownload}>Download</button>\r\n                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" onClick={this.props.onHide}>Close</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`modal-backdrop ${classDetails}`} style={style}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Download;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\n\r\nimport './NavTabs.css';\r\n\r\nimport type { Module } from './types/Module';\r\n\r\nimport CancelButton from './cancel-button.png';\r\n\r\ntype Props = {\r\n  modules: Module[],\r\n  selectedModuleKey: string,\r\n  onChange: any\r\n}\r\n\r\n\r\nclass NavTabs extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  onClick = (selectedModuleKey) => {\r\n    if(selectedModuleKey === this.props.selectedModuleKey){\r\n      return () => {}\r\n    }\r\n\r\n    return () => this.props.onChangeModule(selectedModuleKey);\r\n  }\r\n\r\n  onClose = (selectedModuleKey) => {\r\n    return () => this.props.onCloseModule(selectedModuleKey);\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className='NavTabs'>\r\n        <ul>\r\n         {\r\n           Object.keys(this.props.modules).map( m => {\r\n             return (<li key={m} className={(m === this.props.selectedModuleKey ? 'NavTabs-active' : '')} ><button onClick={this.onClick(m)}>\r\n                 {/*this.props.modules[m].name*/}\r\n                 {m}.json\r\n               </button>\r\n              <img className=\"NavTabs-close\" src={CancelButton} onClick={this.onClose(m)} alt=\"Close\"/>\r\n             </li>\r\n             )})\r\n           }\r\n         </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NavTabs;\r\n","// @flow\r\nimport uuid from 'uuid-js';\r\n\r\nimport type { Module } from '../types/Module';\r\nimport type { State } from '../types/State';\r\nimport type { DirectTransition, DistributedTransition, ConditionalTransition, ComplexTransition, TableTransition, Transition } from '../types/Transition';\r\n\r\nexport function extractModule(data: any): Module {\r\n  let name = extractName(data);\r\n  let states = extractStates(data);\r\n  let remarks = extractRemarks(data);\r\n  return {name, states, remarks};\r\n}\r\n\r\nexport function extractStates(data: any): State[] {\r\n  if(!data){\r\n      return []\r\n  }\r\n  let stateNames = Object.keys(data.states);\r\n  return stateNames.map((name) => {\r\n    return extractState(name, data.states[name]);\r\n  })\r\n}\r\n\r\nexport function extractState(name: string, state: any): State {\r\n  let transition = extractTransition(state);\r\n  let id = uuid.create().toString();\r\n  let type = state.type;\r\n  return {name, transition, id, type, ...state};\r\n}\r\n\r\nexport function extractTransition(state: any): ?Transition {\r\n  if(state.direct_transition) {\r\n    return extractDirectTransition(state.direct_transition);\r\n  }\r\n  if(state.distributed_transition) {\r\n    return extractDistributedTransition(state.distributed_transition);\r\n  }\r\n  if(state.conditional_transition) {\r\n    return extractConditionalTransition(state.conditional_transition);\r\n  }\r\n  if(state.complex_transition) {\r\n    return extractComplexTransition(state.complex_transition);\r\n  }\r\n  if(state.table_transition) {\r\n    return extractTableTransition(state.table_transition);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function extractDirectTransition(data: any): DirectTransition {\r\n  return {to: data, type: 'Direct'}\r\n}\r\n\r\nexport function extractDistributedTransition(data: any): DistributedTransition {\r\n  let transition = data.map((d) => {\r\n    return {distribution: d.distribution, to: d.transition};\r\n  });\r\n  return {type: 'Distributed', transition};\r\n}\r\n\r\nexport function extractConditionalTransition(data: any): ConditionalTransition {\r\n  let transition = data.map((d) => {\r\n    return {condition: d.condition, to: d.transition};\r\n  });\r\n  return {type: 'Conditional', transition};\r\n}\r\n\r\nexport function extractComplexTransition(data: any): ComplexTransition {\r\n  let transition = data.map((c) => {\r\n    return {\r\n      condition: c.condition,\r\n      distributions: extractDistributedTransition(c.distributions||[]).transition,\r\n      transition: extractDirectTransition(c.transition)\r\n    }\r\n  })\r\n  return {type: 'Complex', transition};\r\n}\r\n\r\nexport function extractTableTransition(data: any): TableTransition {\r\n  let transition = data.transitions.map((d) => {\r\n    return {\r\n      default_probability: d.default_probability, \r\n      transition: d.transition,\r\n      lookup_table_name: d.lookup_table_name,\r\n    };\r\n  });\r\n  return { \r\n    type: 'Table', \r\n    lookuptable: data.lookuptable, \r\n    viewTable: data.viewTable,\r\n    lookup_table_name_ModuleBuilder: data.lookup_table_name_ModuleBuilder, \r\n    transition \r\n  };\r\n}\r\n\r\nexport function extractRemarks(data: any):string[] {\r\n  return (data.remarks :string[]);\r\n}\r\n\r\nexport function extractName(data: any): string {\r\n  return (data.name: string);\r\n}\r\n\r\nexport function extractAttributes(module: Module): string[] {\r\n  let attributes = Object.keys(module.states).filter((key) => {\r\n    return module.states[key].type === 'SetAttribute' || module.states[key].type === 'Counter';\r\n  }).map(key => (module.states[key].attribute))\r\n\r\n  attributes = attributes.concat(Object.keys(module.states).filter((key) => {\r\n    return !!module.states[key].assign_to_attribute\r\n  }).map(key => (module.states[key].assign_to_attribute)))\r\n\r\n\r\n  return [...new Set(attributes)]\r\n\r\n}\r\n","\r\nexport function findAvailableKey(root, keys){\r\n  // eslint-disable-next-line no-sequences\r\n  let keys_index = keys.reduce((r, i) => (r[i] = true, r), {})\r\n\r\n  let next = root;\r\n  let index = 1;\r\n\r\n  // check if this pattern already exists, so we don't chain key_2_2_2 etc\r\n  let endsInNumber = /_(\\d+)$/g;\r\n  let matches = endsInNumber.exec(root);\r\n  if(matches && matches.length > 1){\r\n    index = parseInt(matches[1]);\r\n    root = next = next.replace(matches[0], \"\");\r\n  }\r\n\r\n  while(keys_index[next]){\r\n    index++;\r\n    next = root + \"_\" + index;\r\n  }\r\n\r\n  return next;\r\n}\r\n\r\nexport function createSafeKeyFromName(name){\r\n  return name.replace(/[^A-Z0-9]/ig, \"_\");\r\n}\r\n","export default { \"example_module\": \r\n    {\r\n      \"name\": \"Examplitis\",\r\n      \"remarks\": [\r\n        \"Examplitis is a painful condition that affects only males. Most patients \",\r\n        \"can be cured with Examplitol or an Examplotomy but some never recover.\"\r\n      ],\r\n      \"states\": {\r\n\r\n        \"Initial\": {\r\n          \"type\": \"Initial\",\r\n          \"conditional_transition\": [\r\n            {\r\n              \"condition\": {\r\n                \"condition_type\": \"Gender\",\r\n                \"gender\": \"M\"\r\n              },\r\n              \"transition\": \"Age_Guard\"\r\n            },\r\n            {\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Age_Guard\": {\r\n          \"type\": \"Guard\",\r\n          \"allow\": {\r\n            \"condition_type\": \"Age\",\r\n            \"operator\": \">\",\r\n            \"quantity\": 40,\r\n            \"unit\": \"years\"\r\n          },\r\n          \"distributed_transition\": [\r\n            {\r\n              \"distribution\": 0.10,\r\n              \"transition\": \"Pre_Examplitis\"\r\n            },\r\n            {\r\n              \"distribution\": 0.90,\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Pre_Examplitis\": {\r\n          \"type\": \"Delay\",\r\n          \"range\": {\r\n            \"low\": 0,\r\n            \"high\": 10,\r\n            \"unit\": \"years\"\r\n          },\r\n          \"direct_transition\": \"Examplitis\"\r\n        },\r\n\r\n        \"Examplitis\": {\r\n          \"type\": \"ConditionOnset\",\r\n          \"target_encounter\": \"Wellness_Encounter\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"123\",\r\n              \"display\": \"Examplitis\"\r\n            }\r\n          ],\r\n          \"direct_transition\": \"Wellness_Encounter\"\r\n        },\r\n\r\n        \"Wellness_Encounter\": {\r\n          \"type\": \"Encounter\",\r\n          \"wellness\": true,\r\n          \"direct_transition\": \"Examplitol\"\r\n        },\r\n\r\n        \"Examplitol\": {\r\n          \"type\": \"MedicationOrder\",\r\n          \"reason\": \"Examplitis\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"RxNorm\",\r\n              \"code\": \"456\",\r\n              \"display\": \"Examplitol\"\r\n            }\r\n          ],\r\n          \"distributed_transition\": [\r\n            {\r\n              \"distribution\": 0.2,\r\n              \"transition\": \"Pre_Examplotomy\"\r\n            },\r\n            {\r\n              \"distribution\": 0.1,\r\n              \"transition\": \"Last_Days\"\r\n            },\r\n            {\r\n              \"distribution\": 0.7,\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Pre_Examplotomy\": {\r\n          \"type\": \"Delay\",\r\n          \"range\": {\r\n            \"low\": 18,\r\n            \"high\": 36,\r\n            \"unit\": \"months\"\r\n          },\r\n          \"direct_transition\": \"Examplotomy_Encounter\"\r\n        },\r\n\r\n        \"Examplotomy_Encounter\": {\r\n          \"type\": \"Encounter\",\r\n          \"encounter_class\": \"ambulatory\",\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"ABC\",\r\n              \"display\": \"Examplotomy Encounter\"\r\n            }\r\n          ],\r\n          \"direct_transition\": \"Examplotomy\"\r\n        },\r\n\r\n        \"Examplotomy\": {\r\n          \"type\": \"Procedure\",\r\n          \"duration\": {\r\n            \"low\": 2,\r\n            \"high\": 3,\r\n            \"unit\": \"hours\"\r\n          },\r\n          \"codes\": [\r\n            {\r\n              \"system\": \"SNOMED-CT\",\r\n              \"code\": \"789\",\r\n              \"display\": \"Examplotomy\"\r\n            }\r\n          ],\r\n          \"reason\": \"Examplitis\",\r\n          \"direct_transition\": \"End_Examplotomy_Encounter\"\r\n        },\r\n\r\n        \"End_Examplotomy_Encounter\": {\r\n            \"type\": \"EncounterEnd\",\r\n            \"distributed_transition\": [\r\n            {\r\n              \"distribution\": 0.1,\r\n              \"transition\": \"Death\"\r\n            },\r\n            {\r\n              \"distribution\": 0.9,\r\n              \"transition\": \"Terminal\"\r\n            }\r\n          ]\r\n        },\r\n\r\n        \"Last_Days\": {\r\n          \"type\": \"Delay\",\r\n          \"range\": {\r\n              \"low\": 8,\r\n              \"high\": 20,\r\n              \"unit\": \"years\"\r\n          },\r\n          \"direct_transition\": \"Death\"\r\n        },\r\n\r\n        \"Death\": {\r\n          \"type\": \"Death\",\r\n          \"direct_transition\": \"Terminal\"\r\n        },\r\n\r\n        \"Terminal\": {\r\n          \"type\": \"Terminal\"\r\n        }\r\n      }\r\n    }\r\n}\r\n","// @flow\r\nimport React, { Component } from 'react';\r\n\r\nimport './JsonEditor.css';\r\nimport { JsonEditor as Editor } from 'jsoneditor-react';\r\nimport 'jsoneditor-react/es/editor.min.css';\r\nimport ace from 'brace';\r\nimport 'brace/mode/json';\r\nimport {generateDOT} from '../../utils/graphviz';\r\n\r\nimport type { Module } from './types/Module';\r\n\r\ntype Props = {\r\n  module: Module,\r\n  onChange: mixed\r\n}\r\n\r\nclass JsonEditor extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  onChange(module) {\r\n    \r\n    if(this.clearTimeout){\r\n      clearTimeout(this.clearTimeout);\r\n    }\r\n\r\n    this.clearTimeout = setTimeout(()=>{\r\n\r\n      try {\r\n        let dot = generateDOT(module);\r\n\r\n        this.props.onChange(module)\r\n\r\n      } catch (ex) {\r\n        // currently silently fails on this\r\n        // alert('Error creating module: ' + ex.message);\r\n      }\r\n\r\n    }, 1000) // wait a second for user to complete changes\r\n  }\r\n\r\n\r\n  render() {\r\n    if(this.props.refreshCodeFlag){\r\n      return <div/>\r\n    }\r\n    return (\r\n      <div className='JsonEditor'>\r\n        <Editor\r\n          value={this.props.module}\r\n          mode='code'\r\n          ace={ace}\r\n          onChange={this.onChange}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default JsonEditor;;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './StateList.css';\r\nimport CancelButton from './cancel-button.png';\r\n\r\ntype Props = {\r\n  states: State[],\r\n  selectedState: State,\r\n  onChange: any,\r\n}\r\n\r\nclass StateList extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {search: ''};\r\n  }\r\n\r\n  onClick(state) {\r\n    return () => { this.props.onClick(state.name)}\r\n  }\r\n\r\n  onChange(event){\r\n    this.setState({search: event.target.value});\r\n  }\r\n\r\n  clearSearch(){\r\n    this.setState({search: ''})\r\n  }\r\n\r\n  stateFilter(state){\r\n    return state.name.toLowerCase().includes(this.state.search.toLowerCase()) || \r\n           state.type.toLowerCase().includes(this.state.search.toLowerCase());\r\n  }\r\n\r\n  render() {\r\n    return (<div className='StateList'>\r\n          <div className='Editor-panel-title'> \r\n             State List\r\n          </div>\r\n          <div className=\"btn-group\">\r\n            <input type=\"text\" className=\"form-control\" placeholder=\"Find\" value={this.state.search} onChange={this.onChange.bind(this)}/>\r\n            <img className=\"search-clear\" src={CancelButton} onClick={this.clearSearch.bind(this)}/>\r\n          </div>\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">State</th>\r\n                  <th scope=\"col\">Type</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n              {this.props.states.filter(this.stateFilter.bind(this)).map((state,i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(state)} className={this.props.selectedState && (state.name === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{state.name}</th>\r\n                    <td>{state.type}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default StateList;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './AttributeList.css';\r\nimport CancelButton from './cancel-button.png';\r\n\r\ntype Props = {\r\n  states: State[],\r\n  modules: Module[],\r\n  selectedState: State,\r\n  onChange: any,\r\n}\r\n\r\nclass AttributeList extends Component<Props> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {search: ''};\r\n  }\r\n\r\n  onClick(attribute) {\r\n    return () => { this.props.onClick(attribute.stateName)}\r\n  }\r\n\r\n  onChange(event){\r\n    this.setState({search: event.target.value});\r\n  }\r\n\r\n  clearSearch(){\r\n    this.setState({search: ''})\r\n  }\r\n\r\n  attributeFilter(attribute){\r\n    return attribute.attribute.toLowerCase().includes(this.state.search.toLowerCase()) || \r\n           attribute.stateName.toLowerCase().includes(this.state.search.toLowerCase());\r\n  }\r\n\r\n  render() {\r\n    return (<div className='AttributeList'>\r\n          <div className='Editor-panel-title'> \r\n             Attribute List\r\n          </div>\r\n\r\n          <div className=\"btn-group\">\r\n            <input type=\"text\" className=\"form-control\" placeholder=\"Find\" value={this.state.search} onChange={this.onChange.bind(this)}/>\r\n            <img className=\"search-clear\" src={CancelButton} onClick={this.clearSearch.bind(this)}/>\r\n          </div>\r\n          <div>\r\n            Note: This currently only displays attributes being written in this module.  It does not include referenced attributes\r\n            or attributes written in other modules.\r\n          </div>\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">Attribute</th>\r\n                  <th scope=\"col\">State</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n              {this.props.attributes.filter(this.attributeFilter.bind(this)).map((attribute, i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(attribute)} className={this.props.selectedState && (attribute.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{attribute.attribute}</th>\r\n                    <td>{attribute.stateName}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default AttributeList;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './WarningList.css';\r\n\r\ntype Props = {\r\n  warnings: mixed,\r\n  selectedState: State\r\n}\r\n\r\nclass WarningList extends Component<Props> {\r\n\r\n  onClick(warning) {\r\n    return () => { this.props.onClick(warning.stateName)}\r\n  }\r\n\r\n  render() {\r\n    return (<div className='WarningList'>\r\n          <div className='Editor-panel-title'> \r\n            Warnings\r\n          </div>\r\n\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">Warning</th>\r\n                  <th scope=\"col\">State</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n       \r\n              {this.props.warnings.map( (warning, i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(warning)} className={this.props.selectedState && (warning.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{warning.message}</th>\r\n                    <td>{warning.stateName}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default WarningList;\r\n","// @flow\r\nimport React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nimport './RelatedList.css';\r\n\r\ntype Props = {\r\n  related: mixed,\r\n  selectedState: State\r\n}\r\n\r\nclass RelatedList extends Component<Props> {\r\n\r\n  onClick(related) {\r\n    return () => { this.props.onClick(related.stateName)}\r\n  }\r\n\r\n  render() {\r\n    return (<div className='RelatedList'>\r\n          <div className='Editor-panel-title'> \r\n            Related Modules\r\n          </div>\r\n\r\n          <div>\r\n            This currently only displays relationships based on submodules.  Additional relationships are in progress.\r\n          </div>\r\n\r\n          <table className=\"table table-sm table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th scope=\"col\">Type</th>\r\n                  <th scope=\"col\">Module</th>\r\n                  <th scope=\"col\">State</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n       \r\n              {this.props.related.map( (related, i) => {\r\n                return (\r\n                  <tr key={i} onClick={this.onClick(related)} className={this.props.selectedState && (related.stateName === this.props.selectedState.name) ? \"table-info\" : \"\"}>\r\n                    <th scope=\"row\">{related.type}</th>\r\n                    <td>{related.moduleKey}</td>\r\n                    <td>{related.stateName}</td>\r\n                  </tr>\r\n                )\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>)\r\n  }\r\n}\r\n\r\nexport default RelatedList;\r\n","export const analyze = (moduleKey, module) => {\r\n  return ({\r\n    type: 'ANALYZE',\r\n    data: {moduleKey, module}\r\n  })\r\n}\r\n","import {analyze} from  './analysis';\r\nimport { push } from 'connected-react-router'\r\n\r\nconst dispatchThenAnalyze = (action) => {\r\n  return (dispatch, getState) => {\r\n    dispatch(action);\r\n    let moduleKey = getState().editor.selectedModuleKey;\r\n    let module = getState().editor.modules[moduleKey];\r\n    if(module){\r\n      dispatch(analyze(moduleKey, module));\r\n    }\r\n\r\n    // refresh the editor if the change didn't originate from the editor\r\n    if(action.type !== 'JSON_EDIT'){\r\n      dispatch(refreshCode())\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport const selectNode = (key, transitionIndex) => {\r\n  return ({\r\n    type: 'SELECT_NODE',\r\n    data: {key, transitionIndex}\r\n  })\r\n}\r\n\r\nexport const addNode = (currentModuleKey, stateKey, state, selectedState, selectedStateTransition) => {\r\n   return dispatchThenAnalyze({\r\n    type: 'ADD_NODE',\r\n    data: {currentModuleKey, stateKey, state, selectedState, selectedStateTransition}\r\n  })\r\n}\r\n\r\nexport const addStructure = (currentModuleKey, structureName) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'ADD_STRUCTURE',\r\n    data: {currentModuleKey, structureName}\r\n  });\r\n}\r\n\r\nexport const addTransition = (currentModuleKey, nodeName, transitionType) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'ADD_TRANSITION',\r\n    data: {currentModuleKey, nodeName, transitionType}\r\n  });\r\n}\r\n\r\nexport const editNode = (update, path) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'EDIT_NODE',\r\n    data: {\r\n      update,\r\n      path\r\n    }\r\n  })\r\n}\r\n\r\nexport const renameNode = (targetModuleKey, targetNode, newName) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'RENAME_NODE',\r\n    data:{\r\n      targetModuleKey,\r\n      targetNode,\r\n      newName\r\n    }\r\n  })\r\n}\r\n\r\nexport const copyNode = (targetModuleKey, targetNode, newName) => {\r\n  return {\r\n    type: 'COPY_NODE',\r\n    data:{\r\n      targetModuleKey,\r\n      targetNode\r\n    }\r\n  }\r\n}\r\n\r\nexport const jsonEdit = (module) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'JSON_EDIT',\r\n    data: {module}\r\n  })\r\n}\r\n\r\nexport const closeModule = (selectedModuleKey) => {\r\n\r\n  return (dispatch, getState) => {\r\n\r\n    if(Object.keys(getState().editor.modules).length > 1){\r\n      if(Object.keys(getState().editor.modules)[0] === selectedModuleKey){\r\n        dispatch(push('#' + Object.keys(getState().editor.modules)[1])); // handling case where first is the one we already have open\r\n      }else {\r\n        dispatch(push('#' + Object.keys(getState().editor.modules)[0]));\r\n      }\r\n    } else {\r\n      dispatch({type: 'OPEN_MODULE', data: {}}); // open nothing to force welcome screen\r\n      dispatch(push('#'));\r\n    }\r\n\r\n\r\n    return dispatch({type: 'CLOSE_MODULE', data: {selectedModuleKey}});\r\n\r\n  }\r\n}\r\n\r\nexport const newModule = (key, module) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'NEW_MODULE',\r\n    data: {key, module}\r\n  })\r\n}\r\n\r\nexport const editModuleName = (targetModuleKey, newName) => {\r\n  return ({\r\n    type: 'EDIT_MODULE_NAME',\r\n    data: {\r\n      newName,\r\n      targetModuleKey\r\n    }\r\n  })\r\n}\r\n\r\nexport const editModuleRemarks = (targetModuleKey, newRemarks) => {\r\n  return ({\r\n    type: 'EDIT_MODULE_REMARKS',\r\n    data: {\r\n      newRemarks,\r\n      targetModuleKey\r\n    }\r\n  })\r\n}\r\n\r\nexport const changeStateType = (targetModuleKey, targetNode, newType) => {\r\n  return dispatchThenAnalyze({\r\n    type: 'CHANGE_STATE_TYPE',\r\n    data:{\r\n      targetModuleKey,\r\n      targetNode,\r\n      newType\r\n    }\r\n  })\r\n}\r\n\r\nexport const undo = () => {\r\n  return dispatchThenAnalyze({\r\n    type: 'UNDO'\r\n  })\r\n}\r\n\r\nexport const redo = () => {\r\n  return dispatchThenAnalyze({\r\n    type: 'REDO'\r\n  })\r\n}\r\n\r\nexport const showLoadModule = () => {\r\n  return ({\r\n    type: 'SHOW_LOAD_MODULE'\r\n  })\r\n}\r\n\r\nexport const hideLoadModule = () => {\r\n  return ({\r\n    type: 'HIDE_LOAD_MODULE'\r\n  })\r\n}\r\n\r\nexport const showDownload = () => {\r\n  return ({\r\n    type: 'SHOW_DOWNLOAD'\r\n  })\r\n}\r\n\r\nexport const hideDownload = () => {\r\n  return ({\r\n    type: 'HIDE_DOWNLOAD',\r\n  })\r\n}\r\n\r\n\r\nexport const changeModulePanel = (targetPanel) => {\r\n  return ({\r\n    type: 'CHANGE_MODULE_PANEL',\r\n    data:{\r\n      targetPanel\r\n    }\r\n  })\r\n}\r\n\r\nexport const refreshCode = () => {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: 'REFRESH_CODE_FLAG',\r\n      data:{\r\n        flag: true\r\n      }\r\n    })\r\n\r\n    setTimeout(() => {dispatch({\r\n      type: 'REFRESH_CODE_FLAG',\r\n      data:{\r\n        flag: false\r\n      }\r\n    })}, 250)\r\n\r\n\r\n  }\r\n}\r\n\r\n","import {analyze} from  './analysis';\r\n\r\nexport const openModule = (key) => {\r\n\r\n  return (dispatch, getState) => {\r\n    let action = {type: 'OPEN_MODULE', data: {key}};\r\n\r\n    if(!getState().editor.modules[key] && getState().library.modules[key]){\r\n      action.data.libraryModule = getState().library.modules[key];\r\n    }\r\n\r\n    dispatch(action);\r\n    if(getState().editor.modules[key]){\r\n      dispatch(analyze(key, getState().editor.modules[key]));\r\n    }\r\n  }\r\n}\r\n","import { openModule } from './router'\r\n\r\nexport const loadLibrary = (modules) => {\r\n  return (dispatch, getState) => {\r\n\r\n    dispatch ({\r\n      type: 'LOAD_LIBRARY',\r\n      data: modules\r\n    })\r\n\r\n    if(getState().router.location.hash.charAt(0) === '#'){\r\n      dispatch(openModule(getState().router.location.hash.slice(1)));\r\n    }\r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { push } from 'connected-react-router'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport Joyride from 'react-joyride'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport Draggable from 'react-draggable'\r\n\r\nimport StateEditor from '../components/editor/State';\r\nimport ModulePropertiesEditor from '../components/editor/ModuleProperties';\r\nimport ModuleGraph from '../components/graph/ModuleGraph';\r\nimport LoadModule from '../components/menu/LoadModule';\r\nimport Download from '../components/menu/Download';\r\nimport NavTabs from '../components/editor/NavTabs';\r\nimport { extractStates } from '../transforms/Module';\r\nimport {cleanString } from '../utils/stringUtils';\r\n\r\nimport { findAvailableKey, createSafeKeyFromName } from '../utils/keys';\r\nimport { getTemplate } from '../templates/Templates';\r\nimport { BasicTutorial } from '../templates/Tutorial';\r\n\r\nimport { RIEInput } from 'riek';\r\n\r\nimport examplitis from '../data/example_module'\r\n\r\nimport './Editor.css';\r\n\r\nimport JsonEditor from '../components/editor/JsonEditor';\r\n\r\nimport StateList from '../components/analysis/StateList';\r\nimport AttributeList from '../components/analysis/AttributeList';\r\nimport WarningList from '../components/analysis/WarningList';\r\nimport RelatedList from '../components/analysis/RelatedList';\r\n\r\nimport LoadingLogo from './synthea-animated-logo.svg'\r\n// import SyntheaLogo from './synthea-logo-dark-glow.png'\r\nimport SyntheaLogo from './synthea-logo.png'\r\nimport MinimizePanel from './minimize-panel.png'\r\nimport FullscreenButton from './fullscreen.png'\r\nimport InfoButton from './Info.png'\r\nimport StateButton from './state-button.png'\r\nimport StateListButton from './statelist.png'\r\nimport CodeButton from './code-button.png'\r\nimport AttributeButton from './attribute-button.png'\r\nimport RelatedButton from './related-button.png'\r\nimport WarningButton from './warning-button.png'\r\n\r\nimport {selectNode,\r\n        addNode,\r\n        addStructure,\r\n        addTransition,\r\n        editNode,\r\n        renameNode,\r\n        copyNode,\r\n        newModule,\r\n        jsonEdit,\r\n        showLoadModule,\r\n        hideLoadModule,\r\n        showDownload,\r\n        hideDownload,\r\n        refreshCode,\r\n        changeStateType,\r\n        editModuleName,\r\n        editModuleRemarks,\r\n        closeModule,\r\n        undo,\r\n        redo,\r\n        changeModulePanel} from '../actions/editor';\r\n\r\nimport {loadLibrary} from '../actions/library';\r\n\r\nclass Editor extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.originalPanelWidth = 500;\r\n    this.state = {\r\n      joyride: {\r\n        run: false,\r\n        steps: BasicTutorial,\r\n        stepIndex: 0\r\n      },\r\n      panelWidth: this.originalPanelWidth,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    import(\"../data/modules\").then(modules => {\r\n      this.props.loadLibrary({...examplitis, ...modules.default});\r\n\r\n      // see https://github.com/wwayne/react-tooltip/issues/40\r\n      setTimeout(() => {\r\n       ReactTooltip.rebuild();\r\n      }, 1000)\r\n    });\r\n\r\n  }\r\n\r\n  /*\r\n    This is a recursive function to track the path that an edit action took through the Inspector\r\n    It was written this way because there's multiple ways that one could get to, say, a Conditional Editor\r\n    By keeping track of where it's been it means that the action can just look into the modules along the path\r\n  */\r\n  onChange  = (update, path=[]) => {\r\n    if(typeof update !== 'object') {\r\n      return (val) => this.onChange(val, [].concat(path, [update]))\r\n    }\r\n    this.props.editNode(update, path)\r\n  }\r\n\r\n  renameNode = (targetModuleKey, targetNode) => {\r\n    return (newName) => {\r\n      newName.name = cleanString(newName.name, {'.': '', '\\\\': '', '|': ''});\r\n      this.props.renameNode(targetModuleKey, targetNode, newName);\r\n    }\r\n  }\r\n\r\n  copyNode = (targetModuleKey, targetNode) => {\r\n    return () => {\r\n      this.props.copyNode(targetModuleKey, targetNode);\r\n    }\r\n  }\r\n\r\n  pasteNode = (selectedModuleKey, takenKeys, selectedState, selectedStateTransition) => {\r\n    return () => {\r\n      let key = findAvailableKey(createSafeKeyFromName(this.props.clipboard.name), takenKeys);\r\n      let newState = _.cloneDeep(this.props.clipboard);\r\n      this.props.addNode(selectedModuleKey, key, newState, selectedState, selectedStateTransition);\r\n    }\r\n  }\r\n  \r\n  changeStateType = (targetModuleKey, targetNode) => {\r\n    return (newType) => {\r\n      this.props.changeStateType(targetModuleKey, targetNode, newType);\r\n    }\r\n  }\r\n\r\n  addTransition = (targetModuleKey, targetNode) => {\r\n    return (transitionType) => {\r\n      this.props.addTransition(targetModuleKey, targetNode, transitionType)\r\n    }\r\n  }\r\n\r\n  newModule = (takenKeys) => {\r\n    return (module = getTemplate('Module.Blank')) => {\r\n      let key = findAvailableKey(createSafeKeyFromName(module.name), takenKeys);\r\n      this.props.newModule(key, module);\r\n      this.props.push('#' + key)\r\n    }\r\n  }\r\n\r\n  addNode = (selectedModuleKey, takenKeys, selectedState, selectedStateTransition) => {\r\n    return () => {\r\n      let key = findAvailableKey(createSafeKeyFromName('New State'), takenKeys);\r\n      let newState = {...getTemplate('State.Simple'), direct_transition: key };\r\n      this.props.addNode(selectedModuleKey, key, newState, selectedState, selectedStateTransition);\r\n    }\r\n  }\r\n\r\n  startTutorial = (steps) => {\r\n    return () => {\r\n      this.joyride.reset(true);\r\n      this.setState({joyride: {run: true, steps}})\r\n    }\r\n  }\r\n  renderAddStateButton = () => {\r\n    if(this.props.selectedModuleKey){\r\n      return <button className='button-clear' data-tip='Add a state to this graph.' onClick={this.addNode(this.props.selectedModuleKey, Object.keys(this.props.module.states), this.props.selectedStateKey, this.props.selectedStateTransition)}> + Add State </button>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  renderUndoButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.undoEnabled){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Undo' onClick={() => this.props.undo()}> Undo</button>\r\n  }\r\n\r\n  renderRedoButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.redoEnabled){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Redo' onClick={() => this.props.redo()}> Redo</button>\r\n  }\r\n\r\n  renderDownloadButton = () => {\r\n  }\r\n\r\n  renderUndoButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.undoEnabled){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Undo' onClick={() => this.props.undo()}> Undo</button>\r\n  }\r\n  \r\n  renderDeleteButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.selectedStateKey){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Delete State' onClick={() => this.props.selectedStateKey && this.onChange(`${this.props.selectedModuleKey}.states.${this.props.selectedStateKey}`)({val: {id: null}})}> Delete State</button>\r\n  }\r\n\r\n  renderCopyButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.selectedStateKey){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Copy State' onClick={this.props.selectedStateKey && this.copyNode(this.props.selectedModuleKey, this.props.moduleState, Object.keys(this.props.module.states))}> Copy State</button>\r\n  }\r\n\r\n  renderPasteButton = () => {\r\n    let className = 'button-clear';\r\n    if(!this.props.clipboard){\r\n      className+=' disabled'\r\n    }\r\n    return <button className={className} data-tip='Paste State Here' onClick={this.props.clipboard && this.pasteNode(this.props.selectedModuleKey, Object.keys(this.props.module.states), this.props.selectedStateKey, this.props.selectedStateTransition)}> Paste State</button>\r\n  }\r\n\r\n  renderStateEditor = () => {\r\n    if(this.props.module){\r\n      return <StateEditor\r\n        moduleName={this.props.module.name}\r\n        helpFunction={this.startTutorial}\r\n        renameNode={this.renameNode(this.props.selectedModuleKey, this.props.moduleState)}\r\n        changeType={this.changeStateType(this.props.selectedModuleKey, this.props.moduleState)}\r\n        copyNode={this.copyNode(this.props.selectedModuleKey, this.props.moduleState, Object.keys(this.props.module.states))}\r\n        addTransition={this.addTransition(this.props.selectedModuleKey, this.props.moduleState)}\r\n        state={this.props.moduleState}\r\n        otherStates={this.props.moduleStates}\r\n        onChange={this.onChange(this.props.selectedModuleKey)} />\r\n    }\r\n    return <div/>\r\n\r\n  }\r\n\r\n  renderDownload = () => {\r\n    if(this.props.module){\r\n      return <Download module={this.props.module}\r\n        visible={this.props.downloadVisible}\r\n        onHide={this.props.hideDownload}/>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  renderLoadModule = () => {\r\n    return <LoadModule modules={this.props.modules}\r\n          library={this.props.library}\r\n          visible={this.props.loadModuleVisible}\r\n          onHide={this.props.hideLoadModule}\r\n          push={this.props.push}\r\n          welcome={!this.props.module}\r\n          newModule={this.newModule(Object.keys(this.props.modules))}\r\n          />\r\n  }\r\n\r\n  renderModulePropertiesEditor = () => {\r\n    if(this.props.module){\r\n      return <ModulePropertiesEditor\r\n              module={this.props.module}\r\n              onRemarksChange={(remarks) => this.props.editModuleRemarks(this.props.selectedModuleKey, remarks)}/>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  renderModuleGraph = () => {\r\n    if(this.props.module){\r\n      return <ModuleGraph\r\n            module={this.props.module}\r\n            fullscreen={!this.props.modulePanelVisible}\r\n            onClick={this.props.selectNode}\r\n            selectedState={this.props.moduleState}\r\n            selectedStateTransition={this.props.selectedStateTransition}/>\r\n    }\r\n    return <div/>\r\n  }\r\n\r\n  onPanelResize = (event, data) => {\r\n    this.setState({...this.state, panelWidth: this.state.panelWidth + data.deltaX})\r\n  }\r\n\r\n  onPanelResizeDone = () => {\r\n    this.props.refreshCode();\r\n    if(this.state.panelWidth <= 250){\r\n      this.setState({...this.state, panelWidth: 250});\r\n      this.leftNavClick('hide')();\r\n    }\r\n  }\r\n\r\n  renderPanelContent = () => {\r\n    switch(this.props.selectedModulePanel){\r\n      case 'info':\r\n        return this.renderModulePropertiesEditor();\r\n      case 'state':\r\n        return this.renderStateEditor();\r\n      case 'statelist':\r\n        return <StateList selectedState={this.props.moduleState} states={this.props.moduleStates} onClick={this.props.selectNode} />\r\n      case 'code':\r\n        return <JsonEditor onChange={(value) => {this.props.jsonEdit(value)}} module={this.props.module} refreshCodeFlag={this.props.refreshCodeFlag}/>\r\n      case 'attribute':\r\n        return <AttributeList attributes={this.props.attributes} selectedState={this.props.moduleState} modules={this.props.modules} states={this.props.moduleStates} onClick={this.props.selectNode} />\r\n      case 'warning':\r\n        return <WarningList warnings={this.props.warnings} selectedState={this.props.moduleState} onClick={this.props.selectNode} />\r\n      case 'related':\r\n        return <RelatedList related={this.props.relatedModules} selectedState={this.props.moduleState} onClick={this.props.selectNode} />\r\n      default:\r\n        return <div/>\r\n    }\r\n  }\r\n\r\n  renderStateButton = () => {\r\n    let className = '';\r\n    let onClick = this.leftNavClick('state');\r\n    if(this.props.selectedModulePanel === 'state'){\r\n      className = 'Editor-left-selected';\r\n    } else if(!this.props.moduleState){\r\n      className = 'Editor-left-disabled';\r\n      onClick = () => {};\r\n    }\r\n    let dataTip = 'View currently selected state.'\r\n\r\n    if(this.props.moduleStates){\r\n      dataTip += ' Please selected a state in the graph, state list, or attribute list.'\r\n    }\r\n\r\n    return <li className={className}><button data-tip={dataTip} onClick={onClick}><img src={StateButton} alt=\"\"/></button></li>\r\n  }\r\n\r\n  renderStateListButton = () => {\r\n   let stateCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.moduleStates.length > 0){\r\n       stateCount = <span className='Editor-button-count'>{this.props.moduleStates.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'statelist' ? 'Editor-left-selected' : ''}><button data-tip='Searchable list of states.' onClick={this.leftNavClick('statelist')}><img src={StateListButton} alt=\"\"/>{stateCount}</button></li>\r\n\r\n  }\r\n\r\n  renderAttributesButton = () => {\r\n   let attributesCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.attributes.length > 0){\r\n     attributesCount = <span className='Editor-button-count'>{this.props.attributes.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'attribute' ? 'Editor-left-selected' : ''}><button data-tip='Attributes set in this module.' onClick={this.leftNavClick('attribute')}><img src={AttributeButton} alt=\"\"/>{attributesCount}</button></li>\r\n\r\n  }\r\n\r\n\r\n  renderWarningButton = () => {\r\n   let warningCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.warnings.length > 0){\r\n     warningCount = <span className='Editor-button-count Editor-button-count-warning'>{this.props.warnings.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'warning' ? 'Editor-left-selected' : ''}><button data-tip='Problems in module that need to be resolved.' onClick={this.leftNavClick('warning')}><img src={WarningButton} alt=\"\"/>{warningCount}</button></li>\r\n\r\n  }\r\n\r\n  renderRelatedModulesButton = () => {\r\n\r\n   let relatedCount = <span className='Editor-button-count'>0</span>\r\n   if(this.props.relatedModules.length > 0){\r\n     relatedCount = <span className='Editor-button-count'>{this.props.relatedModules.length}</span>\r\n   }\r\n   return <li className={this.props.selectedModulePanel === 'related' ? 'Editor-left-selected' : ''}><button data-tip='Related modules, such as those that share attributes. ' onClick={this.leftNavClick('related')}><img src={RelatedButton} alt=\"\"/>{relatedCount}</button></li>\r\n\r\n  }\r\n\r\n\r\n  leftNavClick = (nav) => {\r\n    return () => {\r\n      if(nav !== 'hide' || (nav === 'hide' && this.props.modulePanelVisible)){\r\n        this.props.changeModulePanel(nav);\r\n      } else if (nav === 'hide') {\r\n        if(this.props.selectedStateKey){\r\n          this.props.changeModulePanel('state');\r\n        } else {\r\n          this.props.changeModulePanel('info');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  renderNav = () => {\r\n    return(\r\n      <div className='Editor-top'>\r\n        <img src={SyntheaLogo} className='Editor-top-logo' alt='Synthea Logo'/>\r\n        <div className='Editor-top-title'>Synthea Module Builder</div>\r\n        <div className='Editor-top-open'>\r\n          <button className='button-clear' onClick={this.newModule(Object.keys(this.props.modules)).bind(this, undefined)}>New Module</button>\r\n          <button className='button-clear' onClick={this.props.showLoadModule}>Open Module</button>\r\n          <button className='button-clear Editor-top-download' onClick={this.props.showDownload}>Download</button>\r\n        </div>\r\n        <button className='button-clear Editor-top-help' onClick={this.startTutorial(BasicTutorial)}> ? </button>\r\n        <NavTabs selectedModuleKey={this.props.selectedModuleKey}\r\n                 modules={this.props.modules}\r\n                 onChangeModule={(key) => this.props.push('#' + key)}\r\n                 onCloseModule={(key) => {this.props.closeModule(key)}}\r\n                 />\r\n              \r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  renderMainEditor = () => {\r\n\r\n    if(!this.props.module){\r\n      return <img className='Editor-loading-logo' src={LoadingLogo} alt='Loading'/>\r\n    }\r\n\r\n    return (\r\n      <div className='Editor-main'>\r\n\r\n        <div className='Editor-action-bar'>\r\n              <RIEInput className='Editor-top-module' value={(this.props.module && this.props.module.name) || 'Untitled'} propName=\"name\" change={(name) => {this.props.editModuleName(this.props.selectedModuleKey, name.name)}} />\r\n             <div className='Editor-graph-buttons'>\r\n                {this.renderAddStateButton()}\r\n                {this.renderUndoButton()}\r\n                {this.renderRedoButton()}\r\n                {this.renderDeleteButton()}\r\n                {this.renderCopyButton()}\r\n                {this.renderPasteButton()}\r\n                {this.renderDownloadButton()}\r\n\r\n             </div>\r\n        </div>\r\n\r\n        <div className='Editor-left'>\r\n         <ul>\r\n        <li className={'Editor-left-fullscreen' + (!this.props.modulePanelVisible ? ' Editor-left-fullscreen-active' : '')}><button data-tip='Show/hide editor panel.' onClick={this.leftNavClick('hide')}><img src={FullscreenButton} alt=\"\"/></button></li>\r\n           <li className='Editor-left-spacer'></li>\r\n           <li className={this.props.selectedModulePanel === 'info' ? 'Editor-left-selected' : ''}><button data-tip='Module Properties.' onClick={this.leftNavClick('info')}><img src={InfoButton} alt=\"\"/></button></li>\r\n           {this.renderStateButton()}\r\n           <li className='Editor-left-spacer'></li>\r\n           <li className={this.props.selectedModulePanel === 'code' ? 'Editor-left-selected' : ''}><button data-tip='Directly edit module JSON.' onClick={this.leftNavClick('code')}><img src={CodeButton} alt=\"\"/></button></li>\r\n           <li className='Editor-left-spacer'></li>\r\n           {this.renderStateListButton()}\r\n           {this.renderAttributesButton()}\r\n           {this.renderWarningButton()}\r\n           {this.renderRelatedModulesButton()}\r\n\r\n\r\n         </ul>\r\n        </div>\r\n\r\n        <div className='Editor-panel' style={{left: this.props.modulePanelVisible ? 50 :  -this.state.panelWidth, width: this.state.panelWidth}}>\r\n          <div className='Editor-panel-content'>\r\n            <button className='Editor-panel-minimize button-clear' onClick={this.leftNavClick('hide')} ><img src={MinimizePanel} alt=\"\"/></button>\r\n            {this.renderPanelContent()}\r\n          </div>\r\n\r\n          <Draggable\r\n             axis='x'\r\n             onDrag={this.onPanelResize}\r\n             onStop={this.onPanelResizeDone}\r\n             bounds={{left: -250, top: 0, right: Infinity, bottom: 0}}\r\n            >\r\n            <div className='Editor-panel-resize' style={{left: this.originalPanelWidth - 8}}></div>\r\n          </Draggable>\r\n\r\n         </div>\r\n\r\n\r\n\r\n        {this.renderModuleGraph()}\r\n\r\n\r\n      </div>)\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className='Editor'>\r\n\r\n        <ReactTooltip\r\n          className='react-tooltip-customized'\r\n          effect='solid'\r\n          delayShow={800}\r\n          />\r\n\r\n        { this.renderNav() }\r\n\r\n        { this.renderLoadModule() }\r\n        { this.renderDownload() }\r\n\r\n        { this.renderMainEditor() }\r\n\r\n\r\n        <Joyride\r\n          ref={c => (this.joyride = c)}\r\n          showOverlay={true}\r\n          showSkipButton={true}\r\n          showStepsProgress={false}\r\n          type={'continuous'}\r\n          steps={this.state.joyride.steps}\r\n          run={this.state.joyride.run}\r\n          autoStart={true}\r\n          debug={false}\r\n          allowClicksThruHole={false}\r\n          keyboardNavigation={true}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\r\n  let selectedModuleKey = state.editor.selectedModuleKey;\r\n\r\n  let loadModuleVisible = state.editor.loadModuleVisible;\r\n\r\n  if(!selectedModuleKey){\r\n    loadModuleVisible = true;\r\n  }\r\n\r\n  let module = state.editor.modules[selectedModuleKey];\r\n\r\n  let moduleStates = selectedModuleKey && extractStates(module);\r\n  let moduleState =  moduleStates && moduleStates.find(s => (s.name === state.editor.selectedStateKey))\r\n\r\n  let undoEnabled = state.editor.historyIndex < state.editor.history.length - 1;\r\n  let redoEnabled = state.editor.historyIndex > 0;\r\n\r\n  return {\r\n    module,\r\n    modules: state.editor.modules,\r\n    library: state.library.modules,\r\n    selectedModuleKey,\r\n    moduleState,\r\n    moduleStates,\r\n    selectedStateKey: state.editor.selectedStateKey,\r\n    selectedStateTransition: state.editor.selectedStateTransition,\r\n    loadModuleVisible: loadModuleVisible,\r\n    downloadVisible: state.editor.downloadVisible,\r\n    selectedModulePanel: state.editor.selectedModulePanel,\r\n    modulePanelVisible: state.editor.modulePanelVisible,\r\n    warnings: state.analysis.warnings,\r\n    relatedModules: state.analysis.relatedModules,\r\n    attributes: state.analysis.attributes,\r\n    undoEnabled,\r\n    redoEnabled,\r\n    refreshCodeFlag: state.editor.refreshCodeFlag,\r\n    clipboard: state.editor.clipboard\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators({\r\n  selectNode,\r\n  addNode,\r\n  addStructure,\r\n  addTransition,\r\n  editNode,\r\n  renameNode,\r\n  copyNode,\r\n  changeStateType,\r\n  newModule,\r\n  loadLibrary,\r\n  showLoadModule,\r\n  hideLoadModule,\r\n  showDownload,\r\n  hideDownload,\r\n  refreshCode,\r\n  editModuleName,\r\n  editModuleRemarks,\r\n  changeModulePanel,\r\n  jsonEdit,\r\n  closeModule,\r\n  undo,\r\n  redo,\r\n  push\r\n}, dispatch)\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Editor);\r\n","// @flow\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport { ConnectedRouter} from 'connected-react-router'\r\n\r\nimport createAppStore, { history } from './store';\r\nimport Editor from './containers/Editor';\r\n\r\nimport { openModule } from './actions/router';\r\n\r\nconst store = createAppStore(history)\r\n\r\nconst App = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <ConnectedRouter history={history}>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Editor} />\r\n        </Switch>\r\n      </ConnectedRouter>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nconst dispatchLocationChange = location => {\r\n  if(location.hash.charAt(0) === '#'){\r\n    store.dispatch(openModule(location.hash.slice(1)));\r\n  }\r\n}\r\n\r\nhistory.listen(dispatchLocationChange);\r\n\r\ndispatchLocationChange(history.location);\r\n\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css'\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// Do not use service workers because they cause unexpected behavior and we\r\n// are not interested in offline modes currently. Unregister to clear out\r\n// previous registered service workers for people that have already visited\r\n// the app.\r\nserviceWorker.unregister();\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAABTCAYAAADjsjsAAAADZ0lEQVR4nO2dTZKbMBBGnycXYJlljsANQm6RpY6inGS22c0RnJwAHyHL7PANyAJIYRsMgpbUyPqqvoVrPDT9Sn80wpyIr7L3F+ArUPSfl3QBrsBv4E//+eLlDBWrAAzwATRAK+imP67p4yQrQ5eoJLwlD2CTUAFY5FvglhZrOWhr1QLx8FAt+iDOQVWrEqiJD8rFNetWDkFliQ9mj600kC0qOF5rfNZKo42lJfrHRlc3ROj2hvRAjoEaKVBLMh4T0WQjg2teJnKCyQA1CpJLAmiKk81ai05KBa8Lcgx0cdn0tsyS85oDJa6CjsNTfVr4uwW+S5xNAvoMnIBfW/65JH730uhN42cql4nSrueAzXVzS+7ec3Lq7j5m7waoCN/a6z6uj3xWTcrWQ+BhnAlZZRpXgXysk+0SSOlWObXgDQF0qpwmDXSxdVrPIEMAfVaXlAZqZ+KAYKA1l2A+gK4p8EoCbeaCGMGkqoWEBkkCdamUV4K5mqkAkhsEXBKTABo63tgfUwGkDh46wZggB9/ENx4ChEhUA8iWu67ucw+Qr4S1gGy56+q+65XSiWsC2TKa1UNVh6QAaAM5uISw93b2gtAKsqUfN23AgHuAaAbZ0l8NnQMH3QLm3fH7MWqxZyIFdgW6VjH3PtVECuwDqIZNZFGDSwHVAFIFzL1AtYBUA3MrUE0gVcFs6WZtF70rOGeVMHPLjAhSI9DoJ5Bnc0UgB2kAmq+ApPJ5o3vMOLQuwLeVsV2uza/9cWM8Kn2FXDWSsoVcz5SygVxpl/L/TRf5HtA+3+zsyHcn9/nm7qTxFOQl75vnHR37/BA/7zXa5oe9RpB3wW21mQuS92e65zkrK5jYy+8cLoSDTQENse6bAioNspmI8SArnNgYaMgrkjFQaZCLrXKQdOscgFYBQY6BVp7yWV0+tIGTPprtWpCDYlettbp2BQn5qd45zy75nj1v/pfugcvqyXdeTT+An3sOkLt7503d+14+Zvej2Wn2XpKPddpRvObS2FlGQWIxbPajm5ZRkFwSIAeZyAkmA3KQId0xtCHCL2inOCl5mWzWSsNmKSn72Pu0SZb4MPbYSgPZq5LjtdIahb+GPZZF/1jaoLA1zqlAJ9QBooqx0VVaoB4a4pQM+a0r4ipI9H1Ap9ABJ1SSyJuq/gG9HAYxsPsSkQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/synthea-animated-logo.d15f277a.svg\";","module.exports = __webpack_public_path__ + \"static/media/synthea-logo.81979623.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABKUlEQVRIieWVzW3DMAxGn4Au4BW8QlbwClnBK2SFrpAV2hG8QlZQR/AKzKEMKsQ0TCoSeggBHgxIfvz7KPgnS+WHiPSBpHQGRuAb+NkcEJGmDsxABkR9erA+OmQ3KHDWLE1rBi6AF2A4Ov8yOKU0KuzsAZoW7N8IXPnrn8cnA+sD6+UlCBQN0q6IY0KjwIz2vPiPD8xWEh6/AfPO//bBWpJLBfAKTAeVM+0BXAOwFfgERueM2EkHPGsbBg+wBXg5KmdrcPaWs0fGK78zUB3AK6UuJ/jUClyzlRZ2NFuj4xPxPbzZUmFwcajmIVj1jjkHLrCxySKLRYAvnqQXAjdYpRmdgyrwUxA1j0f9e7wTgFcJ7cBFAB4ptgc7pdgPfCDF/mBDCYtW403tDn5nUb6eK9JxAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAAAmCAYAAADz9XSfAAAC00lEQVR4nO2c4XnaMBRF7+NjAEagGzgbOBuQDcgGdAM6QbMBbJBskGwAGyQblA1uf8hNhbAtbPSeGtV3AB0ONu9JnyQApZBckHwlWWsxWphLkgcrXsAuy5dkRfIXXWoVyCVz9YdpwQvYFcl3Y99azZfkmuepk0MumVsfqM0L2Dl8Nyq+TTnZ8TJ1Mkg78zkEavFa+OX4sqnNLUJqUnQlrJWpwQvYi6J86dVmKym6EtbJTM0L2Dl8V33MWwffdA2sJUXyZwyYkhewc/huY8CxA7fWZk0p/p3CR5OC18LeFePLntqsJcXzKXx6qX52X7//er6M1GYNKV5O4dNK9bNz+Q5iDhk8WptTS/H6EjZO6t/zjfb7tsyvGHgB4BnA6A83NA3zFUBlxQzYOwArY+Zo31lk8ArAAbYPsAbwjjwPsIL7Mi0fYIUbfTsfIsk1nNBy7OBDQ3LTMBdWTI+9hvGvv2EeoOE7tjZ3pL6CN2QKH83/5jsPB4f927iE67m5+p91v18ise9nOWWC2jw0JFdw5SRX/8vR75P7zprB19CqzR0huYV7I3P1vwMK6fdzkjsA69QDd4UZpvABvzjf3iXGlK+RmYg8Ani0AorISUQeAPywYgb8XL7ftRizBrQHcAfgpAUKIyJbAA+WTI+9h/P9MGQ+AbiHgu9nORWRI4BvAI6pIV0RkRe4L9OM6bGPDfvNkPkGBd+zntj89O8APKWE9EVEPuDe0L0V02OfROQepfpyxJZIR+oBzGt2zqP5Qr6Dt9naEoMM2pzsyNVSDTN2huU2qbjvkA3gFL7+Gd1R6V1iZOwbpr3ZYx/hSt2LMfMm3+g60esbZksCrzfvrZgB23QJZDoX4XQ8w8pX53iGB5kOSpXgy+nIYjm+nA4PW/jqHB4OINMxfn1fvWP8HmS6UFOCL6erbeX4crpkWhswdS6ZBpDpurc+s1b3ZWl/RBBnZ/P9DWNXeLt4JWYKAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAYAAADud3N8AAABr0lEQVRIib3WsWsUQRTH8c/OnTZRBIkWOUFLG0FjFUgrpLOz0NZ/QNDeXhQbQSxSCVrY2KSwUIgWIgqBNEoOxYhaGS8RxEIuFrsLlzV3mbm97A9esfB+7/tmZuftZuKU4SzmcRodtPEXX/Eer7CC7ciaQzWNm1gviu0V60X+9DiwFm5gKxJWja3C34oFHsfymLBqLBf1RuoEuhMCltEt6u6qQ1iNLHQfl3AvMn+1qP+fFiMLfKr4Pkb6FqvAuYTt+jnQ9RQ2Erxzg9ClBGN5Tg+xluhbKoEd9BPN40YfnYAF+cRpQhkWAmYTjZuFuYzNRP9skG9vk+oEHG4YOhXQaxj6I8gvd5P6HvC6YegbOILf4u9a9Th6Cd4+ZoL8lX+0b+vaqef4Vj6cwp/Ibuus9GK1i+sJ5t5AxHre2WXyZXiSUCR15u74wgzqIJ7uA/T2MGCpFm6Z3JfnJQ7sBS01j7c1gV0ciwWWynABj/ErEfgZJ1OBVbVxDldwTT7JhgE/GPEHWEd3hwBf4OgoY5hwI3fkx7ExKqk9IdgXXMWzmOS6K93GA5yJBdbVZZwfx/gPjrmEGhKRqqEAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADF0lEQVRIiZ3WS4iVZRgH8N8cx+N4osuMkqPZFbEb4aIUwkVWEAUtohZR7oISiqJNi0gwsILatLCCcBPZbREFbaTMRYRdKRcVJdaohVE5MzmHUU9NZ74Wz/M535w5M874h5dzznt5/s/l/z7v6XFmNLABd2AT1mApjuN7fIS9+AH/zsNeV1yNl3AMBVoYwV9J1MYkfsIT6D8bkpvxdRI08Rm24i7chs14MSNpYwJv4dKFkFyPb5LkFzyKVah37GuIqJ/H37l/Fy6cD8lyvJuHfsQtWHyGM+emM8dFZE9iyVwHevAA/kkP7+xYX4SLsQ5rk6BEHU+ngwdxw1xEg9idm18xPVXnYwv2YQgH8DKurey5DF/l+a1zRXUjfsUYbq/MN/CMEEVRGRP4Atd1iWovVs5GdB9OCiVdXpnfJCRddBlt7BB3i1DkWEZ9ZWmgVjHWg/PSqzFxZwgh3Jpr3VATl3kgfw9jXKR6SXVTlaiWn+30ttyzqmNvJ1aYUmZ5tifHDKJJUYOJ9L705j8cMrfEj+JUfh8QahwX6p1BBIcxKuqzpuLhBzgyC0khOsKIkP/GdHQoHe+KlfgwD++oRFHDgxlZVQhNvC1SB5fgS5GdbWZ2ktNYlAab4sJWJV4X/e910Z724DFclOt9eEqk+mesn42kxCDeS4+/S7K+ynq/6A6D6M25hugoo6Iu2zvOzIqNopkW+A2P4IKMuIrFoqk+J2pU4BNT9T2N3s6JRFs0SFgtnoO78T6+FYpaIRruPbginWiKbAzNJ5rVeE0U9JAQx4iQfSFe0ZaoRVUYkzn24CYdQijluBx/iFw/jIfS4At4Fp+K/Pcm4Xj+3i+EcQofiza0IceweOpJ9e5Lr9fhXvyeHu40/QE7R4jgGtFE12b6lglZ9+N+cXmLtHmVqNdmmYYW3jH1dO9OgwtFHY+LVJ/Am2l3v0xBmfsCn4t0ni0G8Kqp/xF/4ljN9C49IR60UTOlPF9MiielJWral3MOm66cYbwh7sdCURdCOpK2SpvNXnFflmY0LdHXyrFQ1MQ71BAd4qTIzOj/E7fg3rTP7r4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAaCAYAAAAwspV7AAAAs0lEQVRIie3UMQrCQBCF4S9h8SzxRKbQ0lYrxcYL6BXsbPSEQhotNBBCAmuzSbE/TLGzA/uYfbxiWVULXLFGgTsOaOp6BR6Pp5QEXLDr9HZ44dSbfacSVWIz0N+mEjBEOeXjY5S+HupzG+gVqSrg+Du033jHuaumNXwqAhrsfzULQuotxDBLoxfLqhq9nGqLAaOJ3g7lRJcTPZ6c6LHkRI9llkbPif6PqJzoMczS6DnRY/kAyfw0NPNHfbAAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAZCAYAAADNAiUZAAABn0lEQVRIic2WwXHCMBBFnzM0QAu04JSQlAAlQAlwk3SDElAJSQmhBFwCtOAS4CAJ1kISdkxm8mc8I9kr/d2V9nsr0pgDS+DDzy2wShkarW5jpc0MOInPG+DbaHWWa94S+6yBL0E4Blvg6J15SvpKTHGZu2ESGcy8UcAG2PXd3aexAlDa/HDPVi3t4khn0dz2JUzgkNs3lV6JdgSpXCuz95T0T1AiHRNlcX3pTEuke+ACXJQ2F6VNqrx6p1fesqZA2gdSEKbSMUm69M9LSH35SOJtEIkJLqWnaE3DgPosYAEc/bgGTkobW2VIq767Su1NQWmzxslhgM3d3mPm/SAobeqIEHBnGqRL/kVquuf7W+zFuAHejVYrGamlK3uj/jI+SlkNK6NVA48lI29srMNDIWuzDYQp0k5tFTZc0hWHlINZofl32luKNMYgnX4FaWu0SpHK9cUe6RzNc2VjuSvWIf6otHloUSTiduWMS1Xwcu+fuBuceodaQZ7qBgM6Op5Kbx/NneMi/JSlkEFL1PbkSBck0iZgvc0zwh1OhTrHdgUMPHWH6hjEpwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAABmklEQVRIibWWy3HCMBCGv3HSgFtwC0kJaYEWSAlQgiiBXHNzSoBrbqQEuOZmX7mRA1q0XkvyiJh/RjO2tI9f2ocEY6yAC1BH1v4DsdsBLznBNy+4m5kAQAMcFZEmJXicEpiBSEdmo84vugcREEhYLlxPfoDOj7lzIQYJyzbGbhvT8HB+/aKGPTWn1nIJqJP0hh2J4zEOnJKVIY7sfC60DSYkMtElFGI4GEc6zjvCca8yNgYyS8rLUnSE/NTOY2hFpyIk4qnAwAfQ+2/R3wPrAhvir6kIPaGEBMCX+S8hAGET6JMoxT5ltBTVvYqMk255p53+XhKOcQ9YFNq45WIVmYxhSdhpSziFNSEMDfmStJBN9BC6XKpEdWPRQ7qrM/NCdkU+RFLaDYSaTzWrGInWyBwiMrm+IU+GI8AzIctrv2iz/gS8E0r5h3F5vhqHPbBJEIAQioGd6K32QIi/QXLrW+3RV/mCeEipmXjxzAjJn+g1r2/CklIrgfjIXnT6TVDafKYgVXawC0/m/xM4c62Ab+B3ZiJwrbSznvgDPlufbtfHeLcAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAYAAAAULC3gAAABYElEQVRIie2XTU7DMBCFP1dZItFLVGHFujs2CAmxZMdFKBdo4TBhxx04AItyiqgpe7OwKyZR4njCgCrEk0aa+PfZHr+JIWABVMAO8Ea2i2MuALz3WQZQArUhka7VQKkhVP0gmYNVuYQcsAdO4tG9AS/Y4Bo4j37jvT/N7ShXsjIiA7CRY+fu0MyQgAn+PiF5W6bg6HYIdEE9KqBih7LK6QiohlCWgE4g1BJQzZGtgbmivRZzYF0oOlwJP0dAX4FlT/lT51sK6CWMHNnAVq+GbpMo7xXGHrTaFcAHX6njLlakVgRwATxG/15WOOcO7o0obvqYDCGZXL8RpK3kmph/02nLGYnbY0CojnNkEZoBW0LwPRMyvxX2ccxlnCMLRVzlO3CrmOxB+G6w1QRorn0LInhNcXS57J/QGDQxNCagU9EWUMXz5FdeJxpCSQE1sCCgmgcc4Z+oIuQmKyJNHLME+AQWCT3RvS5INwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAA5ElEQVRIib3WPQqDQBCG4dc0Qq6Rg6XzXjlDevEIghcQBGtbK9OsYUn8mU/HXRgIMpMHx12dDH3lwDP8fgHjgf8wrztQAlOIMlxLgl2KrmGXoHuYK2rFXNA1bACqEIMXunVndZRXr+RI6F4bLaAZtTyzJspvdnI3UesGaaOa1pC/iCq7UQX/0FzAJqCPwF6oK4NFIRTNx2JeS8diK4rbb29TLLWl8edoFOq+LQX9FTagtfP0TlXC5Sy6YFa0Ax4hurOYBa2ivMoDs6DvEG6YBXXHVDTpXJN0cks6m8pYdgA9Nep/AHdVY2hvGCEdAAAAAElFTkSuQmCC\""],"sourceRoot":""}